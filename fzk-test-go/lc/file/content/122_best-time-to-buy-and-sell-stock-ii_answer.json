{
  "data": {
    "solutionArticle": {
      "__typename": "SolutionArticleNode",
      "author": {
        "__typename": "UserNode",
        "profile": {
          "__typename": "UserProfileNode",
          "realName": "åŠ›æ‰£å®˜æ–¹é¢˜è§£",
          "userAvatar": "https://assets.leetcode-cn.com/aliyun-lc-upload/users/leetcode-solution/avatar_1582018938.png",
          "userSlug": "leetcode-solution"
        },
        "username": "LeetCode-Solution"
      },
      "byLeetcode": true,
      "canEdit": false,
      "canEditReward": false,
      "canSee": true,
      "chargeType": "FREE",
      "content": "### ğŸ“º è§†é¢‘é¢˜è§£  \n![122. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºII.mp4](12582e43-022d-4ed9-834b-2d1142e3a901)\n\n### ğŸ“– æ–‡å­—é¢˜è§£\n#### æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’\n\nè€ƒè™‘åˆ°ã€Œä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ã€ï¼Œå› æ­¤æ¯å¤©äº¤æ˜“ç»“æŸååªå¯èƒ½å­˜åœ¨æ‰‹é‡Œæœ‰ä¸€æ”¯è‚¡ç¥¨æˆ–è€…æ²¡æœ‰è‚¡ç¥¨çš„çŠ¶æ€ã€‚\n\nå®šä¹‰çŠ¶æ€ $\\textit{dp}[i][0]$ è¡¨ç¤ºç¬¬ $i$ å¤©äº¤æ˜“å®Œåæ‰‹é‡Œæ²¡æœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦ï¼Œ$\\textit{dp}[i][1]$ è¡¨ç¤ºç¬¬ $i$ å¤©äº¤æ˜“å®Œåæ‰‹é‡ŒæŒæœ‰ä¸€æ”¯è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦ï¼ˆ$i$ ä» $0$ å¼€å§‹ï¼‰ã€‚\n\nè€ƒè™‘ $\\textit{dp}[i][0]$ çš„è½¬ç§»æ–¹ç¨‹ï¼Œå¦‚æœè¿™ä¸€å¤©äº¤æ˜“å®Œåæ‰‹é‡Œæ²¡æœ‰è‚¡ç¥¨ï¼Œé‚£ä¹ˆå¯èƒ½çš„è½¬ç§»çŠ¶æ€ä¸ºå‰ä¸€å¤©å·²ç»æ²¡æœ‰è‚¡ç¥¨ï¼Œå³ $\\textit{dp}[i-1][0]$ï¼Œæˆ–è€…å‰ä¸€å¤©ç»“æŸçš„æ—¶å€™æ‰‹é‡ŒæŒæœ‰ä¸€æ”¯è‚¡ç¥¨ï¼Œå³ $\\textit{dp}[i-1][1]$ï¼Œè¿™æ—¶å€™æˆ‘ä»¬è¦å°†å…¶å–å‡ºï¼Œå¹¶è·å¾— $\\textit{prices}[i]$ çš„æ”¶ç›Šã€‚å› æ­¤ä¸ºäº†æ”¶ç›Šæœ€å¤§åŒ–ï¼Œæˆ‘ä»¬åˆ—å‡ºå¦‚ä¸‹çš„è½¬ç§»æ–¹ç¨‹ï¼š\n\n$$\n\\textit{dp}[i][0]=\\max\\{\\textit{dp}[i-1][0],\\textit{dp}[i-1][1]+\\textit{prices}[i]\\}\n$$\n\nå†æ¥è€ƒè™‘ $\\textit{dp}[i][1]$ï¼ŒæŒ‰ç…§åŒæ ·çš„æ–¹å¼è€ƒè™‘è½¬ç§»çŠ¶æ€ï¼Œé‚£ä¹ˆå¯èƒ½çš„è½¬ç§»çŠ¶æ€ä¸ºå‰ä¸€å¤©å·²ç»æŒæœ‰ä¸€æ”¯è‚¡ç¥¨ï¼Œå³ $\\textit{dp}[i-1][1]$ï¼Œæˆ–è€…å‰ä¸€å¤©ç»“æŸæ—¶è¿˜æ²¡æœ‰è‚¡ç¥¨ï¼Œå³ $\\textit{dp}[i-1][0]$ï¼Œè¿™æ—¶å€™æˆ‘ä»¬è¦å°†å…¶ä¹°å…¥ï¼Œå¹¶å‡å°‘ $\\textit{prices}[i]$ çš„æ”¶ç›Šã€‚å¯ä»¥åˆ—å‡ºå¦‚ä¸‹çš„è½¬ç§»æ–¹ç¨‹ï¼š\n\n$$\n\\textit{dp}[i][1]=\\max\\{\\textit{dp}[i-1][1],\\textit{dp}[i-1][0]-\\textit{prices}[i]\\}\n$$\n\nå¯¹äºåˆå§‹çŠ¶æ€ï¼Œæ ¹æ®çŠ¶æ€å®šä¹‰æˆ‘ä»¬å¯ä»¥çŸ¥é“ç¬¬ $0$ å¤©äº¤æ˜“ç»“æŸçš„æ—¶å€™ $\\textit{dp}[0][0]=0$ï¼Œ$\\textit{dp}[0][1]=-\\textit{prices}[0]$ã€‚\n\nå› æ­¤ï¼Œæˆ‘ä»¬åªè¦ä»å‰å¾€åä¾æ¬¡è®¡ç®—çŠ¶æ€å³å¯ã€‚ç”±äºå…¨éƒ¨äº¤æ˜“ç»“æŸåï¼ŒæŒæœ‰è‚¡ç¥¨çš„æ”¶ç›Šä¸€å®šä½äºä¸æŒæœ‰è‚¡ç¥¨çš„æ”¶ç›Šï¼Œå› æ­¤è¿™æ—¶å€™ $\\textit{dp}[n-1][0]$ çš„æ”¶ç›Šå¿…ç„¶æ˜¯å¤§äº $\\textit{dp}[n-1][1]$ çš„ï¼Œæœ€åçš„ç­”æ¡ˆå³ä¸º $\\textit{dp}[n-1][0]$ã€‚\n\n```C++ [sol11-C++]\nclass Solution {\npublic:\n    int maxProfit(vector<int>& prices) {\n        int n = prices.size();\n        int dp[n][2];\n        dp[0][0] = 0, dp[0][1] = -prices[0];\n        for (int i = 1; i < n; ++i) {\n            dp[i][0] = max(dp[i - 1][0], dp[i - 1][1] + prices[i]);\n            dp[i][1] = max(dp[i - 1][1], dp[i - 1][0] - prices[i]);\n        }\n        return dp[n - 1][0];\n    }\n};\n```\n\n```Java [sol11-Java]\nclass Solution {\n    public int maxProfit(int[] prices) {\n        int n = prices.length;\n        int[][] dp = new int[n][2];\n        dp[0][0] = 0;\n        dp[0][1] = -prices[0];\n        for (int i = 1; i < n; ++i) {\n            dp[i][0] = Math.max(dp[i - 1][0], dp[i - 1][1] + prices[i]);\n            dp[i][1] = Math.max(dp[i - 1][1], dp[i - 1][0] - prices[i]);\n        }\n        return dp[n - 1][0];\n    }\n}\n```\n\n```JavaScript [sol11-JavaScript]\nvar maxProfit = function(prices) {\n    const n = prices.length;\n    const dp = new Array(n).fill(0).map(v => new Array(2).fill(0));\n    dp[0][0] = 0, dp[0][1] = -prices[0];\n    for (let i = 1; i < n; ++i) {\n        dp[i][0] = Math.max(dp[i - 1][0], dp[i - 1][1] + prices[i]);\n        dp[i][1] = Math.max(dp[i - 1][1], dp[i - 1][0] - prices[i]);\n    }\n    return dp[n - 1][0];\n};\n```\n\n```Golang [sol11-Golang]\nfunc maxProfit(prices []int) int {\n    n := len(prices)\n    dp := make([][2]int, n)\n    dp[0][1] = -prices[0]\n    for i := 1; i < n; i++ {\n        dp[i][0] = max(dp[i-1][0], dp[i-1][1]+prices[i])\n        dp[i][1] = max(dp[i-1][1], dp[i-1][0]-prices[i])\n    }\n    return dp[n-1][0]\n}\n\nfunc max(a, b int) int {\n    if a > b {\n        return a\n    }\n    return b\n}\n```\n\n```C [sol11-C]\nint maxProfit(int* prices, int pricesSize) {\n    int dp[pricesSize][2];\n    dp[0][0] = 0, dp[0][1] = -prices[0];\n    for (int i = 1; i < pricesSize; ++i) {\n        dp[i][0] = fmax(dp[i - 1][0], dp[i - 1][1] + prices[i]);\n        dp[i][1] = fmax(dp[i - 1][1], dp[i - 1][0] - prices[i]);\n    }\n    return dp[pricesSize - 1][0];\n}\n```\n\næ³¨æ„åˆ°ä¸Šé¢çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸­ï¼Œæ¯ä¸€å¤©çš„çŠ¶æ€åªä¸å‰ä¸€å¤©çš„çŠ¶æ€æœ‰å…³ï¼Œè€Œä¸æ›´æ—©çš„çŠ¶æ€éƒ½æ— å…³ï¼Œå› æ­¤æˆ‘ä»¬ä¸å¿…å­˜å‚¨è¿™äº›æ— å…³çš„çŠ¶æ€ï¼Œåªéœ€è¦å°† $\\textit{dp}[i-1][0]$ å’Œ $\\textit{dp}[i-1][1]$ å­˜æ”¾åœ¨ä¸¤ä¸ªå˜é‡ä¸­ï¼Œé€šè¿‡å®ƒä»¬è®¡ç®—å‡º $\\textit{dp}[i][0]$ å’Œ $\\textit{dp}[i][1]$ å¹¶å­˜å›å¯¹åº”çš„å˜é‡ï¼Œä»¥ä¾¿äºç¬¬ $i+1$ å¤©çš„çŠ¶æ€è½¬ç§»å³å¯ã€‚\n\n```C++ [sol12-C++]\nclass Solution {\npublic:\n    int maxProfit(vector<int>& prices) {\n        int n = prices.size();\n        int dp0 = 0, dp1 = -prices[0];\n        for (int i = 1; i < n; ++i) {\n            int newDp0 = max(dp0, dp1 + prices[i]);\n            int newDp1 = max(dp1, dp0 - prices[i]);\n            dp0 = newDp0;\n            dp1 = newDp1;\n        }\n        return dp0;\n    }\n};\n```\n\n```Java [sol12-Java]\nclass Solution {\n    public int maxProfit(int[] prices) {\n        int n = prices.length;\n        int dp0 = 0, dp1 = -prices[0];\n        for (int i = 1; i < n; ++i) {\n            int newDp0 = Math.max(dp0, dp1 + prices[i]);\n            int newDp1 = Math.max(dp1, dp0 - prices[i]);\n            dp0 = newDp0;\n            dp1 = newDp1;\n        }\n        return dp0;\n    }\n}\n```\n\n```JavaScript [sol12-JavaScript]\nvar maxProfit = function(prices) {\n    const n = prices.length;\n    let dp0 = 0, dp1 = -prices[0];\n    for (let i = 1; i < n; ++i) {\n        let newDp0 = Math.max(dp0, dp1 + prices[i]);\n        let newDp1 = Math.max(dp1, dp0 - prices[i]);\n        dp0 = newDp0;\n        dp1 = newDp1;\n    }\n    return dp0;\n};\n```\n\n```Golang [sol12-Golang]\nfunc maxProfit(prices []int) int {\n    n := len(prices)\n    dp0, dp1 := 0, -prices[0]\n    for i := 1; i < n; i++ {\n        dp0, dp1 = max(dp0, dp1+prices[i]), max(dp1, dp0-prices[i])\n    }\n    return dp0\n}\n\nfunc max(a, b int) int {\n    if a > b {\n        return a\n    }\n    return b\n}\n```\n\n```C [sol12-C]\nint maxProfit(int* prices, int pricesSize) {\n    int dp0 = 0, dp1 = -prices[0];\n    for (int i = 1; i < pricesSize; ++i) {\n        int newDp0 = fmax(dp0, dp1 + prices[i]);\n        int newDp1 = fmax(dp1, dp0 - prices[i]);\n        dp0 = newDp0;\n        dp1 = newDp1;\n    }\n    return dp0;\n}\n```\n\n**å¤æ‚åº¦åˆ†æ**\n\n- æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œå…¶ä¸­ $n$ ä¸ºæ•°ç»„çš„é•¿åº¦ã€‚ä¸€å…±æœ‰ $2n$ ä¸ªçŠ¶æ€ï¼Œæ¯æ¬¡çŠ¶æ€è½¬ç§»çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(1)$ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸º $O(2n)=O(n)$ã€‚\n\n- ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$ã€‚æˆ‘ä»¬éœ€è¦å¼€è¾Ÿ $O(n)$ ç©ºé—´å­˜å‚¨åŠ¨æ€è§„åˆ’ä¸­çš„æ‰€æœ‰çŠ¶æ€ã€‚å¦‚æœä½¿ç”¨ç©ºé—´ä¼˜åŒ–ï¼Œç©ºé—´å¤æ‚åº¦å¯ä»¥ä¼˜åŒ–è‡³ $O(1)$ã€‚\n\n#### æ–¹æ³•äºŒï¼šè´ªå¿ƒ\n\nç”±äºè‚¡ç¥¨çš„è´­ä¹°æ²¡æœ‰é™åˆ¶ï¼Œå› æ­¤æ•´ä¸ªé—®é¢˜ç­‰ä»·äºå¯»æ‰¾ $x$ ä¸ª**ä¸ç›¸äº¤**çš„åŒºé—´ $(l_i,r_i]$ ä½¿å¾—å¦‚ä¸‹çš„ç­‰å¼æœ€å¤§åŒ–\n\n$$\n\\sum_{i=1}^{x} a[r_i]-a[l_i]\n$$\n\nå…¶ä¸­ $l_i$ è¡¨ç¤ºåœ¨ç¬¬ $l_i$ å¤©ä¹°å…¥ï¼Œ$r_i$ è¡¨ç¤ºåœ¨ç¬¬ $r_i$ å¤©å–å‡ºã€‚\n\nåŒæ—¶æˆ‘ä»¬æ³¨æ„åˆ°å¯¹äº $(l_i,r_i]$ è¿™ä¸€ä¸ªåŒºé—´è´¡çŒ®çš„ä»·å€¼ $a[r_i]-a[l_i]$ï¼Œå…¶å®ç­‰ä»·äº $(l_i,l_i+1],(l_i+1,l_i+2],\\ldots,(r_i-1,r_i]$ è¿™è‹¥å¹²ä¸ªåŒºé—´é•¿åº¦ä¸º $1$ çš„åŒºé—´çš„ä»·å€¼å’Œï¼Œå³ \n$$\na[r_i]-a[l_i]=(a[r_i]-a[r_i-1])+(a[r_i-1]-a[r_i-2])+\\ldots+(a[l_i+1]-a[l_i])\n$$\nå› æ­¤é—®é¢˜å¯ä»¥ç®€åŒ–ä¸ºæ‰¾ $x$ ä¸ªé•¿åº¦ä¸º $1$ çš„åŒºé—´ $(l_i,l_i+1]$ ä½¿å¾— $\\sum_{i=1}^{x} a[l_i+1]-a[l_i]$ ä»·å€¼æœ€å¤§åŒ–ã€‚\n\nè´ªå¿ƒçš„è§’åº¦è€ƒè™‘æˆ‘ä»¬æ¯æ¬¡é€‰æ‹©è´¡çŒ®å¤§äº $0$ çš„åŒºé—´å³èƒ½ä½¿å¾—ç­”æ¡ˆæœ€å¤§åŒ–ï¼Œå› æ­¤æœ€åç­”æ¡ˆä¸º\n$$\n\\textit{ans}=\\sum_{i=1}^{n-1}\\max\\{0,a[i]-a[i-1]\\}\n$$\nå…¶ä¸­ $n$ ä¸ºæ•°ç»„çš„é•¿åº¦ã€‚\n\néœ€è¦è¯´æ˜çš„æ˜¯ï¼Œè´ªå¿ƒç®—æ³•åªèƒ½ç”¨äºè®¡ç®—æœ€å¤§åˆ©æ¶¦ï¼Œ**è®¡ç®—çš„è¿‡ç¨‹å¹¶ä¸æ˜¯å®é™…çš„äº¤æ˜“è¿‡ç¨‹**ã€‚\n\nè€ƒè™‘é¢˜ç›®ä¸­çš„ä¾‹å­ $[1,2,3,4,5]$ï¼Œæ•°ç»„çš„é•¿åº¦ $n=5$ï¼Œç”±äºå¯¹æ‰€æœ‰çš„ $1 \\le i < n$ éƒ½æœ‰ $a[i]>a[i-1]$ï¼Œå› æ­¤ç­”æ¡ˆä¸º\n$$\n\\textit{ans}=\\sum_{i=1}^{n-1}a[i]-a[i-1]=4\n$$\nä½†æ˜¯å®é™…çš„äº¤æ˜“è¿‡ç¨‹å¹¶ä¸æ˜¯è¿›è¡Œ $4$ æ¬¡ä¹°å…¥å’Œ $4$ æ¬¡å–å‡ºï¼Œè€Œæ˜¯åœ¨ç¬¬ $1$ å¤©ä¹°å…¥ï¼Œç¬¬ $5$ å¤©å–å‡ºã€‚\n\n```C++ [sol2-C++]\nclass Solution {\npublic:\n    int maxProfit(vector<int>& prices) {   \n        int ans = 0;\n        int n = prices.size();\n        for (int i = 1; i < n; ++i) {\n            ans += max(0, prices[i] - prices[i - 1]);\n        }\n        return ans;\n    }\n};\n```\n\n```Java [sol2-Java]\nclass Solution {\n    public int maxProfit(int[] prices) {\n        int ans = 0;\n        int n = prices.length;\n        for (int i = 1; i < n; ++i) {\n            ans += Math.max(0, prices[i] - prices[i - 1]);\n        }\n        return ans;\n    }\n}\n```\n\n```JavaScript [sol2-JavaScript]\nvar maxProfit = function(prices) {\n    let ans = 0;\n    let n = prices.length;\n    for (let i = 1; i < n; ++i) {\n        ans += Math.max(0, prices[i] - prices[i - 1]);\n    }\n    return ans;\n};\n```\n\n```Golang [sol2-Golang]\nfunc maxProfit(prices []int) (ans int) {\n    for i := 1; i < len(prices); i++ {\n        ans += max(0, prices[i]-prices[i-1])\n    }\n    return\n}\n\nfunc max(a, b int) int {\n    if a > b {\n        return a\n    }\n    return b\n}\n```\n\n```C [sol2-C]\nint maxProfit(int* prices, int pricesSize) {\n    int ans = 0;\n    for (int i = 1; i < pricesSize; ++i) {\n        ans += fmax(0, prices[i] - prices[i - 1]);\n    }\n    return ans;\n}\n```\n\n**å¤æ‚åº¦åˆ†æ**\n\n- æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œå…¶ä¸­ $n$ ä¸ºæ•°ç»„çš„é•¿åº¦ã€‚æˆ‘ä»¬åªéœ€è¦éå†ä¸€æ¬¡æ•°ç»„å³å¯ã€‚\n\n- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ã€‚åªéœ€è¦å¸¸æ•°ç©ºé—´å­˜æ”¾è‹¥å¹²å˜é‡ã€‚",
      "createdAt": "2020-11-07T14:36:55.490344+00:00",
      "hitCount": 161807,
      "identifier": "poDKoj",
      "isEditorsPick": false,
      "isMostPopular": false,
      "isMyFavorite": false,
      "next": {
        "__typename": "BriefSolutionNode",
        "slug": "tan-xin-suan-fa-by-liweiwei1419-2",
        "title": "æš´åŠ›æœç´¢ã€è´ªå¿ƒç®—æ³•ã€åŠ¨æ€è§„åˆ’ï¼ˆJavaï¼‰"
      },
      "position": 1,
      "prev": null,
      "question": {
        "__typename": "QuestionNode",
        "questionTitleSlug": "best-time-to-buy-and-sell-stock-ii"
      },
      "reactionType": null,
      "reactionsV2": [
        {
          "__typename": "ReactionCountNode",
          "count": 180,
          "reactionType": "UPVOTE"
        },
        {
          "__typename": "ReactionCountNode",
          "count": 12,
          "reactionType": "AWESOME"
        },
        {
          "__typename": "ReactionCountNode",
          "count": 4,
          "reactionType": "CONFUSED"
        },
        {
          "__typename": "ReactionCountNode",
          "count": 1,
          "reactionType": "THUMBS_DOWN"
        }
      ],
      "rewardEnabled": null,
      "slug": "mai-mai-gu-piao-de-zui-jia-shi-ji-ii-by-leetcode-s",
      "status": "PREPUBLISH",
      "summary": "ğŸ“º è§†é¢‘é¢˜è§£ ğŸ“– æ–‡å­—é¢˜è§£ æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’ è€ƒè™‘åˆ°ã€Œä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ã€ï¼Œå› æ­¤æ¯å¤©äº¤æ˜“ç»“æŸååªå¯èƒ½å­˜åœ¨æ‰‹é‡Œæœ‰ä¸€æ”¯è‚¡ç¥¨æˆ–è€…æ²¡æœ‰è‚¡ç¥¨çš„çŠ¶æ€ã€‚ å®šä¹‰çŠ¶æ€ $\\textit{dp}[i][0]$ è¡¨ç¤ºç¬¬ $i$ å¤©äº¤æ˜“å®Œåæ‰‹é‡Œæ²¡æœ‰è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦ï¼Œ$\\textit{dp}[i][1]$ è¡¨ç¤ºç¬¬ $i$ å¤©äº¤æ˜“å®Œåæ‰‹é‡ŒæŒæœ‰ä¸€æ”¯",
      "sunk": false,
      "tags": [
        {
          "__typename": "CommonTagNode",
          "name": "Dynamic Programming",
          "nameTranslated": "åŠ¨æ€è§„åˆ’",
          "slug": "dynamic-programming",
          "tagType": "TOPIC"
        },
        {
          "__typename": "CommonTagNode",
          "name": "C",
          "nameTranslated": "",
          "slug": "c",
          "tagType": "LANGUAGE"
        },
        {
          "__typename": "CommonTagNode",
          "name": "C++",
          "nameTranslated": "",
          "slug": "cpp",
          "tagType": "LANGUAGE"
        },
        {
          "__typename": "CommonTagNode",
          "name": "Go",
          "nameTranslated": "",
          "slug": "golang",
          "tagType": "LANGUAGE"
        },
        {
          "__typename": "CommonTagNode",
          "name": "Java",
          "nameTranslated": "",
          "slug": "java",
          "tagType": "LANGUAGE"
        },
        {
          "__typename": "CommonTagNode",
          "name": "JavaScript",
          "nameTranslated": "",
          "slug": "javascript",
          "tagType": "LANGUAGE"
        }
      ],
      "thumbnail": "",
      "title": "ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II",
      "topic": {
        "__typename": "TopicNode",
        "commentCount": 242,
        "id": 476791,
        "viewCount": 113113
      },
      "uuid": "poDKoj",
      "videosInfo": [
        {
          "__typename": "VideoInfoNode",
          "coverUrl": "https://video.leetcode-cn.com/image/cover/415449FEB7A2435DAF701CF79ADFAC0E-6-2.png",
          "duration": 195.008,
          "videoId": "f370da1a75d2433a989074885d42dc13"
        }
      ]
    }
  }
}
