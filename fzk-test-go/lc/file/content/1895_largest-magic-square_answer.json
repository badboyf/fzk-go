{
  "data": {
    "solutionArticle": {
      "__typename": "SolutionArticleNode",
      "author": {
        "__typename": "UserNode",
        "profile": {
          "__typename": "UserProfileNode",
          "realName": "åŠ›æ‰£å®˜æ–¹é¢˜è§£",
          "userAvatar": "https://assets.leetcode-cn.com/aliyun-lc-upload/users/leetcode-solution/avatar_1582018938.png",
          "userSlug": "leetcode-solution"
        },
        "username": "LeetCode-Solution"
      },
      "byLeetcode": true,
      "canEdit": false,
      "canEditReward": false,
      "canSee": true,
      "chargeType": "FREE",
      "content": "#### æ–¹æ³•ä¸€ï¼šæšä¸¾æ­£æ–¹å½¢ + å‰ç¼€å’Œä¼˜åŒ–\n\n**æ€è·¯ä¸ç®—æ³•**\n\næˆ‘ä»¬åªéœ€è¦æŒ‰ç…§ä»å¤§åˆ°å°çš„é¡ºåºæšä¸¾æ­£æ–¹å½¢çš„è¾¹é•¿ $\\textit{edge}$ï¼Œå†æšä¸¾ç»™å®šçš„çŸ©é˜µ $\\textit{grid}$ ä¸­æ‰€æœ‰è¾¹é•¿ä¸º $\\textit{edge}$ çš„æ­£æ–¹å½¢ï¼Œå¹¶ä¾æ¬¡åˆ¤æ–­å®ƒä»¬æ˜¯å¦æ»¡è¶³å¹»æ–¹çš„è¦æ±‚å³å¯ã€‚\n\nè¿™æ ·åšçš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘å‘¢ï¼Ÿæˆ‘ä»¬è®° $l = \\min(m, n)$ï¼Œé‚£ä¹ˆ $\\textit{edge}$ çš„èŒƒå›´ä¸º $[1, l]$ï¼Œè¾¹é•¿ä¸º $\\textit{edge}$ çš„æ­£æ–¹å½¢æœ‰ $(m-\\textit{edge}+1)(n-\\textit{edge}+1)=O(mn)$ ä¸ªï¼Œå¯¹äºæ¯ä¸ªæ­£æ–¹å½¢ï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®—å…¶æ¯ä¸€è¡Œã€åˆ—å’Œå¯¹è§’çº¿çš„å’Œï¼Œä¸€å…±æœ‰ $\\textit{edge}$ è¡Œ $\\textit{edge}$ åˆ—ä»¥åŠ $2$ æ¡å¯¹è§’çº¿ï¼Œé‚£ä¹ˆè®¡ç®—è¿™äº›å’Œçš„æ€»æ—¶é—´å¤æ‚åº¦ä¸º $((2 \\cdot \\textit{edge}+2) \\cdot \\textit{edge})=O(l^2)$ã€‚å°†æ‰€æœ‰é¡¹ç›¸ä¹˜ï¼Œæ€»æ—¶é—´å¤æ‚åº¦å³ä¸º $O(l^3 mn)$ã€‚\n\næˆ‘ä»¬æ— æ³• $100\\%$ ä¿è¯ $O(l^3 mn)$ çš„ç®—æ³•å¯ä»¥åœ¨è§„å®šæ—¶é—´å†…é€šè¿‡æ‰€æœ‰çš„æµ‹è¯•æ•°æ®ï¼šè™½ç„¶å®ƒçš„æ—¶é—´å¤æ‚åº¦çœ‹èµ·æ¥å¾ˆå¤§ï¼Œä½†æ˜¯å¸¸æ•°å®é™…ä¸Šå¾ˆå°ï¼Œå¦‚æœä»£ç å†™å¾—æ¯”è¾ƒä¼˜ç§€ï¼Œè¿˜æ˜¯æœ‰é€šè¿‡çš„æœºä¼šçš„ã€‚\n\nä½†åšä¸€äº›ä¸å¤æ‚çš„ä¼˜åŒ–ä¹Ÿæ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚ä¸€ä¸ªå¯è¡Œçš„ä¼˜åŒ–ç‚¹æ˜¯ï¼šæˆ‘ä»¬å¯ä»¥é¢„å¤„ç†å‡ºçŸ©é˜µ $\\textit{grid}$ æ¯ä¸€è¡Œä»¥åŠæ¯ä¸€åˆ—çš„å‰ç¼€å’Œï¼Œè¿™æ ·å¯¹äºè®¡ç®—å’Œçš„éƒ¨åˆ†ï¼š\n\n- æ¯ä¸€è¡Œåªéœ€è¦ $O(1)$ çš„æ—¶é—´å³å¯æ±‚å’Œï¼Œæ‰€æœ‰çš„ $\\textit{edge}$ è¡Œçš„æ€»æ—¶é—´å¤æ‚åº¦ä¸º $O(l)$ï¼›\n\n- æ¯ä¸€åˆ—åªéœ€è¦ $O(1)$ çš„æ—¶é—´å³å¯æ±‚å’Œï¼Œæ‰€æœ‰çš„ $\\textit{edge}$ åˆ—çš„æ€»æ—¶é—´å¤æ‚åº¦ä¸º $O(l)$ï¼›\n\n- æˆ‘ä»¬æ²¡æœ‰é¢„å¤„ç†å¯¹è§’çº¿çš„å‰ç¼€å’Œï¼Œè¿™æ˜¯å› ä¸ºå¯¹è§’çº¿åªæœ‰ $2$ æ¡ï¼Œå³ä½¿æˆ‘ä»¬ç›´æ¥è®¡ç®—æ±‚å’Œï¼Œæ—¶é—´å¤æ‚åº¦ä¹Ÿä¸º $O(2 \\cdot l) = O(l)$ã€‚\n\nå› æ­¤ï¼Œæ±‚å’Œéƒ¨åˆ†çš„æ€»æ—¶é—´å¤æ‚åº¦ä» $O(l^2)$ é™ä½ä¸º $O(l)$ï¼Œæ€»æ—¶é—´å¤æ‚åº¦é™ä½ä¸º $O(l^2 mn)$ï¼Œå¯¹äºæœ¬é¢˜ $m, n \\leq 50$ çš„èŒƒå›´ï¼Œè¯¥æ—¶é—´å¤æ‚åº¦æ˜¯åˆç†çš„ã€‚\n\nå‰ç¼€å’Œçš„å…·ä½“å®ç°è¿‡ç¨‹å¯ä»¥å‚è€ƒä¸‹é¢çš„ä»£ç ã€‚\n\n**ä¼˜åŒ–**\n\næˆ‘ä»¬åªéœ€è¦åœ¨ $[2, l]$ çš„èŒƒå›´å†…ä»å¤§åˆ°å°éå† $\\textit{edge}$ å³å¯ï¼Œè¿™æ˜¯å› ä¸ºè¾¹é•¿ä¸º $1$ çš„æ­£æ–¹å½¢ä¸€å®šæ˜¯ä¸€ä¸ªå¹»æ–¹ã€‚\n\n**ä»£ç **\n\n```C++ [sol1-C++]\nclass Solution {\npublic:\n    int largestMagicSquare(vector<vector<int>>& grid) {\n        int m = grid.size(), n = grid[0].size();\n        // æ¯ä¸€è¡Œçš„å‰ç¼€å’Œ\n        vector<vector<int>> rowsum(m, vector<int>(n));\n        for (int i = 0; i < m; ++i) {\n            rowsum[i][0] = grid[i][0];\n            for (int j = 1; j < n; ++j) {\n                rowsum[i][j] = rowsum[i][j - 1] + grid[i][j];\n            }\n        }\n        // æ¯ä¸€åˆ—çš„å‰ç¼€å’Œ\n        vector<vector<int>> colsum(m, vector<int>(n));\n        for (int j = 0; j < n; ++j) {\n            colsum[0][j] = grid[0][j];\n            for (int i = 1; i < m; ++i) {\n                colsum[i][j] = colsum[i - 1][j] + grid[i][j];\n            }\n        }\n\n        // ä»å¤§åˆ°å°æšä¸¾è¾¹é•¿ edge\n        for (int edge = min(m, n); edge >= 2; --edge) {\n            // æšä¸¾æ­£æ–¹å½¢çš„å·¦ä¸Šè§’ä½ç½® (i,j)\n            for (int i = 0; i + edge <= m; ++i) {\n                for (int j = 0; j + edge <= n; ++j) {\n                    // è®¡ç®—æ¯ä¸€è¡Œã€åˆ—ã€å¯¹è§’çº¿çš„å€¼åº”è¯¥æ˜¯å¤šå°‘ï¼ˆä»¥ç¬¬ä¸€è¡Œä¸ºæ ·æœ¬ï¼‰\n                    int stdsum = rowsum[i][j + edge - 1] - (j ? rowsum[i][j - 1] : 0);\n                    bool check = true;\n                    // æšä¸¾æ¯ä¸€è¡Œå¹¶ç”¨å‰ç¼€å’Œç›´æ¥æ±‚å’Œ\n                    // ç”±äºæˆ‘ä»¬å·²ç»æ‹¿ç¬¬ä¸€è¡Œä½œä¸ºæ ·æœ¬äº†ï¼Œè¿™é‡Œå¯ä»¥è·³è¿‡ç¬¬ä¸€è¡Œ\n                    for (int ii = i + 1; ii < i + edge; ++ii) {\n                        if (rowsum[ii][j + edge - 1] - (j ? rowsum[ii][j - 1] : 0) != stdsum) {\n                            check = false;\n                            break;\n                        }\n                    }\n                    if (!check) {\n                        continue;\n                    }\n                    // æšä¸¾æ¯ä¸€åˆ—å¹¶ç”¨å‰ç¼€å’Œç›´æ¥æ±‚å’Œ\n                    for (int jj = j; jj < j + edge; ++jj) {\n                        if (colsum[i + edge - 1][jj] - (i ? colsum[i - 1][jj] : 0) != stdsum) {\n                            check = false;\n                            break;\n                        }\n                    }\n                    if (!check) {\n                        continue;\n                    }\n                    // d1 å’Œ d2 åˆ†åˆ«è¡¨ç¤ºä¸¤æ¡å¯¹è§’çº¿çš„å’Œ\n                    // è¿™é‡Œ d è¡¨ç¤º diagonal\n                    int d1 = 0, d2 = 0;\n                    // ä¸ä½¿ç”¨å‰ç¼€å’Œï¼Œç›´æ¥éå†æ±‚å’Œ\n                    for (int k = 0; k < edge; ++k) {\n                        d1 += grid[i + k][j + k];\n                        d2 += grid[i + k][j + edge - 1 - k];\n                    }\n                    if (d1 == stdsum && d2 == stdsum) {\n                        return edge;\n                    }\n                }\n            }\n        }\n\n        return 1;\n    }\n};\n```\n\n```Python [sol1-Python3]\nclass Solution:\n    def largestMagicSquare(self, grid: List[List[int]]) -> int:\n        m, n = len(grid), len(grid[0])\n        \n        # æ¯ä¸€è¡Œçš„å‰ç¼€å’Œ\n        rowsum = [[0] * n for _ in range(m)]\n        for i in range(m):\n            rowsum[i][0] = grid[i][0]\n            for j in range(1, n):\n                rowsum[i][j] = rowsum[i][j - 1] + grid[i][j]\n        \n        # æ¯ä¸€åˆ—çš„å‰ç¼€å’Œ\n        colsum = [[0] * n for _ in range(m)]\n        for j in range(n):\n            colsum[0][j] = grid[0][j]\n            for i in range(1, m):\n                colsum[i][j] = colsum[i - 1][j] + grid[i][j]\n\n        # ä»å¤§åˆ°å°æšä¸¾è¾¹é•¿ edge\n        for edge in range(min(m, n), 1, -1):\n            # æšä¸¾æ­£æ–¹å½¢çš„å·¦ä¸Šè§’ä½ç½® (i,j)\n            for i in range(m - edge + 1):\n                for j in range(n - edge + 1):\n                    # è®¡ç®—æ¯ä¸€è¡Œã€åˆ—ã€å¯¹è§’çº¿çš„å€¼åº”è¯¥æ˜¯å¤šå°‘ï¼ˆä»¥ç¬¬ä¸€è¡Œä¸ºæ ·æœ¬ï¼‰\n                    stdsum = rowsum[i][j + edge - 1] - (0 if j == 0 else rowsum[i][j - 1])\n                    check = True\n                    # æšä¸¾æ¯ä¸€è¡Œå¹¶ç”¨å‰ç¼€å’Œç›´æ¥æ±‚å’Œ\n                    # ç”±äºæˆ‘ä»¬å·²ç»æ‹¿ç¬¬ä¸€è¡Œä½œä¸ºæ ·æœ¬äº†ï¼Œè¿™é‡Œå¯ä»¥è·³è¿‡ç¬¬ä¸€è¡Œ\n                    for ii in range(i + 1, i + edge):\n                        if rowsum[ii][j + edge - 1] - (0 if j == 0 else rowsum[ii][j - 1]) != stdsum:\n                            check = False\n                            break\n                    if not check:\n                        continue\n                    \n                    # æšä¸¾æ¯ä¸€åˆ—å¹¶ç”¨å‰ç¼€å’Œç›´æ¥æ±‚å’Œ\n                    for jj in range(j, j + edge):\n                        if colsum[i + edge - 1][jj] - (0 if i == 0 else colsum[i - 1][jj]) != stdsum:\n                            check = False\n                            break\n                    if not check:\n                        continue\n                    \n                    # d1 å’Œ d2 åˆ†åˆ«è¡¨ç¤ºä¸¤æ¡å¯¹è§’çº¿çš„å’Œ\n                    # è¿™é‡Œ d è¡¨ç¤º diagonal\n                    d1 = d2 = 0\n                    # ä¸ä½¿ç”¨å‰ç¼€å’Œï¼Œç›´æ¥éå†æ±‚å’Œ\n                    for k in range(edge):\n                        d1 += grid[i + k][j + k]\n                        d2 += grid[i + k][j + edge - 1 - k]\n                    if d1 == stdsum and d2 == stdsum:\n                        return edge\n\n        return 1\n```\n\n**å¤æ‚åº¦åˆ†æ**\n\n- æ—¶é—´å¤æ‚åº¦ï¼š$O(mn\\min(m, n)^2)$ã€‚\n\n- ç©ºé—´å¤æ‚åº¦ï¼š$O(mn)$ï¼Œå³ä¸ºå­˜å‚¨å‰ç¼€å’Œéœ€è¦çš„ç©ºé—´ã€‚",
      "createdAt": "2021-06-12T16:36:49.987582+00:00",
      "hitCount": 2144,
      "identifier": "cwwilk",
      "isEditorsPick": false,
      "isMostPopular": false,
      "isMyFavorite": false,
      "next": {
        "__typename": "BriefSolutionNode",
        "slug": "doocskai-yuan-she-qu-qian-zhui-he-bu-yao-yk38",
        "title": "ğŸ˜„ã€Doocså¼€æºç¤¾åŒºã€‘å‰ç¼€å’Œï¼Œæ³¨æ„ä¸€ä¸‹è¾¹ç•Œï¼Œé—®é¢˜è¿åˆƒè€Œè§£ï¼"
      },
      "position": 1,
      "prev": null,
      "question": {
        "__typename": "QuestionNode",
        "questionTitleSlug": "largest-magic-square"
      },
      "reactionType": null,
      "reactionsV2": [
        {
          "__typename": "ReactionCountNode",
          "count": 3,
          "reactionType": "UPVOTE"
        },
        {
          "__typename": "ReactionCountNode",
          "count": 0,
          "reactionType": "AWESOME"
        }
      ],
      "rewardEnabled": null,
      "slug": "zui-da-de-huan-fang-by-leetcode-solution-p8a1",
      "status": "PUBLISHED",
      "summary": "æ–¹æ³•ä¸€ï¼šæšä¸¾æ­£æ–¹å½¢ + å‰ç¼€å’Œä¼˜åŒ– æ€è·¯ä¸ç®—æ³• æˆ‘ä»¬åªéœ€è¦æŒ‰ç…§ä»å¤§åˆ°å°çš„é¡ºåºæšä¸¾æ­£æ–¹å½¢çš„è¾¹é•¿ $\\textit{edge}$ï¼Œå†æšä¸¾ç»™å®šçš„çŸ©é˜µ $\\textit{grid}$ ä¸­æ‰€æœ‰è¾¹é•¿ä¸º $\\textit{edge}$ çš„æ­£æ–¹å½¢ï¼Œå¹¶ä¾æ¬¡åˆ¤æ–­å®ƒä»¬æ˜¯å¦æ»¡è¶³å¹»æ–¹çš„è¦æ±‚å³å¯ã€‚ è¿™æ ·åšçš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘å‘¢ï¼Ÿæˆ‘ä»¬è®° $l = \\",
      "sunk": false,
      "tags": [
        {
          "__typename": "CommonTagNode",
          "name": "Array",
          "nameTranslated": "æ•°ç»„",
          "slug": "array",
          "tagType": "TOPIC"
        },
        {
          "__typename": "CommonTagNode",
          "name": "C++",
          "nameTranslated": "",
          "slug": "cpp",
          "tagType": "LANGUAGE"
        },
        {
          "__typename": "CommonTagNode",
          "name": "Python",
          "nameTranslated": "",
          "slug": "python",
          "tagType": "LANGUAGE"
        }
      ],
      "thumbnail": "",
      "title": "æœ€å¤§çš„å¹»æ–¹",
      "topic": {
        "__typename": "TopicNode",
        "commentCount": 10,
        "id": 825471,
        "viewCount": 1592
      },
      "uuid": "cwwilk",
      "videosInfo": []
    }
  }
}
