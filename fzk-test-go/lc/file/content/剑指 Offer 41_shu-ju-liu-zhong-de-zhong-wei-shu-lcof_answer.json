{
  "data": {
    "solutionArticle": {
      "__typename": "SolutionArticleNode",
      "author": {
        "__typename": "UserNode",
        "profile": {
          "__typename": "UserProfileNode",
          "realName": "Krahets",
          "userAvatar": "https://assets.leetcode-cn.com/aliyun-lc-upload/users/jyd/avatar_1589712294.png",
          "userSlug": "jyd"
        },
        "username": "jyd"
      },
      "byLeetcode": false,
      "canEdit": false,
      "canEditReward": false,
      "canSee": true,
      "chargeType": "FREE",
      "content": "#### è§£é¢˜æ€è·¯ï¼š\r\n\r\n> ç»™å®šä¸€é•¿åº¦ä¸º $N$ çš„æ— åºæ•°ç»„ï¼Œå…¶ä¸­ä½æ•°çš„è®¡ç®—æ–¹æ³•ï¼šé¦–å…ˆå¯¹æ•°ç»„æ‰§è¡Œæ’åºï¼ˆä½¿ç”¨ $O(N \\log N)$ æ—¶é—´ï¼‰ï¼Œç„¶åè¿”å›ä¸­é—´å…ƒç´ å³å¯ï¼ˆä½¿ç”¨ $O(1)$ æ—¶é—´ï¼‰ã€‚\r\n\r\né’ˆå¯¹æœ¬é¢˜ï¼Œæ ¹æ®ä»¥ä¸Šæ€è·¯ï¼Œå¯ä»¥å°†æ•°æ®æµä¿å­˜åœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œå¹¶åœ¨æ·»åŠ å…ƒç´ æ—¶ **ä¿æŒæ•°ç»„æœ‰åº** ã€‚æ­¤æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(N)$ ï¼Œå…¶ä¸­åŒ…æ‹¬ï¼š æŸ¥æ‰¾å…ƒç´ æ’å…¥ä½ç½® $O(\\log N)$ ï¼ˆäºŒåˆ†æŸ¥æ‰¾ï¼‰ã€å‘æ•°ç»„æŸä½ç½®æ’å…¥å…ƒç´  $O(N)$ ï¼ˆæ’å…¥ä½ç½®ä¹‹åçš„å…ƒç´ éƒ½éœ€è¦å‘åç§»åŠ¨ä¸€ä½ï¼‰ã€‚ \r\n\r\n> å€ŸåŠ© **å †** å¯è¿›ä¸€æ­¥ä¼˜åŒ–æ—¶é—´å¤æ‚åº¦ã€‚\r\n\r\nå»ºç«‹ä¸€ä¸ª **å°é¡¶å †** $A$ å’Œ **å¤§é¡¶å †** $B$ ï¼Œå„ä¿å­˜åˆ—è¡¨çš„ä¸€åŠå…ƒç´ ï¼Œä¸”è§„å®šï¼š\r\n- $A$ ä¿å­˜ **è¾ƒå¤§** çš„ä¸€åŠï¼Œé•¿åº¦ä¸º $\\frac{N}{2}$ï¼ˆ $N$ ä¸ºå¶æ•°ï¼‰æˆ– $\\frac{N+1}{2}$ï¼ˆ $N$ ä¸ºå¥‡æ•°ï¼‰ï¼›\r\n- $B$ ä¿å­˜ **è¾ƒå°** çš„ä¸€åŠï¼Œé•¿åº¦ä¸º $\\frac{N}{2}$ï¼ˆ $N$ ä¸ºå¶æ•°ï¼‰æˆ– $\\frac{N-1}{2}$ï¼ˆ $N$ ä¸ºå¥‡æ•°ï¼‰ï¼›\r\n\r\néšåï¼Œä¸­ä½æ•°å¯ä»…æ ¹æ® $A, B$ çš„å †é¡¶å…ƒç´ è®¡ç®—å¾—åˆ°ã€‚\r\n\r\n![Picture1.png](https://pic.leetcode-cn.com/25837f1b195e56de20587a4ed97d9571463aa611789e768914638902add351f4-Picture1.png){:width=500}\r\n\r\n##### ç®—æ³•æµç¨‹ï¼š\r\n\r\n> è®¾å…ƒç´ æ€»æ•°ä¸º $N = m + n$ ï¼Œå…¶ä¸­ $m$ å’Œ $n$ åˆ†åˆ«ä¸º $A$ å’Œ $B$ ä¸­çš„å…ƒç´ ä¸ªæ•°ã€‚\r\n\r\n**`addNum(num)` å‡½æ•°ï¼š**\r\n\r\n1. å½“ $m = n$ï¼ˆå³ $N$ ä¸º **å¶æ•°**ï¼‰ï¼šéœ€å‘ $A$ æ·»åŠ ä¸€ä¸ªå…ƒç´ ã€‚å®ç°æ–¹æ³•ï¼šå°†æ–°å…ƒç´  $num$ æ’å…¥è‡³ $B$ ï¼Œå†å°† $B$ å †é¡¶å…ƒç´ æ’å…¥è‡³ $A$ ï¼›\r\n2. å½“ $m \\ne n$ï¼ˆå³ $N$ ä¸º **å¥‡æ•°**ï¼‰ï¼šéœ€å‘ $B$ æ·»åŠ ä¸€ä¸ªå…ƒç´ ã€‚å®ç°æ–¹æ³•ï¼šå°†æ–°å…ƒç´  $num$ æ’å…¥è‡³ $A$ ï¼Œå†å°† $A$ å †é¡¶å…ƒç´ æ’å…¥è‡³ $B$ ï¼›\r\n\r\n> å‡è®¾æ’å…¥æ•°å­— $num$ é‡åˆ°æƒ…å†µ `1.` ã€‚ç”±äº $num$ å¯èƒ½å±äº â€œè¾ƒå°çš„ä¸€åŠâ€ ï¼ˆå³å±äº $B$ ï¼‰ï¼Œå› æ­¤ä¸èƒ½å°† $nums$ ç›´æ¥æ’å…¥è‡³ $A$ ã€‚è€Œåº”å…ˆå°† $num$ æ’å…¥è‡³ $B$ ï¼Œå†å°† $B$ å †é¡¶å…ƒç´ æ’å…¥è‡³ $A$ ã€‚è¿™æ ·å°±å¯ä»¥å§‹ç»ˆä¿æŒ $A$ ä¿å­˜è¾ƒå¤§ä¸€åŠã€ $B$ ä¿å­˜è¾ƒå°ä¸€åŠã€‚\r\n\r\n**`findMedian()` å‡½æ•°ï¼š**\r\n\r\n1. å½“ $m = n$ï¼ˆ $N$ ä¸º **å¶æ•°**ï¼‰ï¼šåˆ™ä¸­ä½æ•°ä¸º $($ $A$ çš„å †é¡¶å…ƒç´  + $B$ çš„å †é¡¶å…ƒç´  $)/2$ã€‚\r\n2. å½“ $m \\ne n$ï¼ˆ $N$ ä¸º **å¥‡æ•°**ï¼‰ï¼šåˆ™ä¸­ä½æ•°ä¸º $A$ çš„å †é¡¶å…ƒç´ ã€‚\r\n\r\n<![Picture2.png](https://pic.leetcode-cn.com/5b4cb63f90f9c251db8618dff9b5069ecb0e645c391293fd94d0e7604ae15dca-Picture2.png),![Picture3.png](https://pic.leetcode-cn.com/d9715b3a6cae6d0f60813611625357e1c47c58a23f64741d7a60acb7c14855fc-Picture3.png),![Picture4.png](https://pic.leetcode-cn.com/2126c17a71dea7a623ebbaeed1ffbb1aad8bd6ab60e3e9a2d0e0d7dbf1724f98-Picture4.png),![Picture5.png](https://pic.leetcode-cn.com/c2adafcbbbdd55ac020d550bb5dd318213c64f618c934bd6d2f92ffc716fda92-Picture5.png),![Picture6.png](https://pic.leetcode-cn.com/f22e746386bc9a57aab0bd9c59eaa8272051d28287e88b9379844f7706c67749-Picture6.png),![Picture7.png](https://pic.leetcode-cn.com/c30881523513328ffca3284594c5c62053ca019191f1a18d4cb06ec9a508887c-Picture7.png),![Picture8.png](https://pic.leetcode-cn.com/0023c4dc2012a43233316442272d6157bc98337a711624e63a26ce9bcf4aba8a-Picture8.png),![Picture9.png](https://pic.leetcode-cn.com/ae8a595670ad9806718b33a2aec6696f2e66e05a638770c90bb87b182ace07b3-Picture9.png),![Picture10.png](https://pic.leetcode-cn.com/714ad718155f1ee69cf15977f9e6df76785b8a6d65b81437c68c6beee68d1b42-Picture10.png),![Picture11.png](https://pic.leetcode-cn.com/f5668310f0170aa83e4e9019ba7feab1d1863bea736b0ee902ae2f681468b932-Picture11.png),![Picture12.png](https://pic.leetcode-cn.com/c9b98c70ffefa63984b0edbf132f515e6bba6b4880c8b2a74525d0322ba612d8-Picture12.png),![Picture13.png](https://pic.leetcode-cn.com/1fc7ec5dbb0c03fff3a5460025c860249443ff6c65f433de515811b346c90f48-Picture13.png),![Picture14.png](https://pic.leetcode-cn.com/ce778733fa007e49236596b7c34a1f8567df4a72cd35bc87cee40fc7beb43488-Picture14.png)>\r\n\r\n##### å¤æ‚åº¦åˆ†æï¼š\r\n\r\n- **æ—¶é—´å¤æ‚åº¦ï¼š**\r\n  - **æŸ¥æ‰¾ä¸­ä½æ•° $O(1)$ ï¼š** è·å–å †é¡¶å…ƒç´ ä½¿ç”¨ $O(1)$ æ—¶é—´ï¼›\r\n  - **æ·»åŠ æ•°å­— $O(\\log N)$ ï¼š** å †çš„æ’å…¥å’Œå¼¹å‡ºæ“ä½œä½¿ç”¨ $O(\\log N)$ æ—¶é—´ã€‚  \r\n- **ç©ºé—´å¤æ‚åº¦ $O(N)$ ï¼š** å…¶ä¸­ $N$ ä¸ºæ•°æ®æµä¸­çš„å…ƒç´ æ•°é‡ï¼Œå°é¡¶å † $A$ å’Œå¤§é¡¶å † $B$ æœ€å¤šåŒæ—¶ä¿å­˜ $N$ ä¸ªå…ƒç´ ã€‚\r\n\r\n##### ä»£ç ï¼š\r\n\r\nPython ä¸­ heapq æ¨¡å—æ˜¯å°é¡¶å †ã€‚å®ç° **å¤§é¡¶å †** æ–¹æ³•ï¼š å°é¡¶å †çš„æ’å…¥å’Œå¼¹å‡ºæ“ä½œå‡å°†å…ƒç´  **å–å** å³å¯ã€‚\r\nJava ä½¿ç”¨ `PriorityQueue<>((x, y) -> (y - x))` å¯æ–¹ä¾¿å®ç°å¤§é¡¶å †ã€‚\r\n\r\n```Python []\r\nfrom heapq import *\r\n\r\nclass MedianFinder:\r\n    def __init__(self):\r\n        self.A = [] # å°é¡¶å †ï¼Œä¿å­˜è¾ƒå¤§çš„ä¸€åŠ\r\n        self.B = [] # å¤§é¡¶å †ï¼Œä¿å­˜è¾ƒå°çš„ä¸€åŠ\r\n\r\n    def addNum(self, num: int) -> None:\r\n        if len(self.A) != len(self.B):\r\n            heappush(self.A, num)\r\n            heappush(self.B, -heappop(self.A))\r\n        else:\r\n            heappush(self.B, -num)\r\n            heappush(self.A, -heappop(self.B))\r\n\r\n    def findMedian(self) -> float:\r\n        return self.A[0] if len(self.A) != len(self.B) else (self.A[0] - self.B[0]) / 2.0\r\n```\r\n\r\n```Java []\r\nclass MedianFinder {\r\n    Queue<Integer> A, B;\r\n    public MedianFinder() {\r\n        A = new PriorityQueue<>(); // å°é¡¶å †ï¼Œä¿å­˜è¾ƒå¤§çš„ä¸€åŠ\r\n        B = new PriorityQueue<>((x, y) -> (y - x)); // å¤§é¡¶å †ï¼Œä¿å­˜è¾ƒå°çš„ä¸€åŠ\r\n    }\r\n    public void addNum(int num) {\r\n        if(A.size() != B.size()) {\r\n            A.add(num);\r\n            B.add(A.poll());\r\n        } else {\r\n            B.add(num);\r\n            A.add(B.poll());\r\n        }\r\n    }\r\n    public double findMedian() {\r\n        return A.size() != B.size() ? A.peek() : (A.peek() + B.peek()) / 2.0;\r\n    }\r\n}\r\n```\r\n\r\n> Push item on the heap, then pop and return the smallest item from the heap. The combined action runs more efficiently than heappush() followed by a separate call to heappop().\r\n\r\næ ¹æ®ä»¥ä¸Šæ–‡æ¡£è¯´æ˜ï¼Œå¯å°† Python ä»£ç ä¼˜åŒ–ä¸ºï¼š\r\n\r\n```Python []\r\nfrom heapq import *\r\n\r\nclass MedianFinder:\r\n    def __init__(self):\r\n        self.A = [] # å°é¡¶å †ï¼Œä¿å­˜è¾ƒå¤§çš„ä¸€åŠ\r\n        self.B = [] # å¤§é¡¶å †ï¼Œä¿å­˜è¾ƒå°çš„ä¸€åŠ\r\n\r\n    def addNum(self, num: int) -> None:\r\n        if len(self.A) != len(self.B):\r\n            heappush(self.B, -heappushpop(self.A, num))\r\n        else:\r\n            heappush(self.A, -heappushpop(self.B, -num))\r\n\r\n    def findMedian(self) -> float:\r\n        return self.A[0] if len(self.A) != len(self.B) else (self.A[0] - self.B[0]) / 2.0\r\n```",
      "createdAt": "2020-04-30T16:37:18.211812+00:00",
      "hitCount": 82663,
      "identifier": "WrFDHK",
      "isEditorsPick": true,
      "isMostPopular": true,
      "isMyFavorite": false,
      "next": {
        "__typename": "BriefSolutionNode",
        "slug": "xiao-bai-cai-fen-xiang-shu-ju-liu-zhong-vnnm6",
        "title": "å°ç™½èœğŸ¥¬åˆ†äº«ï¼šæ•°æ®æµä¸­çš„ä¸­ä½æ•°"
      },
      "position": 1,
      "prev": null,
      "question": {
        "__typename": "QuestionNode",
        "questionTitleSlug": "shu-ju-liu-zhong-de-zhong-wei-shu-lcof"
      },
      "reactionType": null,
      "reactionsV2": [
        {
          "__typename": "ReactionCountNode",
          "count": 349,
          "reactionType": "UPVOTE"
        },
        {
          "__typename": "ReactionCountNode",
          "count": 27,
          "reactionType": "AWESOME"
        },
        {
          "__typename": "ReactionCountNode",
          "count": 2,
          "reactionType": "CONFUSED"
        }
      ],
      "rewardEnabled": null,
      "slug": "mian-shi-ti-41-shu-ju-liu-zhong-de-zhong-wei-shu-y",
      "status": "PUBLISHED",
      "summary": "è§£é¢˜æ€è·¯ï¼š\n\nç»™å®šä¸€é•¿åº¦ä¸º N çš„æ— åºæ•°ç»„ï¼Œå…¶ä¸­ä½æ•°çš„è®¡ç®—æ–¹æ³•ï¼šé¦–å…ˆå¯¹æ•°ç»„æ‰§è¡Œæ’åºï¼ˆä½¿ç”¨ O(N \\log N) æ—¶é—´ï¼‰ï¼Œç„¶åè¿”å›ä¸­é—´å…ƒç´ å³å¯ï¼ˆä½¿ç”¨ O(1) æ—¶é—´ï¼‰ã€‚\n\né’ˆå¯¹æœ¬é¢˜ï¼Œæ ¹æ®ä»¥ä¸Šæ€è·¯ï¼Œå¯ä»¥å°†æ•°æ®æµä¿å­˜åœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œå¹¶åœ¨æ·»åŠ å…ƒç´ æ—¶ ä¿æŒæ•°ç»„æœ‰åº ã€‚æ­¤æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(N) ï¼Œå…¶ä¸­åŒ…æ‹¬ï¼š æŸ¥æ‰¾å…ƒç´ æ’å…¥ä½",
      "sunk": false,
      "tags": [
        {
          "__typename": "CommonTagNode",
          "name": "Heap",
          "nameTranslated": "å †",
          "slug": "heap",
          "tagType": "TOPIC"
        },
        {
          "__typename": "CommonTagNode",
          "name": "Java",
          "nameTranslated": "",
          "slug": "java",
          "tagType": "LANGUAGE"
        },
        {
          "__typename": "CommonTagNode",
          "name": "Python",
          "nameTranslated": "",
          "slug": "python",
          "tagType": "LANGUAGE"
        },
        {
          "__typename": "CommonTagNode",
          "name": "Python3",
          "nameTranslated": "",
          "slug": "python3",
          "tagType": "LANGUAGE"
        },
        {
          "__typename": "CommonTagNode",
          "name": "ä¼˜å…ˆé˜Ÿåˆ—",
          "nameTranslated": "",
          "slug": "you-xian-dui-lie",
          "tagType": "ADDITIONAL_TOPIC"
        }
      ],
      "thumbnail": "https://pic.leetcode-cn.com/25837f1b195e56de20587a4ed97d9571463aa611789e768914638902add351f4-Picture1.png",
      "title": "é¢è¯•é¢˜41. æ•°æ®æµä¸­çš„ä¸­ä½æ•°ï¼ˆä¼˜å…ˆé˜Ÿåˆ— / å †ï¼Œæ¸…æ™°å›¾è§£ï¼‰",
      "topic": {
        "__typename": "TopicNode",
        "commentCount": 227,
        "id": 227309,
        "viewCount": 53891
      },
      "uuid": "WrFDHK",
      "videosInfo": []
    }
  }
}
