{
  "data": {
    "solutionArticle": {
      "__typename": "SolutionArticleNode",
      "author": {
        "__typename": "UserNode",
        "profile": {
          "__typename": "UserProfileNode",
          "realName": "åŠ›æ‰£å®˜æ–¹é¢˜è§£",
          "userAvatar": "https://assets.leetcode-cn.com/aliyun-lc-upload/users/leetcode-solution/avatar_1582018938.png",
          "userSlug": "leetcode-solution"
        },
        "username": "LeetCode-Solution"
      },
      "byLeetcode": true,
      "canEdit": false,
      "canEditReward": false,
      "canSee": true,
      "chargeType": "FREE",
      "content": "### ğŸ“ºè§†é¢‘é¢˜è§£  \n![32.æœ€é•¿æœ‰æ•ˆæ‹¬å·.mp4](0a7923be-03e4-4682-9851-1136a30387ae)\n\n### ğŸ“–æ–‡å­—é¢˜è§£\n#### æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’\n\n**æ€è·¯å’Œç®—æ³•**\n\næˆ‘ä»¬å®šä¹‰ $\\textit{dp}[i]$ è¡¨ç¤ºä»¥ä¸‹æ ‡ $i$ å­—ç¬¦ç»“å°¾çš„æœ€é•¿æœ‰æ•ˆæ‹¬å·çš„é•¿åº¦ã€‚æˆ‘ä»¬å°† $\\textit{dp}$ æ•°ç»„å…¨éƒ¨åˆå§‹åŒ–ä¸º $0$ ã€‚æ˜¾ç„¶æœ‰æ•ˆçš„å­ä¸²ä¸€å®šä»¥ $\\text{â€˜)â€™}$ ç»“å°¾ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥çŸ¥é“ä»¥ $\\text{â€˜(â€™}$ ç»“å°¾çš„å­ä¸²å¯¹åº”çš„ $\\textit{dp}$ å€¼å¿…å®šä¸º $0$ ï¼Œæˆ‘ä»¬åªéœ€è¦æ±‚è§£ $\\text{â€˜)â€™}$ åœ¨ $\\textit{dp}$ æ•°ç»„ä¸­å¯¹åº”ä½ç½®çš„å€¼ã€‚\n\næˆ‘ä»¬ä»å‰å¾€åéå†å­—ç¬¦ä¸²æ±‚è§£ $\\textit{dp}$ å€¼ï¼Œæˆ‘ä»¬æ¯ä¸¤ä¸ªå­—ç¬¦æ£€æŸ¥ä¸€æ¬¡ï¼š\n\n1. $s[i] = \\text{â€˜)â€™}$ ä¸” $s[i - 1] = \\text{â€˜(â€™}$ï¼Œä¹Ÿå°±æ˜¯å­—ç¬¦ä¸²å½¢å¦‚ $â€œâ€¦â€¦()â€$ï¼Œæˆ‘ä»¬å¯ä»¥æ¨å‡ºï¼š\n    $$\n    \\textit{dp}[i]=\\textit{dp}[i-2]+2\n    $$\n    æˆ‘ä»¬å¯ä»¥è¿›è¡Œè¿™æ ·çš„è½¬ç§»ï¼Œæ˜¯å› ä¸ºç»“æŸéƒ¨åˆ†çš„ \"()\" æ˜¯ä¸€ä¸ªæœ‰æ•ˆå­å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”å°†ä¹‹å‰æœ‰æ•ˆå­å­—ç¬¦ä¸²çš„é•¿åº¦å¢åŠ äº† $2$ ã€‚\n\n2. $s[i] = \\text{â€˜)â€™}$ ä¸” $s[i - 1] = \\text{â€˜)â€™}$ï¼Œä¹Ÿå°±æ˜¯å­—ç¬¦ä¸²å½¢å¦‚ $â€œâ€¦â€¦))â€$ï¼Œæˆ‘ä»¬å¯ä»¥æ¨å‡ºï¼š\n    å¦‚æœ $s[i - \\textit{dp}[i - 1] - 1] = \\text{â€˜(â€™}$ï¼Œé‚£ä¹ˆ\n    $$\n    \\textit{dp}[i]=\\textit{dp}[i-1]+\\textit{dp}[i-\\textit{dp}[i-1]-2]+2\n    $$\n\næˆ‘ä»¬è€ƒè™‘å¦‚æœå€’æ•°ç¬¬äºŒä¸ª $\\text{â€˜)â€™}$ æ˜¯ä¸€ä¸ªæœ‰æ•ˆå­å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†ï¼ˆè®°ä½œ $sub_s$ï¼‰ï¼Œå¯¹äºæœ€åä¸€ä¸ª $\\text{â€˜)â€™}$ ï¼Œå¦‚æœå®ƒæ˜¯ä¸€ä¸ªæ›´é•¿å­å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†ï¼Œé‚£ä¹ˆå®ƒä¸€å®šæœ‰ä¸€ä¸ªå¯¹åº”çš„ $\\text{â€˜(â€™}$ ï¼Œä¸”å®ƒçš„ä½ç½®åœ¨å€’æ•°ç¬¬äºŒä¸ª $\\text{â€˜)â€™}$ æ‰€åœ¨çš„æœ‰æ•ˆå­å­—ç¬¦ä¸²çš„å‰é¢ï¼ˆä¹Ÿå°±æ˜¯ $sub_s$ çš„å‰é¢ï¼‰ã€‚å› æ­¤ï¼Œå¦‚æœå­å­—ç¬¦ä¸² $sub_s$ çš„å‰é¢æ°å¥½æ˜¯ $\\text{â€˜(â€™}$ ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ç”¨ $2$ åŠ ä¸Š $sub_s$ çš„é•¿åº¦ï¼ˆ$\\textit{dp}[i-1]$ï¼‰å»æ›´æ–° $\\textit{dp}[i]$ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿä¼šæŠŠæœ‰æ•ˆå­ä¸² $â€œ(sub_s)â€$ ä¹‹å‰çš„æœ‰æ•ˆå­ä¸²çš„é•¿åº¦ä¹ŸåŠ ä¸Šï¼Œä¹Ÿå°±æ˜¯å†åŠ ä¸Š $\\textit{dp}[i-\\textit{dp}[i-1]-2]$ã€‚\n\næœ€åçš„ç­”æ¡ˆå³ä¸º $\\textit{dp}$ æ•°ç»„ä¸­çš„æœ€å¤§å€¼ã€‚\n\n<![fig1](https://assets.leetcode-cn.com/solution-static/32/p1.png),![fig2](https://assets.leetcode-cn.com/solution-static/32/p2.png),![fig3](https://assets.leetcode-cn.com/solution-static/32/p3.png),![fig4](https://assets.leetcode-cn.com/solution-static/32/p4.png),![fig5](https://assets.leetcode-cn.com/solution-static/32/p5.png),![fig6](https://assets.leetcode-cn.com/solution-static/32/p6.png),![fig7](https://assets.leetcode-cn.com/solution-static/32/p7.png),![fig8](https://assets.leetcode-cn.com/solution-static/32/p8.png)>\n\n\n```Java [sol1-Java]\nclass Solution {\n    public int longestValidParentheses(String s) {\n        int maxans = 0;\n        int[] dp = new int[s.length()];\n        for (int i = 1; i < s.length(); i++) {\n            if (s.charAt(i) == ')') {\n                if (s.charAt(i - 1) == '(') {\n                    dp[i] = (i >= 2 ? dp[i - 2] : 0) + 2;\n                } else if (i - dp[i - 1] > 0 && s.charAt(i - dp[i - 1] - 1) == '(') {\n                    dp[i] = dp[i - 1] + ((i - dp[i - 1]) >= 2 ? dp[i - dp[i - 1] - 2] : 0) + 2;\n                }\n                maxans = Math.max(maxans, dp[i]);\n            }\n        }\n        return maxans;\n    }\n}\n```\n\n```C++ [sol1-C++]\nclass Solution {\npublic:\n    int longestValidParentheses(string s) {\n        int maxans = 0, n = s.length();\n        vector<int> dp(n, 0);\n        for (int i = 1; i < n; i++) {\n            if (s[i] == ')') {\n                if (s[i - 1] == '(') {\n                    dp[i] = (i >= 2 ? dp[i - 2] : 0) + 2;\n                } else if (i - dp[i - 1] > 0 && s[i - dp[i - 1] - 1] == '(') {\n                    dp[i] = dp[i - 1] + ((i - dp[i - 1]) >= 2 ? dp[i - dp[i - 1] - 2] : 0) + 2;\n                }\n                maxans = max(maxans, dp[i]);\n            }\n        }\n        return maxans;\n    }\n};\n```\n\n```C [sol1-C]\nint longestValidParentheses(char* s) {\n    int maxans = 0, n = strlen(s);\n    if (n == 0) return 0;\n    int dp[n];\n    memset(dp, 0, sizeof(dp));\n    for (int i = 1; i < n; i++) {\n        if (s[i] == ')') {\n            if (s[i - 1] == '(') {\n                dp[i] = (i >= 2 ? dp[i - 2] : 0) + 2;\n            } else if (i - dp[i - 1] > 0 && s[i - dp[i - 1] - 1] == '(') {\n                dp[i] = dp[i - 1] +\n                        ((i - dp[i - 1]) >= 2 ? dp[i - dp[i - 1] - 2] : 0) + 2;\n            }\n            maxans = fmax(maxans, dp[i]);\n        }\n    }\n    return maxans;\n}\n```\n\n```golang [sol1-Golang]\nfunc longestValidParentheses(s string) int {\n    maxAns := 0\n    dp := make([]int, len(s))\n    for i := 1; i < len(s); i++ {\n        if s[i] == ')' {\n            if s[i-1] == '(' {\n                if i >= 2 {\n                    dp[i] = dp[i - 2] + 2\n                } else {\n                    dp[i] = 2\n                }\n            } else if i - dp[i - 1] > 0 && s[i - dp[i - 1] - 1] == '(' {\n                if i - dp[i - 1] >= 2 {\n                    dp[i] = dp[i - 1] + dp[i - dp[i - 1] - 2] + 2\n                } else {\n                    dp[i] = dp[i - 1] + 2\n                }\n            }\n            maxAns = max(maxAns, dp[i])\n        }\n    }\n    return maxAns\n}\n\nfunc max(x, y int) int {\n    if x > y {\n        return x\n    }\n    return y\n}\n```\n\n**å¤æ‚åº¦åˆ†æ**\n\n* æ—¶é—´å¤æ‚åº¦ï¼š $O(n)$ï¼Œå…¶ä¸­ $n$ ä¸ºå­—ç¬¦ä¸²çš„é•¿åº¦ã€‚æˆ‘ä»¬åªéœ€éå†æ•´ä¸ªå­—ç¬¦ä¸²ä¸€æ¬¡ï¼Œå³å¯å°† $\\textit{dp}$ æ•°ç»„æ±‚å‡ºæ¥ã€‚\n\n* ç©ºé—´å¤æ‚åº¦ï¼š $O(n)$ã€‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¤§å°ä¸º $n$ çš„ $\\textit{dp}$ æ•°ç»„ã€‚\n\n#### æ–¹æ³•äºŒï¼šæ ˆ\n\n**æ€è·¯å’Œç®—æ³•**\n\næ’‡å¼€æ–¹æ³•ä¸€æåŠçš„åŠ¨æ€è§„åˆ’æ–¹æ³•ï¼Œç›¸ä¿¡å¤§å¤šæ•°äººå¯¹äºè¿™é¢˜çš„ç¬¬ä¸€ç›´è§‰æ˜¯æ‰¾åˆ°æ¯ä¸ªå¯èƒ½çš„å­ä¸²ååˆ¤æ–­å®ƒçš„æœ‰æ•ˆæ€§ï¼Œä½†è¿™æ ·çš„æ—¶é—´å¤æ‚åº¦ä¼šè¾¾åˆ° $O(n^3)$ï¼Œæ— æ³•é€šè¿‡æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ã€‚ä½†æ˜¯é€šè¿‡æ ˆï¼Œæˆ‘ä»¬å¯ä»¥åœ¨éå†ç»™å®šå­—ç¬¦ä¸²çš„è¿‡ç¨‹ä¸­å»åˆ¤æ–­åˆ°ç›®å‰ä¸ºæ­¢æ‰«æçš„å­ä¸²çš„æœ‰æ•ˆæ€§ï¼ŒåŒæ—¶èƒ½å¾—åˆ°æœ€é•¿æœ‰æ•ˆæ‹¬å·çš„é•¿åº¦ã€‚\n\nå…·ä½“åšæ³•æ˜¯æˆ‘ä»¬å§‹ç»ˆä¿æŒæ ˆåº•å…ƒç´ ä¸ºå½“å‰å·²ç»éå†è¿‡çš„å…ƒç´ ä¸­ã€Œæœ€åä¸€ä¸ªæ²¡æœ‰è¢«åŒ¹é…çš„å³æ‹¬å·çš„ä¸‹æ ‡ã€ï¼Œè¿™æ ·çš„åšæ³•ä¸»è¦æ˜¯è€ƒè™‘äº†è¾¹ç•Œæ¡ä»¶çš„å¤„ç†ï¼Œæ ˆé‡Œå…¶ä»–å…ƒç´ ç»´æŠ¤å·¦æ‹¬å·çš„ä¸‹æ ‡ï¼š\n\n- å¯¹äºé‡åˆ°çš„æ¯ä¸ª $\\text{â€˜(â€™}$ ï¼Œæˆ‘ä»¬å°†å®ƒçš„ä¸‹æ ‡æ”¾å…¥æ ˆä¸­\n- å¯¹äºé‡åˆ°çš„æ¯ä¸ª $\\text{â€˜)â€™}$ ï¼Œæˆ‘ä»¬å…ˆå¼¹å‡ºæ ˆé¡¶å…ƒç´ è¡¨ç¤ºåŒ¹é…äº†å½“å‰å³æ‹¬å·ï¼š\n  - å¦‚æœæ ˆä¸ºç©ºï¼Œè¯´æ˜å½“å‰çš„å³æ‹¬å·ä¸ºæ²¡æœ‰è¢«åŒ¹é…çš„å³æ‹¬å·ï¼Œæˆ‘ä»¬å°†å…¶ä¸‹æ ‡æ”¾å…¥æ ˆä¸­æ¥æ›´æ–°æˆ‘ä»¬ä¹‹å‰æåˆ°çš„ã€Œæœ€åä¸€ä¸ªæ²¡æœ‰è¢«åŒ¹é…çš„å³æ‹¬å·çš„ä¸‹æ ‡ã€\n  - å¦‚æœæ ˆä¸ä¸ºç©ºï¼Œå½“å‰å³æ‹¬å·çš„ä¸‹æ ‡å‡å»æ ˆé¡¶å…ƒç´ å³ä¸ºã€Œä»¥è¯¥å³æ‹¬å·ä¸ºç»“å°¾çš„æœ€é•¿æœ‰æ•ˆæ‹¬å·çš„é•¿åº¦ã€\n\næˆ‘ä»¬ä»å‰å¾€åéå†å­—ç¬¦ä¸²å¹¶æ›´æ–°ç­”æ¡ˆå³å¯ã€‚\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä¸€å¼€å§‹æ ˆä¸ºç©ºï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦ä¸ºå·¦æ‹¬å·çš„æ—¶å€™æˆ‘ä»¬ä¼šå°†å…¶æ”¾å…¥æ ˆä¸­ï¼Œè¿™æ ·å°±ä¸æ»¡è¶³æåŠçš„ã€Œæœ€åä¸€ä¸ªæ²¡æœ‰è¢«åŒ¹é…çš„å³æ‹¬å·çš„ä¸‹æ ‡ã€ï¼Œä¸ºäº†ä¿æŒç»Ÿä¸€ï¼Œæˆ‘ä»¬åœ¨ä¸€å¼€å§‹çš„æ—¶å€™å¾€æ ˆä¸­æ”¾å…¥ä¸€ä¸ªå€¼ä¸º $-1$ çš„å…ƒç´ ã€‚\n\n<![ppt1](https://assets.leetcode-cn.com/solution-static/32/1.png),![ppt2](https://assets.leetcode-cn.com/solution-static/32/2.png),![ppt3](https://assets.leetcode-cn.com/solution-static/32/3.png),![ppt4](https://assets.leetcode-cn.com/solution-static/32/4.png),![ppt5](https://assets.leetcode-cn.com/solution-static/32/5.png),![ppt6](https://assets.leetcode-cn.com/solution-static/32/6.png),![ppt7](https://assets.leetcode-cn.com/solution-static/32/7.png),![ppt8](https://assets.leetcode-cn.com/solution-static/32/8.png),![ppt9](https://assets.leetcode-cn.com/solution-static/32/9.png),![ppt10](https://assets.leetcode-cn.com/solution-static/32/10.png),![ppt11](https://assets.leetcode-cn.com/solution-static/32/11.png)>\n\n\n```Java [sol2-Java]\nclass Solution {\n    public int longestValidParentheses(String s) {\n        int maxans = 0;\n        Deque<Integer> stack = new LinkedList<Integer>();\n        stack.push(-1);\n        for (int i = 0; i < s.length(); i++) {\n            if (s.charAt(i) == '(') {\n                stack.push(i);\n            } else {\n                stack.pop();\n                if (stack.isEmpty()) {\n                    stack.push(i);\n                } else {\n                    maxans = Math.max(maxans, i - stack.peek());\n                }\n            }\n        }\n        return maxans;\n    }\n}\n```\n\n```C++ [sol2-C++]\nclass Solution {\npublic:\n    int longestValidParentheses(string s) {\n        int maxans = 0;\n        stack<int> stk;\n        stk.push(-1);\n        for (int i = 0; i < s.length(); i++) {\n            if (s[i] == '(') {\n                stk.push(i);\n            } else {\n                stk.pop();\n                if (stk.empty()) {\n                    stk.push(i);\n                } else {\n                    maxans = max(maxans, i - stk.top());\n                }\n            }\n        }\n        return maxans;\n    }\n};\n```\n\n```C [sol2-C]\nint longestValidParentheses(char* s) {\n    int maxans = 0, n = strlen(s);\n    int stk[n + 1], top = -1;\n    stk[++top] = -1;\n    for (int i = 0; i < n; i++) {\n        if (s[i] == '(') {\n            stk[++top] = i;\n        } else {\n            --top;\n            if (top == -1) {\n                stk[++top] = i;\n            } else {\n                maxans = fmax(maxans, i - stk[top]);\n            }\n        }\n    }\n    return maxans;\n}\n```\n\n```golang [sol2-Golang]\nfunc longestValidParentheses(s string) int {\n    maxAns := 0\n    stack := []int{}\n    stack = append(stack, -1)\n    for i := 0; i < len(s); i++ {\n        if s[i] == '(' {\n            stack = append(stack, i)\n        } else {\n            stack = stack[:len(stack)-1]\n            if len(stack) == 0 {\n                stack = append(stack, i)\n            } else {\n                maxAns = max(maxAns, i - stack[len(stack)-1])\n            }\n        }\n    }\n    return maxAns\n}\n\nfunc max(x, y int) int {\n    if x > y {\n        return x\n    }\n    return y\n}\n```\n\n**å¤æ‚åº¦åˆ†æ**\n\n* æ—¶é—´å¤æ‚åº¦ï¼š $O(n)$ï¼Œ$n$ æ˜¯ç»™å®šå­—ç¬¦ä¸²çš„é•¿åº¦ã€‚æˆ‘ä»¬åªéœ€è¦éå†å­—ç¬¦ä¸²ä¸€æ¬¡å³å¯ã€‚\n\n* ç©ºé—´å¤æ‚åº¦ï¼š $O(n)$ã€‚æ ˆçš„å¤§å°åœ¨æœ€åæƒ…å†µä¸‹ä¼šè¾¾åˆ° $n$ï¼Œå› æ­¤ç©ºé—´å¤æ‚åº¦ä¸º $O(n)$ ã€‚\n\n#### æ–¹æ³•ä¸‰ï¼šä¸éœ€è¦é¢å¤–çš„ç©ºé—´\n\n**æ€è·¯å’Œç®—æ³•**\n\nåœ¨æ­¤æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬åˆ©ç”¨ä¸¤ä¸ªè®¡æ•°å™¨ $\\textit{left}$ å’Œ $\\textit{right}$ ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ä»å·¦åˆ°å³éå†å­—ç¬¦ä¸²ï¼Œå¯¹äºé‡åˆ°çš„æ¯ä¸ª $\\text{â€˜(â€™}$ï¼Œæˆ‘ä»¬å¢åŠ  $\\textit{left}$ è®¡æ•°å™¨ï¼Œå¯¹äºé‡åˆ°çš„æ¯ä¸ª $\\text{â€˜)â€™}$ ï¼Œæˆ‘ä»¬å¢åŠ  $\\textit{right}$ è®¡æ•°å™¨ã€‚æ¯å½“ $\\textit{left}$ è®¡æ•°å™¨ä¸ $\\textit{right}$ è®¡æ•°å™¨ç›¸ç­‰æ—¶ï¼Œæˆ‘ä»¬è®¡ç®—å½“å‰æœ‰æ•ˆå­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œå¹¶ä¸”è®°å½•ç›®å‰ä¸ºæ­¢æ‰¾åˆ°çš„æœ€é•¿å­å­—ç¬¦ä¸²ã€‚å½“ $\\textit{right}$ è®¡æ•°å™¨æ¯” $\\textit{left}$ è®¡æ•°å™¨å¤§æ—¶ï¼Œæˆ‘ä»¬å°† $\\textit{left}$ å’Œ $\\textit{right}$ è®¡æ•°å™¨åŒæ—¶å˜å› $0$ã€‚\n\nè¿™æ ·çš„åšæ³•è´ªå¿ƒåœ°è€ƒè™‘äº†ä»¥å½“å‰å­—ç¬¦ä¸‹æ ‡ç»“å°¾çš„æœ‰æ•ˆæ‹¬å·é•¿åº¦ï¼Œæ¯æ¬¡å½“å³æ‹¬å·æ•°é‡å¤šäºå·¦æ‹¬å·æ•°é‡çš„æ—¶å€™ä¹‹å‰çš„å­—ç¬¦æˆ‘ä»¬éƒ½æ‰”æ‰ä¸å†è€ƒè™‘ï¼Œé‡æ–°ä»ä¸‹ä¸€ä¸ªå­—ç¬¦å¼€å§‹è®¡ç®—ï¼Œä½†è¿™æ ·ä¼šæ¼æ‰ä¸€ç§æƒ…å†µï¼Œå°±æ˜¯éå†çš„æ—¶å€™å·¦æ‹¬å·çš„æ•°é‡å§‹ç»ˆå¤§äºå³æ‹¬å·çš„æ•°é‡ï¼Œå³ `(()` ï¼Œè¿™ç§æ—¶å€™æœ€é•¿æœ‰æ•ˆæ‹¬å·æ˜¯æ±‚ä¸å‡ºæ¥çš„ã€‚\n\nè§£å†³çš„æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦ä»å³å¾€å·¦éå†ç”¨ç±»ä¼¼çš„æ–¹æ³•è®¡ç®—å³å¯ï¼Œåªæ˜¯è¿™ä¸ªæ—¶å€™åˆ¤æ–­æ¡ä»¶åäº†è¿‡æ¥ï¼š\n\n- å½“ $\\textit{left}$ è®¡æ•°å™¨æ¯” $\\textit{right}$ è®¡æ•°å™¨å¤§æ—¶ï¼Œæˆ‘ä»¬å°† $\\textit{left}$ å’Œ $\\textit{right}$ è®¡æ•°å™¨åŒæ—¶å˜å› $0$ \n- å½“ $\\textit{left}$ è®¡æ•°å™¨ä¸ $\\textit{right}$ è®¡æ•°å™¨ç›¸ç­‰æ—¶ï¼Œæˆ‘ä»¬è®¡ç®—å½“å‰æœ‰æ•ˆå­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œå¹¶ä¸”è®°å½•ç›®å‰ä¸ºæ­¢æ‰¾åˆ°çš„æœ€é•¿å­å­—ç¬¦ä¸²\n\nè¿™æ ·æˆ‘ä»¬å°±èƒ½æ¶µç›–æ‰€æœ‰æƒ…å†µä»è€Œæ±‚è§£å‡ºç­”æ¡ˆã€‚\n\n<![f1](https://assets.leetcode-cn.com/solution-static/32/3_1.png),![f2](https://assets.leetcode-cn.com/solution-static/32/3_2.png),![f3](https://assets.leetcode-cn.com/solution-static/32/3_3.png),![f4](https://assets.leetcode-cn.com/solution-static/32/3_4.png),![f5](https://assets.leetcode-cn.com/solution-static/32/3_5.png),![f6](https://assets.leetcode-cn.com/solution-static/32/3_6.png),![f7](https://assets.leetcode-cn.com/solution-static/32/3_7.png),![f8](https://assets.leetcode-cn.com/solution-static/32/3_8.png),![f9](https://assets.leetcode-cn.com/solution-static/32/3_9.png),![f10](https://assets.leetcode-cn.com/solution-static/32/3_10.png),![f11](https://assets.leetcode-cn.com/solution-static/32/3_11.png),![f12](https://assets.leetcode-cn.com/solution-static/32/3_12.png),![f13](https://assets.leetcode-cn.com/solution-static/32/3_13.png),![f14](https://assets.leetcode-cn.com/solution-static/32/3_14.png),![f15](https://assets.leetcode-cn.com/solution-static/32/3_15.png),![f16](https://assets.leetcode-cn.com/solution-static/32/3_16.png),![f17](https://assets.leetcode-cn.com/solution-static/32/3_17.png)>\n\n```Java [sol3-Java]\nclass Solution {\n    public int longestValidParentheses(String s) {\n        int left = 0, right = 0, maxlength = 0;\n        for (int i = 0; i < s.length(); i++) {\n            if (s.charAt(i) == '(') {\n                left++;\n            } else {\n                right++;\n            }\n            if (left == right) {\n                maxlength = Math.max(maxlength, 2 * right);\n            } else if (right > left) {\n                left = right = 0;\n            }\n        }\n        left = right = 0;\n        for (int i = s.length() - 1; i >= 0; i--) {\n            if (s.charAt(i) == '(') {\n                left++;\n            } else {\n                right++;\n            }\n            if (left == right) {\n                maxlength = Math.max(maxlength, 2 * left);\n            } else if (left > right) {\n                left = right = 0;\n            }\n        }\n        return maxlength;\n    }\n}\n```\n\n```C++ [sol3-C++]\nclass Solution {\npublic:\n    int longestValidParentheses(string s) {\n        int left = 0, right = 0, maxlength = 0;\n        for (int i = 0; i < s.length(); i++) {\n            if (s[i] == '(') {\n                left++;\n            } else {\n                right++;\n            }\n            if (left == right) {\n                maxlength = max(maxlength, 2 * right);\n            } else if (right > left) {\n                left = right = 0;\n            }\n        }\n        left = right = 0;\n        for (int i = (int)s.length() - 1; i >= 0; i--) {\n            if (s[i] == '(') {\n                left++;\n            } else {\n                right++;\n            }\n            if (left == right) {\n                maxlength = max(maxlength, 2 * left);\n            } else if (left > right) {\n                left = right = 0;\n            }\n        }\n        return maxlength;\n    }\n};\n```\n\n```C [sol3-C]\nint longestValidParentheses(char* s) {\n    int n = strlen(s);\n    int left = 0, right = 0, maxlength = 0;\n    for (int i = 0; i < n; i++) {\n        if (s[i] == '(') {\n            left++;\n        } else {\n            right++;\n        }\n        if (left == right) {\n            maxlength = fmax(maxlength, 2 * right);\n        } else if (right > left) {\n            left = right = 0;\n        }\n    }\n    left = right = 0;\n    for (int i = n - 1; i >= 0; i--) {\n        if (s[i] == '(') {\n            left++;\n        } else {\n            right++;\n        }\n        if (left == right) {\n            maxlength = fmax(maxlength, 2 * left);\n        } else if (left > right) {\n            left = right = 0;\n        }\n    }\n    return maxlength;\n}\n```\n\n```golang [sol3-Golang]\nfunc longestValidParentheses(s string) int {\n    left, right, maxLength := 0, 0, 0\n    for i := 0; i < len(s); i++ {\n        if s[i] == '(' {\n            left++\n        } else {\n            right++\n        }\n        if left == right {\n            maxLength = max(maxLength, 2 * right)\n        } else if right > left {\n            left, right = 0, 0\n        }\n    }\n    left, right = 0, 0\n    for i := len(s) - 1; i >= 0; i-- {\n        if s[i] == '(' {\n            left++\n        } else {\n            right++\n        }\n        if left == right {\n            maxLength = max(maxLength, 2 * left)\n        } else if left > right {\n            left, right = 0, 0\n        }\n    }\n    return maxLength\n}\n\nfunc max(x, y int) int {\n    if x > y {\n        return x\n    }\n    return y\n}\n```\n\n**å¤æ‚åº¦åˆ†æ**\n\n* æ—¶é—´å¤æ‚åº¦ï¼š $O(n)$ï¼Œå…¶ä¸­ $n$ ä¸ºå­—ç¬¦ä¸²é•¿åº¦ã€‚æˆ‘ä»¬åªè¦æ­£åéå†ä¸¤è¾¹å­—ç¬¦ä¸²å³å¯ã€‚\n\n* ç©ºé—´å¤æ‚åº¦ï¼š $O(1)$ã€‚æˆ‘ä»¬åªéœ€è¦å¸¸æ•°ç©ºé—´å­˜æ”¾è‹¥å¹²å˜é‡ã€‚",
      "createdAt": "2020-07-03T15:34:20.707304+00:00",
      "hitCount": 191479,
      "identifier": "ReAJxp",
      "isEditorsPick": false,
      "isMostPopular": true,
      "isMyFavorite": false,
      "next": {
        "__typename": "BriefSolutionNode",
        "slug": "dong-tai-gui-hua-si-lu-xiang-jie-c-by-zhanganan042",
        "title": "åŠ¨æ€è§„åˆ’æ€è·¯è¯¦è§£ï¼ˆc++ï¼‰â€”â€”32.æœ€é•¿æœ‰æ•ˆæ‹¬å·"
      },
      "position": 1,
      "prev": null,
      "question": {
        "__typename": "QuestionNode",
        "questionTitleSlug": "longest-valid-parentheses"
      },
      "reactionType": null,
      "reactionsV2": [
        {
          "__typename": "ReactionCountNode",
          "count": 387,
          "reactionType": "UPVOTE"
        },
        {
          "__typename": "ReactionCountNode",
          "count": 41,
          "reactionType": "AWESOME"
        },
        {
          "__typename": "ReactionCountNode",
          "count": 15,
          "reactionType": "CONFUSED"
        },
        {
          "__typename": "ReactionCountNode",
          "count": 2,
          "reactionType": "THUMBS_DOWN"
        }
      ],
      "rewardEnabled": null,
      "slug": "zui-chang-you-xiao-gua-hao-by-leetcode-solution",
      "status": "PUBLISHED",
      "summary": "ğŸ“ºè§†é¢‘é¢˜è§£ ğŸ“–æ–‡å­—é¢˜è§£ æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’ æ€è·¯å’Œç®—æ³• æˆ‘ä»¬å®šä¹‰ $\\textit{dp}[i]$ è¡¨ç¤ºä»¥ä¸‹æ ‡ $i$ å­—ç¬¦ç»“å°¾çš„æœ€é•¿æœ‰æ•ˆæ‹¬å·çš„é•¿åº¦ã€‚æˆ‘ä»¬å°† $\\textit{dp}$ æ•°ç»„å…¨éƒ¨åˆå§‹åŒ–ä¸º $0$ ã€‚æ˜¾ç„¶æœ‰æ•ˆçš„å­ä¸²ä¸€å®šä»¥ $\\text{â€˜)â€™}$ ç»“å°¾ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥çŸ¥é“ä»¥ $\\text{â€˜(â€™}$ ç»“å°¾çš„å­",
      "sunk": false,
      "tags": [
        {
          "__typename": "CommonTagNode",
          "name": "Stack",
          "nameTranslated": "æ ˆ",
          "slug": "stack",
          "tagType": "TOPIC"
        },
        {
          "__typename": "CommonTagNode",
          "name": "String",
          "nameTranslated": "å­—ç¬¦ä¸²",
          "slug": "string",
          "tagType": "TOPIC"
        },
        {
          "__typename": "CommonTagNode",
          "name": "Dynamic Programming",
          "nameTranslated": "åŠ¨æ€è§„åˆ’",
          "slug": "dynamic-programming",
          "tagType": "TOPIC"
        },
        {
          "__typename": "CommonTagNode",
          "name": "C",
          "nameTranslated": "",
          "slug": "c",
          "tagType": "LANGUAGE"
        },
        {
          "__typename": "CommonTagNode",
          "name": "C++",
          "nameTranslated": "",
          "slug": "cpp",
          "tagType": "LANGUAGE"
        },
        {
          "__typename": "CommonTagNode",
          "name": "Go",
          "nameTranslated": "",
          "slug": "golang",
          "tagType": "LANGUAGE"
        },
        {
          "__typename": "CommonTagNode",
          "name": "Java",
          "nameTranslated": "",
          "slug": "java",
          "tagType": "LANGUAGE"
        }
      ],
      "thumbnail": "",
      "title": "æœ€é•¿æœ‰æ•ˆæ‹¬å·",
      "topic": {
        "__typename": "TopicNode",
        "commentCount": 240,
        "id": 314683,
        "viewCount": 112124
      },
      "uuid": "ReAJxp",
      "videosInfo": [
        {
          "__typename": "VideoInfoNode",
          "coverUrl": "https://video.leetcode-cn.com/image/cover/79732AF78F8446818CD59C7E0C6946C5-6-2.png",
          "duration": 1009.7493,
          "videoId": "9ab15fa78d344a33a80a72f8f6f4891d"
        }
      ]
    }
  }
}
