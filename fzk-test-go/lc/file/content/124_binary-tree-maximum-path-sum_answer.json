{
  "data": {
    "solutionArticle": {
      "__typename": "SolutionArticleNode",
      "author": {
        "__typename": "UserNode",
        "profile": {
          "__typename": "UserProfileNode",
          "realName": "åŠ›æ‰£å®˜æ–¹é¢˜è§£",
          "userAvatar": "https://assets.leetcode-cn.com/aliyun-lc-upload/users/leetcode-solution/avatar_1582018938.png",
          "userSlug": "leetcode-solution"
        },
        "username": "LeetCode-Solution"
      },
      "byLeetcode": true,
      "canEdit": false,
      "canEditReward": false,
      "canSee": true,
      "chargeType": "FREE",
      "content": "### ğŸ“º è§†é¢‘é¢˜è§£  \n![124. äºŒå‰æ ‘ä¸­çš„æœ€å¤§è·¯å¾„.mp4](0fc716bb-576b-482f-8ec4-a1659b427b4f)\n\n### ğŸ“– æ–‡å­—é¢˜è§£\n#### æ–¹æ³•ä¸€ï¼šé€’å½’\n\né¦–å…ˆï¼Œè€ƒè™‘å®ç°ä¸€ä¸ªç®€åŒ–çš„å‡½æ•° `maxGain(node)`ï¼Œè¯¥å‡½æ•°è®¡ç®—äºŒå‰æ ‘ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹çš„æœ€å¤§è´¡çŒ®å€¼ï¼Œå…·ä½“è€Œè¨€ï¼Œå°±æ˜¯åœ¨ä»¥è¯¥èŠ‚ç‚¹ä¸ºæ ¹èŠ‚ç‚¹çš„å­æ ‘ä¸­å¯»æ‰¾ä»¥è¯¥èŠ‚ç‚¹ä¸ºèµ·ç‚¹çš„ä¸€æ¡è·¯å¾„ï¼Œä½¿å¾—è¯¥è·¯å¾„ä¸Šçš„èŠ‚ç‚¹å€¼ä¹‹å’Œæœ€å¤§ã€‚\n\nå…·ä½“è€Œè¨€ï¼Œè¯¥å‡½æ•°çš„è®¡ç®—å¦‚ä¸‹ã€‚\n\n- ç©ºèŠ‚ç‚¹çš„æœ€å¤§è´¡çŒ®å€¼ç­‰äº $0$ã€‚\n\n- éç©ºèŠ‚ç‚¹çš„æœ€å¤§è´¡çŒ®å€¼ç­‰äºèŠ‚ç‚¹å€¼ä¸å…¶å­èŠ‚ç‚¹ä¸­çš„æœ€å¤§è´¡çŒ®å€¼ä¹‹å’Œï¼ˆå¯¹äºå¶èŠ‚ç‚¹è€Œè¨€ï¼Œæœ€å¤§è´¡çŒ®å€¼ç­‰äºèŠ‚ç‚¹å€¼ï¼‰ã€‚\n\nä¾‹å¦‚ï¼Œè€ƒè™‘å¦‚ä¸‹äºŒå‰æ ‘ã€‚\n\n```\n   -10\n   / \\\n  9  20\n    /  \\\n   15   7\n\n```\n\nå¶èŠ‚ç‚¹ $9$ã€$15$ã€$7$ çš„æœ€å¤§è´¡çŒ®å€¼åˆ†åˆ«ä¸º $9$ã€$15$ã€$7$ã€‚\n\nå¾—åˆ°å¶èŠ‚ç‚¹çš„æœ€å¤§è´¡çŒ®å€¼ä¹‹åï¼Œå†è®¡ç®—éå¶èŠ‚ç‚¹çš„æœ€å¤§è´¡çŒ®å€¼ã€‚èŠ‚ç‚¹ $20$ çš„æœ€å¤§è´¡çŒ®å€¼ç­‰äº $20+\\max(15,7)=35$ï¼ŒèŠ‚ç‚¹ $-10$ çš„æœ€å¤§è´¡çŒ®å€¼ç­‰äº $-10+\\max(9,35)=25$ã€‚\n\nä¸Šè¿°è®¡ç®—è¿‡ç¨‹æ˜¯é€’å½’çš„è¿‡ç¨‹ï¼Œå› æ­¤ï¼Œå¯¹æ ¹èŠ‚ç‚¹è°ƒç”¨å‡½æ•° `maxGain`ï¼Œå³å¯å¾—åˆ°æ¯ä¸ªèŠ‚ç‚¹çš„æœ€å¤§è´¡çŒ®å€¼ã€‚\n\næ ¹æ®å‡½æ•° `maxGain` å¾—åˆ°æ¯ä¸ªèŠ‚ç‚¹çš„æœ€å¤§è´¡çŒ®å€¼ä¹‹åï¼Œå¦‚ä½•å¾—åˆ°äºŒå‰æ ‘çš„æœ€å¤§è·¯å¾„å’Œï¼Ÿå¯¹äºäºŒå‰æ ‘ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¯¥èŠ‚ç‚¹çš„æœ€å¤§è·¯å¾„å’Œå–å†³äºè¯¥èŠ‚ç‚¹çš„å€¼ä¸è¯¥èŠ‚ç‚¹çš„å·¦å³å­èŠ‚ç‚¹çš„æœ€å¤§è´¡çŒ®å€¼ï¼Œå¦‚æœå­èŠ‚ç‚¹çš„æœ€å¤§è´¡çŒ®å€¼ä¸ºæ­£ï¼Œåˆ™è®¡å…¥è¯¥èŠ‚ç‚¹çš„æœ€å¤§è·¯å¾„å’Œï¼Œå¦åˆ™ä¸è®¡å…¥è¯¥èŠ‚ç‚¹çš„æœ€å¤§è·¯å¾„å’Œã€‚ç»´æŠ¤ä¸€ä¸ªå…¨å±€å˜é‡ `maxSum` å­˜å‚¨æœ€å¤§è·¯å¾„å’Œï¼Œåœ¨é€’å½’è¿‡ç¨‹ä¸­æ›´æ–° `maxSum` çš„å€¼ï¼Œæœ€åå¾—åˆ°çš„ `maxSum` çš„å€¼å³ä¸ºäºŒå‰æ ‘ä¸­çš„æœ€å¤§è·¯å¾„å’Œã€‚\n\n<![fig1](https://assets.leetcode-cn.com/solution-static/124/1.PNG),![fig2](https://assets.leetcode-cn.com/solution-static/124/2.PNG),![fig3](https://assets.leetcode-cn.com/solution-static/124/3.PNG),![fig4](https://assets.leetcode-cn.com/solution-static/124/4.PNG),![fig5](https://assets.leetcode-cn.com/solution-static/124/5.PNG),![fig6](https://assets.leetcode-cn.com/solution-static/124/6.PNG),![fig7](https://assets.leetcode-cn.com/solution-static/124/7.PNG)>\n\n```Java [sol1-Java]\nclass Solution {\n    int maxSum = Integer.MIN_VALUE;\n\n    public int maxPathSum(TreeNode root) {\n        maxGain(root);\n        return maxSum;\n    }\n\n    public int maxGain(TreeNode node) {\n        if (node == null) {\n            return 0;\n        }\n        \n        // é€’å½’è®¡ç®—å·¦å³å­èŠ‚ç‚¹çš„æœ€å¤§è´¡çŒ®å€¼\n        // åªæœ‰åœ¨æœ€å¤§è´¡çŒ®å€¼å¤§äº 0 æ—¶ï¼Œæ‰ä¼šé€‰å–å¯¹åº”å­èŠ‚ç‚¹\n        int leftGain = Math.max(maxGain(node.left), 0);\n        int rightGain = Math.max(maxGain(node.right), 0);\n\n        // èŠ‚ç‚¹çš„æœ€å¤§è·¯å¾„å’Œå–å†³äºè¯¥èŠ‚ç‚¹çš„å€¼ä¸è¯¥èŠ‚ç‚¹çš„å·¦å³å­èŠ‚ç‚¹çš„æœ€å¤§è´¡çŒ®å€¼\n        int priceNewpath = node.val + leftGain + rightGain;\n\n        // æ›´æ–°ç­”æ¡ˆ\n        maxSum = Math.max(maxSum, priceNewpath);\n\n        // è¿”å›èŠ‚ç‚¹çš„æœ€å¤§è´¡çŒ®å€¼\n        return node.val + Math.max(leftGain, rightGain);\n    }\n}\n```\n\n```Python [sol1-Python3]\nclass Solution:\n    def __init__(self):\n        self.maxSum = float(\"-inf\")\n\n    def maxPathSum(self, root: TreeNode) -> int:\n        def maxGain(node):\n            if not node:\n                return 0\n\n            # é€’å½’è®¡ç®—å·¦å³å­èŠ‚ç‚¹çš„æœ€å¤§è´¡çŒ®å€¼\n            # åªæœ‰åœ¨æœ€å¤§è´¡çŒ®å€¼å¤§äº 0 æ—¶ï¼Œæ‰ä¼šé€‰å–å¯¹åº”å­èŠ‚ç‚¹\n            leftGain = max(maxGain(node.left), 0)\n            rightGain = max(maxGain(node.right), 0)\n            \n            # èŠ‚ç‚¹çš„æœ€å¤§è·¯å¾„å’Œå–å†³äºè¯¥èŠ‚ç‚¹çš„å€¼ä¸è¯¥èŠ‚ç‚¹çš„å·¦å³å­èŠ‚ç‚¹çš„æœ€å¤§è´¡çŒ®å€¼\n            priceNewpath = node.val + leftGain + rightGain\n            \n            # æ›´æ–°ç­”æ¡ˆ\n            self.maxSum = max(self.maxSum, priceNewpath)\n        \n            # è¿”å›èŠ‚ç‚¹çš„æœ€å¤§è´¡çŒ®å€¼\n            return node.val + max(leftGain, rightGain)\n   \n        maxGain(root)\n        return self.maxSum\n```\n\n```C++ [sol1-C++]\nclass Solution {\nprivate:\n    int maxSum = INT_MIN;\n\npublic:\n    int maxGain(TreeNode* node) {\n        if (node == nullptr) {\n            return 0;\n        }\n        \n        // é€’å½’è®¡ç®—å·¦å³å­èŠ‚ç‚¹çš„æœ€å¤§è´¡çŒ®å€¼\n        // åªæœ‰åœ¨æœ€å¤§è´¡çŒ®å€¼å¤§äº 0 æ—¶ï¼Œæ‰ä¼šé€‰å–å¯¹åº”å­èŠ‚ç‚¹\n        int leftGain = max(maxGain(node->left), 0);\n        int rightGain = max(maxGain(node->right), 0);\n\n        // èŠ‚ç‚¹çš„æœ€å¤§è·¯å¾„å’Œå–å†³äºè¯¥èŠ‚ç‚¹çš„å€¼ä¸è¯¥èŠ‚ç‚¹çš„å·¦å³å­èŠ‚ç‚¹çš„æœ€å¤§è´¡çŒ®å€¼\n        int priceNewpath = node->val + leftGain + rightGain;\n\n        // æ›´æ–°ç­”æ¡ˆ\n        maxSum = max(maxSum, priceNewpath);\n\n        // è¿”å›èŠ‚ç‚¹çš„æœ€å¤§è´¡çŒ®å€¼\n        return node->val + max(leftGain, rightGain);\n    }\n\n    int maxPathSum(TreeNode* root) {\n        maxGain(root);\n        return maxSum;\n    }\n};\n```\n\n```golang [sol1-Golang]\nfunc maxPathSum(root *TreeNode) int {\n    maxSum := math.MinInt32\n    var maxGain func(*TreeNode) int\n    maxGain = func(node *TreeNode) int {\n        if node == nil {\n            return 0\n        }\n\n        // é€’å½’è®¡ç®—å·¦å³å­èŠ‚ç‚¹çš„æœ€å¤§è´¡çŒ®å€¼\n        // åªæœ‰åœ¨æœ€å¤§è´¡çŒ®å€¼å¤§äº 0 æ—¶ï¼Œæ‰ä¼šé€‰å–å¯¹åº”å­èŠ‚ç‚¹\n        leftGain := max(maxGain(node.Left), 0)\n        rightGain := max(maxGain(node.Right), 0)\n\n        // èŠ‚ç‚¹çš„æœ€å¤§è·¯å¾„å’Œå–å†³äºè¯¥èŠ‚ç‚¹çš„å€¼ä¸è¯¥èŠ‚ç‚¹çš„å·¦å³å­èŠ‚ç‚¹çš„æœ€å¤§è´¡çŒ®å€¼\n        priceNewPath := node.Val + leftGain + rightGain\n\n        // æ›´æ–°ç­”æ¡ˆ\n        maxSum = max(maxSum, priceNewPath)\n\n        // è¿”å›èŠ‚ç‚¹çš„æœ€å¤§è´¡çŒ®å€¼\n        return node.Val + max(leftGain, rightGain)\n    }\n    maxGain(root)\n    return maxSum\n}\n\nfunc max(x, y int) int {\n    if x > y {\n        return x\n    }\n    return y\n}\n```\n\n```csharp [sol1-C#]\npublic class Solution \n{\n    int maxSum = int.MinValue;\n\n    public int MaxPathSum(TreeNode root) \n    {\n        MaxGain(root);\n        return maxSum;\n    }\n    \n    int MaxGain(TreeNode node) \n    {\n        if (node == null) \n        {\n            return 0;\n        }\n        \n        // é€’å½’è®¡ç®—å·¦å³å­èŠ‚ç‚¹çš„æœ€å¤§è´¡çŒ®å€¼\n        // åªæœ‰åœ¨æœ€å¤§è´¡çŒ®å€¼å¤§äº 0 æ—¶ï¼Œæ‰ä¼šé€‰å–å¯¹åº”å­èŠ‚ç‚¹\n        int leftGain = Math.Max(MaxGain(node.left), 0);\n        int rightGain = Math.Max(MaxGain(node.right), 0);\n\n        // èŠ‚ç‚¹çš„æœ€å¤§è·¯å¾„å’Œå–å†³äºè¯¥èŠ‚ç‚¹çš„å€¼ä¸è¯¥èŠ‚ç‚¹çš„å·¦å³å­èŠ‚ç‚¹çš„æœ€å¤§è´¡çŒ®å€¼\n        int priceNewpath = node.val + leftGain + rightGain;\n\n        // æ›´æ–°ç­”æ¡ˆ\n        maxSum = Math.Max(maxSum, priceNewpath);\n\n        // è¿”å›èŠ‚ç‚¹çš„æœ€å¤§è´¡çŒ®å€¼\n        return node.val + Math.Max(leftGain, rightGain);\n    }\n}\n```\n\n**å¤æ‚åº¦åˆ†æ**\n\n* æ—¶é—´å¤æ‚åº¦ï¼š$O(N)$ï¼Œå…¶ä¸­ $N$ æ˜¯äºŒå‰æ ‘ä¸­çš„èŠ‚ç‚¹ä¸ªæ•°ã€‚å¯¹æ¯ä¸ªèŠ‚ç‚¹è®¿é—®ä¸è¶…è¿‡ $2$ æ¬¡ã€‚\n\n* ç©ºé—´å¤æ‚åº¦ï¼š$O(N)$ï¼Œå…¶ä¸­ $N$ æ˜¯äºŒå‰æ ‘ä¸­çš„èŠ‚ç‚¹ä¸ªæ•°ã€‚ç©ºé—´å¤æ‚åº¦ä¸»è¦å–å†³äºé€’å½’è°ƒç”¨å±‚æ•°ï¼Œæœ€å¤§å±‚æ•°ç­‰äºäºŒå‰æ ‘çš„é«˜åº¦ï¼Œæœ€åæƒ…å†µä¸‹ï¼ŒäºŒå‰æ ‘çš„é«˜åº¦ç­‰äºäºŒå‰æ ‘ä¸­çš„èŠ‚ç‚¹ä¸ªæ•°ã€‚",
      "createdAt": "2020-06-20T13:47:08.989009+00:00",
      "hitCount": 145301,
      "identifier": "zXzD0y",
      "isEditorsPick": false,
      "isMostPopular": false,
      "isMyFavorite": false,
      "next": {
        "__typename": "BriefSolutionNode",
        "slug": "er-cha-shu-zhong-de-zui-da-lu-jing-he-by-ikaruga",
        "title": "ã€äºŒå‰æ ‘ä¸­çš„æœ€å¤§è·¯å¾„å’Œã€‘é€’å½’ï¼Œæ¡ç†æ¸…æ™°"
      },
      "position": 1,
      "prev": null,
      "question": {
        "__typename": "QuestionNode",
        "questionTitleSlug": "binary-tree-maximum-path-sum"
      },
      "reactionType": null,
      "reactionsV2": [
        {
          "__typename": "ReactionCountNode",
          "count": 157,
          "reactionType": "UPVOTE"
        },
        {
          "__typename": "ReactionCountNode",
          "count": 21,
          "reactionType": "CONFUSED"
        },
        {
          "__typename": "ReactionCountNode",
          "count": 10,
          "reactionType": "AWESOME"
        },
        {
          "__typename": "ReactionCountNode",
          "count": 4,
          "reactionType": "THUMBS_DOWN"
        }
      ],
      "rewardEnabled": null,
      "slug": "er-cha-shu-zhong-de-zui-da-lu-jing-he-by-leetcode-",
      "status": "PUBLISHED",
      "summary": "ğŸ“º è§†é¢‘é¢˜è§£ ğŸ“– æ–‡å­—é¢˜è§£ æ–¹æ³•ä¸€ï¼šé€’å½’ é¦–å…ˆï¼Œè€ƒè™‘å®ç°ä¸€ä¸ªç®€åŒ–çš„å‡½æ•° maxGain(node)ï¼Œè¯¥å‡½æ•°è®¡ç®—äºŒå‰æ ‘ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹çš„æœ€å¤§è´¡çŒ®å€¼ï¼Œå…·ä½“è€Œè¨€ï¼Œå°±æ˜¯åœ¨ä»¥è¯¥èŠ‚ç‚¹ä¸ºæ ¹èŠ‚ç‚¹çš„å­æ ‘ä¸­å¯»æ‰¾ä»¥è¯¥èŠ‚ç‚¹ä¸ºèµ·ç‚¹çš„ä¸€æ¡è·¯å¾„ï¼Œä½¿å¾—è¯¥è·¯å¾„ä¸Šçš„èŠ‚ç‚¹å€¼ä¹‹å’Œæœ€å¤§ã€‚ å…·ä½“è€Œè¨€ï¼Œè¯¥å‡½æ•°çš„è®¡ç®—å¦‚ä¸‹ã€‚ ç©ºèŠ‚ç‚¹çš„æœ€å¤§è´¡çŒ®å€¼ç­‰äº $0$ã€‚ éç©ºèŠ‚ç‚¹çš„æœ€",
      "sunk": false,
      "tags": [
        {
          "__typename": "CommonTagNode",
          "name": "Tree",
          "nameTranslated": "æ ‘",
          "slug": "tree",
          "tagType": "TOPIC"
        },
        {
          "__typename": "CommonTagNode",
          "name": "Depth-First Search",
          "nameTranslated": "æ·±åº¦ä¼˜å…ˆæœç´¢",
          "slug": "depth-first-search",
          "tagType": "TOPIC"
        },
        {
          "__typename": "CommonTagNode",
          "name": "C++",
          "nameTranslated": "",
          "slug": "cpp",
          "tagType": "LANGUAGE"
        },
        {
          "__typename": "CommonTagNode",
          "name": "C#",
          "nameTranslated": "",
          "slug": "csharp",
          "tagType": "LANGUAGE"
        },
        {
          "__typename": "CommonTagNode",
          "name": "Go",
          "nameTranslated": "",
          "slug": "golang",
          "tagType": "LANGUAGE"
        },
        {
          "__typename": "CommonTagNode",
          "name": "Java",
          "nameTranslated": "",
          "slug": "java",
          "tagType": "LANGUAGE"
        },
        {
          "__typename": "CommonTagNode",
          "name": "Python",
          "nameTranslated": "",
          "slug": "python",
          "tagType": "LANGUAGE"
        }
      ],
      "thumbnail": "",
      "title": "äºŒå‰æ ‘ä¸­çš„æœ€å¤§è·¯å¾„å’Œ",
      "topic": {
        "__typename": "TopicNode",
        "commentCount": 203,
        "id": 297005,
        "viewCount": 94577
      },
      "uuid": "zXzD0y",
      "videosInfo": [
        {
          "__typename": "VideoInfoNode",
          "coverUrl": "https://video.leetcode-cn.com/image/cover/7152A69756054C04B8D0B995C15BBAD9-6-2.png",
          "duration": 507.8827,
          "videoId": "a9cdc232f44c4b4d87bf2badb3d28b3c"
        }
      ]
    }
  }
}
