{
  "data": {
    "solutionArticle": {
      "__typename": "SolutionArticleNode",
      "author": {
        "__typename": "UserNode",
        "profile": {
          "__typename": "UserProfileNode",
          "realName": "åŠ›æ‰£å®˜æ–¹é¢˜è§£",
          "userAvatar": "https://assets.leetcode-cn.com/aliyun-lc-upload/users/leetcode-solution/avatar_1582018938.png",
          "userSlug": "leetcode-solution"
        },
        "username": "LeetCode-Solution"
      },
      "byLeetcode": true,
      "canEdit": false,
      "canEditReward": false,
      "canSee": true,
      "chargeType": "FREE",
      "content": "### ğŸ“º è§†é¢‘é¢˜è§£\n\n![202. å¿«ä¹æ•° - Lizzi.mp4](9d8ce931-e835-45d1-a3d2-ab54b52b5377)\n\n### ğŸ“– æ–‡å­—é¢˜è§£\n#### æ–¹æ³•ä¸€ï¼šç”¨å“ˆå¸Œé›†åˆæ£€æµ‹å¾ªç¯\n\næˆ‘ä»¬å¯ä»¥å…ˆä¸¾å‡ ä¸ªä¾‹å­ã€‚æˆ‘ä»¬ä» $7$ å¼€å§‹ã€‚åˆ™ä¸‹ä¸€ä¸ªæ•°å­—æ˜¯ $49$ï¼ˆå› ä¸º $7^2=49$ï¼‰ï¼Œç„¶åä¸‹ä¸€ä¸ªæ•°å­—æ˜¯ $97$ï¼ˆå› ä¸º $4^2+9^2=97$ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥ä¸æ–­é‡å¤è¯¥çš„è¿‡ç¨‹ï¼Œç›´åˆ°æˆ‘ä»¬å¾—åˆ° $1$ã€‚å› ä¸ºæˆ‘ä»¬å¾—åˆ°äº† $1$ï¼Œæˆ‘ä»¬çŸ¥é“ $7$ æ˜¯ä¸€ä¸ªå¿«ä¹æ•°ï¼Œå‡½æ•°åº”è¯¥è¿”å› `true`ã€‚\n\n![fig1](https://assets.leetcode-cn.com/solution-static/202/202_fig1.png)\n\nå†ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œè®©æˆ‘ä»¬ä» $116$ å¼€å§‹ã€‚é€šè¿‡åå¤é€šè¿‡å¹³æ–¹å’Œè®¡ç®—ä¸‹ä¸€ä¸ªæ•°å­—ï¼Œæˆ‘ä»¬æœ€ç»ˆå¾—åˆ° $58$ï¼Œå†ç»§ç»­è®¡ç®—ä¹‹åï¼Œæˆ‘ä»¬åˆå›åˆ° $58$ã€‚ç”±äºæˆ‘ä»¬å›åˆ°äº†ä¸€ä¸ªå·²ç»è®¡ç®—è¿‡çš„æ•°å­—ï¼Œå¯ä»¥çŸ¥é“æœ‰ä¸€ä¸ªå¾ªç¯ï¼Œå› æ­¤ä¸å¯èƒ½è¾¾åˆ° $1$ã€‚æ‰€ä»¥å¯¹äº $116$ï¼Œå‡½æ•°åº”è¯¥è¿”å› `false`ã€‚\n\n![fig2](https://assets.leetcode-cn.com/solution-static/202/202_fig2.png)\n\næ ¹æ®æˆ‘ä»¬çš„æ¢ç´¢ï¼Œæˆ‘ä»¬çŒœæµ‹ä¼šæœ‰ä»¥ä¸‹ä¸‰ç§å¯èƒ½ã€‚\n1. æœ€ç»ˆä¼šå¾—åˆ° $1$ã€‚\n2. æœ€ç»ˆä¼šè¿›å…¥å¾ªç¯ã€‚\n3. å€¼ä¼šè¶Šæ¥è¶Šå¤§ï¼Œæœ€åæ¥è¿‘æ— ç©·å¤§ã€‚\n\nç¬¬ä¸‰ä¸ªæƒ…å†µæ¯”è¾ƒéš¾ä»¥æ£€æµ‹å’Œå¤„ç†ã€‚æˆ‘ä»¬æ€ä¹ˆçŸ¥é“å®ƒä¼šç»§ç»­å˜å¤§ï¼Œè€Œä¸æ˜¯æœ€ç»ˆå¾—åˆ° $1$ å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä»”ç»†æƒ³ä¸€æƒ³ï¼Œæ¯ä¸€ä½æ•°çš„æœ€å¤§æ•°å­—çš„ä¸‹ä¸€ä½æ•°æ˜¯å¤šå°‘ã€‚\n\n| Digits        | Largest       | Next  |\n| ------------- |:-------------:| -----:|\n| 1             | 9             | 81    |\n| 2             | 99            | 162   |\n| 3             | 999           | 243   |\n| 4             | 9999          | 324   |\n| 13            | 9999999999999 | 1053  |\n\nå¯¹äº $3$ ä½æ•°çš„æ•°å­—ï¼Œå®ƒä¸å¯èƒ½å¤§äº $243$ã€‚è¿™æ„å‘³ç€å®ƒè¦ä¹ˆè¢«å›°åœ¨ $243$ ä»¥ä¸‹çš„å¾ªç¯å†…ï¼Œè¦ä¹ˆè·Œåˆ° $1$ã€‚$4$ ä½æˆ– $4$ ä½ä»¥ä¸Šçš„æ•°å­—åœ¨æ¯ä¸€æ­¥éƒ½ä¼šä¸¢å¤±ä¸€ä½ï¼Œç›´åˆ°é™åˆ° $3$ ä½ä¸ºæ­¢ã€‚æ‰€ä»¥æˆ‘ä»¬çŸ¥é“ï¼Œæœ€åçš„æƒ…å†µä¸‹ï¼Œç®—æ³•å¯èƒ½ä¼šåœ¨ $243$ ä»¥ä¸‹çš„æ‰€æœ‰æ•°å­—ä¸Šå¾ªç¯ï¼Œç„¶åå›åˆ°å®ƒå·²ç»åˆ°è¿‡çš„ä¸€ä¸ªå¾ªç¯æˆ–è€…å›åˆ° $1$ã€‚ä½†å®ƒä¸ä¼šæ— é™æœŸåœ°è¿›è¡Œä¸‹å»ï¼Œæ‰€ä»¥æˆ‘ä»¬æ’é™¤ç¬¬ä¸‰ç§é€‰æ‹©ã€‚\n\nå³ä½¿åœ¨ä»£ç ä¸­ä½ ä¸éœ€è¦å¤„ç†ç¬¬ä¸‰ç§æƒ…å†µï¼Œä½ ä»ç„¶éœ€è¦ç†è§£ä¸ºä»€ä¹ˆå®ƒæ°¸è¿œä¸ä¼šå‘ç”Ÿï¼Œè¿™æ ·ä½ å°±å¯ä»¥è¯æ˜ä¸ºä»€ä¹ˆä½ ä¸å¤„ç†å®ƒã€‚\n\n**ç®—æ³•**\n\nç®—æ³•åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œæˆ‘ä»¬éœ€è¦è®¾è®¡å’Œç¼–å†™ä»£ç ã€‚\n\n1. ç»™ä¸€ä¸ªæ•°å­— $n$ï¼Œå®ƒçš„ä¸‹ä¸€ä¸ªæ•°å­—æ˜¯ä»€ä¹ˆï¼Ÿ\n2. æŒ‰ç…§ä¸€ç³»åˆ—çš„æ•°å­—æ¥åˆ¤æ–­æˆ‘ä»¬æ˜¯å¦è¿›å…¥äº†ä¸€ä¸ªå¾ªç¯ã€‚\n\nç¬¬ 1 éƒ¨åˆ†æˆ‘ä»¬æŒ‰ç…§é¢˜ç›®çš„è¦æ±‚åšæ•°ä½åˆ†ç¦»ï¼Œæ±‚å¹³æ–¹å’Œã€‚\n\nç¬¬ 2 éƒ¨åˆ†å¯ä»¥ä½¿ç”¨å“ˆå¸Œé›†åˆå®Œæˆã€‚æ¯æ¬¡ç”Ÿæˆé“¾ä¸­çš„ä¸‹ä¸€ä¸ªæ•°å­—æ—¶ï¼Œæˆ‘ä»¬éƒ½ä¼šæ£€æŸ¥å®ƒæ˜¯å¦å·²ç»åœ¨å“ˆå¸Œé›†åˆä¸­ã€‚\n- å¦‚æœå®ƒä¸åœ¨å“ˆå¸Œé›†åˆä¸­ï¼Œæˆ‘ä»¬åº”è¯¥æ·»åŠ å®ƒã€‚\n- å¦‚æœå®ƒåœ¨å“ˆå¸Œé›†åˆä¸­ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¤„äºä¸€ä¸ªå¾ªç¯ä¸­ï¼Œå› æ­¤åº”è¯¥è¿”å› `false`ã€‚\n\næˆ‘ä»¬ä½¿ç”¨å“ˆå¸Œé›†åˆè€Œä¸æ˜¯å‘é‡ã€åˆ—è¡¨æˆ–æ•°ç»„çš„åŸå› æ˜¯å› ä¸ºæˆ‘ä»¬åå¤æ£€æŸ¥å…¶ä¸­æ˜¯å¦å­˜åœ¨æŸæ•°å­—ã€‚æ£€æŸ¥æ•°å­—æ˜¯å¦åœ¨å“ˆå¸Œé›†åˆä¸­éœ€è¦ $O(1)$ çš„æ—¶é—´ï¼Œè€Œå¯¹äºå…¶ä»–æ•°æ®ç»“æ„ï¼Œåˆ™éœ€è¦ $O(n)$ çš„æ—¶é—´ã€‚é€‰æ‹©æ­£ç¡®çš„æ•°æ®ç»“æ„æ˜¯è§£å†³è¿™äº›é—®é¢˜çš„å…³é”®éƒ¨åˆ†ã€‚\n\n```python [sol1-Python]\ndef isHappy(self, n: int) -> bool:\n\n    def get_next(n):\n        total_sum = 0\n        while n > 0:\n            n, digit = divmod(n, 10)\n            total_sum += digit ** 2\n        return total_sum\n\n    seen = set()\n    while n != 1 and n not in seen:\n        seen.add(n)\n        n = get_next(n)\n\n    return n == 1\n```\n\n```java [sol1-Java]\nclass Solution {\n    private int getNext(int n) {\n        int totalSum = 0;\n        while (n > 0) {\n            int d = n % 10;\n            n = n / 10;\n            totalSum += d * d;\n        }\n        return totalSum;\n    }\n\n    public boolean isHappy(int n) {\n        Set<Integer> seen = new HashSet<>();\n        while (n != 1 && !seen.contains(n)) {\n            seen.add(n);\n            n = getNext(n);\n        }\n        return n == 1;\n    }\n}\n```\n\n```csharp [sol1-C#]\nclass Solution {\n    private int getNext(int n) {\n        int totalSum = 0;\n        while (n > 0) {\n            int d = n % 10;\n            n = n / 10;\n            totalSum += d * d;\n        }\n        return totalSum;\n    }\n\n    public bool IsHappy(int n) {\n        HashSet <int> seen = new HashSet<int>();\n        while (n != 1 && !seen.Contains(n)) {\n            seen.Add(n);\n            n = getNext(n);\n        }\n        return n == 1;\n    }\n}\n```\n\n```golang [sol1-Golang]\nfunc isHappy(n int) bool {\n    m := map[int]bool{}\n    for ; n != 1 && !m[n]; n, m[n] = step(n), true { }\n    return n == 1\n}\n\nfunc step(n int) int {\n    sum := 0\n    for n > 0 {\n        sum += (n%10) * (n%10)\n        n = n/10\n    }\n    return sum\n}\n```\n\n**å¤æ‚åº¦åˆ†æ**\n\nç¡®å®šè¿™ä¸ªé—®é¢˜çš„æ—¶é—´å¤æ‚åº¦å¯¹äºä¸€ä¸ªã€Œç®€å•ã€çº§åˆ«çš„é—®é¢˜æ¥è¯´æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ã€‚å¦‚æœæ‚¨å¯¹è¿™äº›é—®é¢˜è¿˜ä¸ç†Ÿæ‚‰ï¼Œå¯ä»¥å°è¯•åªè®¡ç®— `getNext(n)` å‡½æ•°çš„æ—¶é—´å¤æ‚åº¦ã€‚\n\n* æ—¶é—´å¤æ‚åº¦ï¼š$O(243 \\cdot\t3 + \\log n + \\log\\log n + \\log\\log\\log n)...$ = $O(\\log n)$ã€‚\n\t*  æŸ¥æ‰¾ç»™å®šæ•°å­—çš„ä¸‹ä¸€ä¸ªå€¼çš„æˆæœ¬ä¸º $O(\\log n)$ï¼Œå› ä¸ºæˆ‘ä»¬æ­£åœ¨å¤„ç†æ•°å­—ä¸­çš„æ¯ä½æ•°å­—ï¼Œè€Œæ•°å­—ä¸­çš„ä½æ•°ç”± $\\log n$ ç»™å®šã€‚\n\t* è¦è®¡ç®—å‡ºæ€»çš„æ—¶é—´å¤æ‚åº¦ï¼Œæˆ‘ä»¬éœ€è¦ä»”ç»†è€ƒè™‘å¾ªç¯ä¸­æœ‰å¤šå°‘ä¸ªæ•°å­—ï¼Œå®ƒä»¬æœ‰å¤šå¤§ã€‚\n\t- æˆ‘ä»¬åœ¨ä¸Šé¢ç¡®å®šï¼Œä¸€æ—¦ä¸€ä¸ªæ•°å­—ä½äº $243$ï¼Œå®ƒå°±ä¸å¯èƒ½å›åˆ° $243$ ä»¥ä¸Šã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨ $243$ ä»¥ä¸‹æœ€é•¿å¾ªç¯çš„é•¿åº¦æ¥ä»£æ›¿ $243$ï¼Œä¸è¿‡ï¼Œå› ä¸ºå¸¸æ•°æ— è®ºå¦‚ä½•éƒ½æ— å…³ç´§è¦ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸ä¼šæ‹…å¿ƒå®ƒã€‚\n\t- å¯¹äºé«˜äº $243$ çš„ $n$ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘å¾ªç¯ä¸­æ¯ä¸ªæ•°é«˜äº $243$ çš„æˆæœ¬ã€‚é€šè¿‡æ•°å­¦è¿ç®—ï¼Œæˆ‘ä»¬å¯ä»¥è¯æ˜åœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œè¿™äº›æˆæœ¬å°†æ˜¯ $O(\\log n) + O(\\log \\log n) + O(\\log \\log \\log n)...$ã€‚å¹¸è¿çš„æ˜¯ï¼Œ$O(\\log n)$ æ˜¯å ä¸»å¯¼åœ°ä½çš„éƒ¨åˆ†ï¼Œè€Œå…¶ä»–éƒ¨åˆ†ç›¸æ¯”ä¹‹ä¸‹éƒ½å¾ˆå°ï¼ˆæ€»çš„æ¥è¯´ï¼Œå®ƒä»¬çš„æ€»å’Œå°äº$\\log n$ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¿½ç•¥å®ƒä»¬ã€‚\n* ç©ºé—´å¤æ‚åº¦ï¼š$O(\\log n)$ã€‚ä¸æ—¶é—´å¤æ‚åº¦å¯†åˆ‡ç›¸å…³çš„æ˜¯è¡¡é‡æˆ‘ä»¬æ”¾å…¥å“ˆå¸Œé›†åˆä¸­çš„æ•°å­—ä»¥åŠå®ƒä»¬æœ‰å¤šå¤§çš„æŒ‡æ ‡ã€‚å¯¹äºè¶³å¤Ÿå¤§çš„ $n$ï¼Œå¤§éƒ¨åˆ†ç©ºé—´å°†ç”± $n$ æœ¬èº«å ç”¨ã€‚æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°ä¼˜åŒ–åˆ° $O(243 \\cdot 3) = O(1)$ï¼Œæ–¹æ³•æ˜¯åªä¿å­˜é›†åˆä¸­å°äº $243$ çš„æ•°å­—ï¼Œå› ä¸ºå¯¹äºè¾ƒé«˜çš„æ•°å­—ï¼Œæ— è®ºå¦‚ä½•éƒ½ä¸å¯èƒ½è¿”å›åˆ°å®ƒä»¬ã€‚\n\n#### æ–¹æ³•äºŒï¼šå¿«æ…¢æŒ‡é’ˆæ³•\né€šè¿‡åå¤è°ƒç”¨ `getNext(n)` å¾—åˆ°çš„é“¾æ˜¯ä¸€ä¸ªéšå¼çš„é“¾è¡¨ã€‚éšå¼æ„å‘³ç€æˆ‘ä»¬æ²¡æœ‰å®é™…çš„é“¾è¡¨èŠ‚ç‚¹å’ŒæŒ‡é’ˆï¼Œä½†æ•°æ®ä»ç„¶å½¢æˆé“¾è¡¨ç»“æ„ã€‚èµ·å§‹æ•°å­—æ˜¯é“¾è¡¨çš„å¤´ â€œèŠ‚ç‚¹â€ï¼Œé“¾ä¸­çš„æ‰€æœ‰å…¶ä»–æ•°å­—éƒ½æ˜¯èŠ‚ç‚¹ã€‚`next` æŒ‡é’ˆæ˜¯é€šè¿‡è°ƒç”¨ `getNext(n)` å‡½æ•°è·å¾—ã€‚\n\næ„è¯†åˆ°æˆ‘ä»¬å®é™…æœ‰ä¸ªé“¾è¡¨ï¼Œé‚£ä¹ˆè¿™ä¸ªé—®é¢˜å°±å¯ä»¥è½¬æ¢ä¸ºæ£€æµ‹ä¸€ä¸ªé“¾è¡¨æ˜¯å¦æœ‰ç¯ã€‚å› æ­¤æˆ‘ä»¬åœ¨è¿™é‡Œå¯ä»¥ä½¿ç”¨å¼—æ´›ä¼Šå¾·å¾ªç¯æŸ¥æ‰¾ç®—æ³•ã€‚è¿™ä¸ªç®—æ³•æ˜¯ä¸¤ä¸ªå¥”è·‘é€‰æ‰‹ï¼Œä¸€ä¸ªè·‘çš„å¿«ï¼Œä¸€ä¸ªè·‘å¾—æ…¢ã€‚åœ¨é¾Ÿå…”èµ›è·‘çš„å¯“è¨€ä¸­ï¼Œè·‘çš„æ…¢çš„ç§°ä¸º â€œä¹Œé¾Ÿâ€ï¼Œè·‘å¾—å¿«çš„ç§°ä¸º â€œå…”å­â€ã€‚\n\nä¸ç®¡ä¹Œé¾Ÿå’Œå…”å­åœ¨å¾ªç¯ä¸­ä»å“ªé‡Œå¼€å§‹ï¼Œå®ƒä»¬æœ€ç»ˆéƒ½ä¼šç›¸é‡ã€‚è¿™æ˜¯å› ä¸ºå…”å­æ¯èµ°ä¸€æ­¥å°±å‘ä¹Œé¾Ÿé è¿‘ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆåœ¨å®ƒä»¬çš„ç§»åŠ¨æ–¹å‘ä¸Šï¼‰ã€‚\n\n<![fig1](https://assets.leetcode-cn.com/solution-static/202/1.jpg),![fig2](https://assets.leetcode-cn.com/solution-static/202/2.jpg),![fig3](https://assets.leetcode-cn.com/solution-static/202/3.jpg),![fig4](https://assets.leetcode-cn.com/solution-static/202/4.jpg),![fig5](https://assets.leetcode-cn.com/solution-static/202/5.jpg),![fig6](https://assets.leetcode-cn.com/solution-static/202/6.jpg),![fig7](https://assets.leetcode-cn.com/solution-static/202/7.jpg),![fig8](https://assets.leetcode-cn.com/solution-static/202/8.jpg)>\n\n**ç®—æ³•**\n\næˆ‘ä»¬ä¸æ˜¯åªè·Ÿè¸ªé“¾è¡¨ä¸­çš„ä¸€ä¸ªå€¼ï¼Œè€Œæ˜¯è·Ÿè¸ªä¸¤ä¸ªå€¼ï¼Œç§°ä¸ºå¿«è·‘è€…å’Œæ…¢è·‘è€…ã€‚åœ¨ç®—æ³•çš„æ¯ä¸€æ­¥ä¸­ï¼Œæ…¢é€Ÿåœ¨é“¾è¡¨ä¸­å‰è¿› 1 ä¸ªèŠ‚ç‚¹ï¼Œå¿«è·‘è€…å‰è¿› 2 ä¸ªèŠ‚ç‚¹ï¼ˆå¯¹ `getNext(n)` å‡½æ•°çš„åµŒå¥—è°ƒç”¨ï¼‰ã€‚\n\nå¦‚æœ `n` æ˜¯ä¸€ä¸ªå¿«ä¹æ•°ï¼Œå³æ²¡æœ‰å¾ªç¯ï¼Œé‚£ä¹ˆå¿«è·‘è€…æœ€ç»ˆä¼šæ¯”æ…¢è·‘è€…å…ˆåˆ°è¾¾æ•°å­— 1ã€‚\n\nå¦‚æœ `n` ä¸æ˜¯ä¸€ä¸ªå¿«ä¹çš„æ•°å­—ï¼Œé‚£ä¹ˆæœ€ç»ˆå¿«è·‘è€…å’Œæ…¢è·‘è€…å°†åœ¨åŒä¸€ä¸ªæ•°å­—ä¸Šç›¸é‡ã€‚\n\n```python [sol2-Python]\ndef isHappy(self, n: int) -> bool:  \n    def get_next(number):\n        total_sum = 0\n        while number > 0:\n            number, digit = divmod(number, 10)\n            total_sum += digit ** 2\n        return total_sum\n\n    slow_runner = n\n    fast_runner = get_next(n)\n    while fast_runner != 1 and slow_runner != fast_runner:\n        slow_runner = get_next(slow_runner)\n        fast_runner = get_next(get_next(fast_runner))\n    return fast_runner == 1\n```\n\n```java [sol2-Java]\nclass Solution {\n\n     public int getNext(int n) {\n        int totalSum = 0;\n        while (n > 0) {\n            int d = n % 10;\n            n = n / 10;\n            totalSum += d * d;\n        }\n        return totalSum;\n    }\n\n    public boolean isHappy(int n) {\n        int slowRunner = n;\n        int fastRunner = getNext(n);\n        while (fastRunner != 1 && slowRunner != fastRunner) {\n            slowRunner = getNext(slowRunner);\n            fastRunner = getNext(getNext(fastRunner));\n        }\n        return fastRunner == 1;\n    }\n}\n```\n\n```csharp [sol2-C#]\nclass Solution {\n    public int getNext(int n) {\n        int totalSum = 0;\n        while (n > 0) {\n            int d = n % 10;\n            n = n / 10;\n            totalSum += d * d;\n        }\n        return totalSum;\n    }\n\n    public bool IsHappy(int n) {\n        int slowRunner = n;\n        int fastRunner = getNext(n);\n        while (fastRunner != 1 && slowRunner != fastRunner) {\n            slowRunner = getNext(slowRunner);\n            fastRunner = getNext(getNext(fastRunner));\n        }\n        return fastRunner == 1;\n    }\n}\n```\n\n```golang [sol2-Golang]\nfunc isHappy(n int) bool {\n    slow, fast := n, step(n)\n    for fast != 1 && slow != fast {\n        slow = step(slow)\n        fast = step(step(fast))\n    }\n    return fast == 1\n}\n\nfunc step(n int) int {\n    sum := 0\n    for n > 0 {\n        sum += (n%10) * (n%10)\n        n = n/10\n    }\n    return sum\n}\n```\n\n**å¤æ‚åº¦åˆ†æ**\n\n* æ—¶é—´å¤æ‚åº¦ï¼š$O(\\log n)$ã€‚è¯¥åˆ†æå»ºç«‹åœ¨å¯¹å‰ä¸€ç§æ–¹æ³•çš„åˆ†æçš„åŸºç¡€ä¸Šï¼Œä½†æ˜¯è¿™æ¬¡æˆ‘ä»¬éœ€è¦è·Ÿè¸ªä¸¤ä¸ªæŒ‡é’ˆè€Œä¸æ˜¯ä¸€ä¸ªæŒ‡é’ˆæ¥åˆ†æï¼Œä»¥åŠåœ¨å®ƒä»¬ç›¸é‡å‰éœ€è¦ç»•ç€è¿™ä¸ªå¾ªç¯èµ°å¤šå°‘æ¬¡ã€‚\n\t* å¦‚æœæ²¡æœ‰å¾ªç¯ï¼Œé‚£ä¹ˆå¿«è·‘è€…å°†å…ˆåˆ°è¾¾ 1ï¼Œæ…¢è·‘è€…å°†åˆ°è¾¾é“¾è¡¨ä¸­çš„ä¸€åŠã€‚æˆ‘ä»¬çŸ¥é“æœ€åçš„æƒ…å†µä¸‹ï¼Œæˆæœ¬æ˜¯\t$O(2 \\cdot \\log n) = O(\\log n)$ã€‚\n\t* ä¸€æ—¦ä¸¤ä¸ªæŒ‡é’ˆéƒ½åœ¨å¾ªç¯ä¸­ï¼Œåœ¨æ¯ä¸ªå¾ªç¯ä¸­ï¼Œå¿«è·‘è€…å°†ç¦»æ…¢è·‘è€…æ›´è¿‘ä¸€æ­¥ã€‚ä¸€æ—¦å¿«è·‘è€…è½åæ…¢è·‘è€…ä¸€æ­¥ï¼Œä»–ä»¬å°±ä¼šåœ¨ä¸‹ä¸€æ­¥ç›¸é‡ã€‚å‡è®¾å¾ªç¯ä¸­æœ‰ $k$ ä¸ªæ•°å­—ã€‚å¦‚æœä»–ä»¬çš„èµ·ç‚¹æ˜¯ç›¸éš” $k-1$ çš„ä½ç½®ï¼ˆè¿™æ˜¯ä»–ä»¬å¯ä»¥å¼€å§‹çš„æœ€è¿œçš„è·ç¦»ï¼‰ï¼Œé‚£ä¹ˆå¿«è·‘è€…éœ€è¦ $k-1$ æ­¥æ‰èƒ½åˆ°è¾¾æ…¢è·‘è€…ï¼Œè¿™å¯¹äºæˆ‘ä»¬çš„ç›®çš„æ¥è¯´ä¹Ÿæ˜¯ä¸å˜çš„ã€‚å› æ­¤ï¼Œä¸»æ“ä½œä»ç„¶åœ¨è®¡ç®—èµ·å§‹ n çš„ä¸‹ä¸€ä¸ªå€¼ï¼Œå³ $O(\\log n)$ã€‚\n* ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ï¼Œå¯¹äºè¿™ç§æ–¹æ³•ï¼Œæˆ‘ä»¬ä¸éœ€è¦å“ˆå¸Œé›†æ¥æ£€æµ‹å¾ªç¯ã€‚æŒ‡é’ˆéœ€è¦å¸¸æ•°çš„é¢å¤–ç©ºé—´ã€‚\n\n\n#### æ–¹æ³•ä¸‰ï¼šæ•°å­¦\nå‰ä¸¤ç§æ–¹æ³•æ˜¯ä½ åœ¨é¢è¯•ä¸­åº”è¯¥æƒ³åˆ°çš„ã€‚ç¬¬ä¸‰ç§æ–¹æ³•ä¸æ˜¯ä½ åœ¨é¢è¯•ä¸­ä¼šå†™çš„ï¼Œè€Œæ˜¯é’ˆå¯¹å¯¹æ•°å­¦å¥½å¥‡çš„äººï¼Œå› ä¸ºå®ƒå¾ˆæœ‰è¶£ã€‚\n\nä¸‹ä¸€ä¸ªå€¼å¯èƒ½æ¯”è‡ªå·±å¤§çš„æœ€å¤§æ•°å­—æ˜¯ä»€ä¹ˆï¼Ÿæ ¹æ®æˆ‘ä»¬ä¹‹å‰çš„åˆ†æï¼Œæˆ‘ä»¬çŸ¥é“å®ƒå¿…é¡»ä½äº 243ã€‚å› æ­¤ï¼Œæˆ‘ä»¬çŸ¥é“ä»»ä½•å¾ªç¯éƒ½å¿…é¡»åŒ…å«å°äº 243 çš„æ•°å­—ï¼Œç”¨è¿™ä¹ˆå°çš„æ•°å­—ï¼Œç¼–å†™ä¸€ä¸ªèƒ½æ‰¾åˆ°æ‰€æœ‰å‘¨æœŸçš„å¼ºåŠ›ç¨‹åºå¹¶ä¸å›°éš¾ã€‚\n\nå¦‚æœè¿™æ ·åšï¼Œæ‚¨ä¼šå‘ç°åªæœ‰ä¸€ä¸ªå¾ªç¯ï¼š$4 \\rightarrow 16 \\rightarrow  37 \\rightarrow  58 \\rightarrow 89 \\rightarrow 145 \\rightarrow 42 \\rightarrow 20 \\rightarrow  4$ã€‚æ‰€æœ‰å…¶ä»–æ•°å­—éƒ½åœ¨è¿›å…¥è¿™ä¸ªå¾ªç¯çš„é“¾ä¸Šï¼Œæˆ–è€…åœ¨è¿›å…¥ $1$ çš„é“¾ä¸Šã€‚\n\nå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç¡¬ç¼–ç ä¸€ä¸ªåŒ…å«è¿™äº›æ•°å­—çš„æ•£åˆ—é›†ï¼Œå¦‚æœæˆ‘ä»¬è¾¾åˆ°å…¶ä¸­ä¸€ä¸ªæ•°å­—ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±çŸ¥é“åœ¨å¾ªç¯ä¸­ã€‚\n\n**ç®—æ³•**\n\n```python [sol3-Python]\ndef isHappy(self, n: int) -> bool:\n\n    cycle_members = {4, 16, 37, 58, 89, 145, 42, 20}\n\n    def get_next(number):\n        total_sum = 0\n        while number > 0:\n            number, digit = divmod(number, 10)\n            total_sum += digit ** 2\n        return total_sum\n\n    while n != 1 and n not in cycle_members:\n        n = get_next(n)\n\n    return n == 1\n```\n\n```java [sol3-Java]\nclass Solution {\n\n    private static Set<Integer> cycleMembers =\n        new HashSet<>(Arrays.asList(4, 16, 37, 58, 89, 145, 42, 20));\n\n    public int getNext(int n) {\n        int totalSum = 0;\n        while (n > 0) {\n            int d = n % 10;\n            n = n / 10;\n            totalSum += d * d;\n        }\n        return totalSum;\n    }\n\n\n    public boolean isHappy(int n) {\n        while (n != 1 && !cycleMembers.contains(n)) {\n            n = getNext(n);\n        }\n        return n == 1;\n    }\n}\n```\n\n```csharp [sol3-C#]\nclass Solution {\n    public int getNext(int n) {\n        int totalSum = 0;\n        while (n > 0) {\n            int d = n % 10;\n            n = n / 10;\n            totalSum += d * d;\n        }\n        return totalSum;\n    }\n\n    public bool IsHappy(int n) {\n        HashSet<int> cycleMembers =\n            new HashSet<int>(new int[8] {4, 16, 37, 58, 89, 145, 42, 20});\n\n        while (n != 1 && !cycleMembers.Contains(n)) {\n            n = getNext(n);\n        }\n        return n == 1;\n    }\n}\n```\n\n```golang [sol3-Golang]\nfunc isHappy(n int) bool {\n    cycle := map[int]bool{4: true, 6: true, 37: true, 58: true, 89: true, 145: true, 42: true, 20: true}\n    for n != 1 && !cycle[n] {\n        n = step(n)\n    }\n    return n == 1\n}\n\nfunc step(n int) int {\n    sum := 0\n    for n > 0 {\n        sum += (n%10) * (n%10)\n        n = n/10\n    }\n    return sum\n}\n```\n\n**å¤æ‚åº¦åˆ†æ**\n\n* æ—¶é—´å¤æ‚åº¦ï¼š$O(\\log n)$ã€‚å’Œä¸Šé¢ä¸€æ ·ã€‚\n* ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ï¼Œæˆ‘ä»¬æ²¡æœ‰ä¿ç•™æˆ‘ä»¬æ‰€é‡åˆ°çš„æ•°å­—çš„å†å²è®°å½•ã€‚ç¡¬ç¼–ç å“ˆå¸Œé›†çš„å¤§å°æ˜¯å›ºå®šçš„ã€‚",
      "createdAt": "2020-04-29T05:47:28.568326+00:00",
      "hitCount": 99693,
      "identifier": "Mq58q0",
      "isEditorsPick": false,
      "isMostPopular": false,
      "isMyFavorite": false,
      "next": {
        "__typename": "BriefSolutionNode",
        "slug": "shi-yong-kuai-man-zhi-zhen-si-xiang-zhao-chu-xun-h",
        "title": "ä½¿ç”¨â€œå¿«æ…¢æŒ‡é’ˆâ€æ€æƒ³æ‰¾å‡ºå¾ªç¯ï¼Œä¸è¦ä½¿ç”¨é›†åˆæˆ–é€’å½’ï¼ï¼"
      },
      "position": 1,
      "prev": null,
      "question": {
        "__typename": "QuestionNode",
        "questionTitleSlug": "happy-number"
      },
      "reactionType": null,
      "reactionsV2": [
        {
          "__typename": "ReactionCountNode",
          "count": 165,
          "reactionType": "UPVOTE"
        },
        {
          "__typename": "ReactionCountNode",
          "count": 13,
          "reactionType": "AWESOME"
        },
        {
          "__typename": "ReactionCountNode",
          "count": 8,
          "reactionType": "CONFUSED"
        }
      ],
      "rewardEnabled": null,
      "slug": "kuai-le-shu-by-leetcode-solution",
      "status": "PUBLISHED",
      "summary": "ğŸ“º è§†é¢‘é¢˜è§£\nğŸ“– æ–‡å­—é¢˜è§£\n æ–¹æ³•ä¸€ï¼šç”¨å“ˆå¸Œé›†åˆæ£€æµ‹å¾ªç¯\næˆ‘ä»¬å¯ä»¥å…ˆä¸¾å‡ ä¸ªä¾‹å­ã€‚æˆ‘ä»¬ä» 7 å¼€å§‹ã€‚åˆ™ä¸‹ä¸€ä¸ªæ•°å­—æ˜¯ 49ï¼ˆå› ä¸º 7^2=49ï¼‰ï¼Œç„¶åä¸‹ä¸€ä¸ªæ•°å­—æ˜¯ 97ï¼ˆå› ä¸º 4^2+9^2=97ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥ä¸æ–­é‡å¤è¯¥çš„è¿‡ç¨‹ï¼Œç›´åˆ°æˆ‘ä»¬å¾—åˆ° 1ã€‚å› ä¸ºæˆ‘ä»¬å¾—åˆ°äº† 1ï¼Œæˆ‘ä»¬çŸ¥é“ 7 æ˜¯ä¸€ä¸ªå¿«ä¹æ•°ï¼Œå‡½æ•°åº”è¯¥è¿”å› trueã€‚\nå†",
      "sunk": false,
      "tags": [
        {
          "__typename": "CommonTagNode",
          "name": "Hash Table",
          "nameTranslated": "å“ˆå¸Œè¡¨",
          "slug": "hash-table",
          "tagType": "TOPIC"
        },
        {
          "__typename": "CommonTagNode",
          "name": "Math",
          "nameTranslated": "æ•°å­¦",
          "slug": "math",
          "tagType": "TOPIC"
        },
        {
          "__typename": "CommonTagNode",
          "name": "Two Pointers",
          "nameTranslated": "åŒæŒ‡é’ˆ",
          "slug": "two-pointers",
          "tagType": "TOPIC"
        },
        {
          "__typename": "CommonTagNode",
          "name": "C#",
          "nameTranslated": "",
          "slug": "csharp",
          "tagType": "LANGUAGE"
        },
        {
          "__typename": "CommonTagNode",
          "name": "Go",
          "nameTranslated": "",
          "slug": "golang",
          "tagType": "LANGUAGE"
        },
        {
          "__typename": "CommonTagNode",
          "name": "Java",
          "nameTranslated": "",
          "slug": "java",
          "tagType": "LANGUAGE"
        },
        {
          "__typename": "CommonTagNode",
          "name": "Python",
          "nameTranslated": "",
          "slug": "python",
          "tagType": "LANGUAGE"
        }
      ],
      "thumbnail": "https://assets.leetcode-cn.com/solution-static/202/202_fig1.png",
      "title": "å¿«ä¹æ•°",
      "topic": {
        "__typename": "TopicNode",
        "commentCount": 223,
        "id": 224894,
        "viewCount": 70482
      },
      "uuid": "Mq58q0",
      "videosInfo": [
        {
          "__typename": "VideoInfoNode",
          "coverUrl": "https://video.leetcode-cn.com/image/cover/AEC1CC19D8B349B6B27019C93AE61886-6-2.png",
          "duration": 546.304,
          "videoId": "916674d365a6413b99f4c3b7a8a26f64"
        }
      ]
    }
  }
}
