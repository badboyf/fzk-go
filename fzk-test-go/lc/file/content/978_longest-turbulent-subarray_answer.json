{
  "data": {
    "solutionArticle": {
      "__typename": "SolutionArticleNode",
      "author": {
        "__typename": "UserNode",
        "profile": {
          "__typename": "UserProfileNode",
          "realName": "åŠ›æ‰£å®˜æ–¹é¢˜è§£",
          "userAvatar": "https://assets.leetcode-cn.com/aliyun-lc-upload/users/leetcode-solution/avatar_1582018938.png",
          "userSlug": "leetcode-solution"
        },
        "username": "LeetCode-Solution"
      },
      "byLeetcode": true,
      "canEdit": false,
      "canEditReward": false,
      "canSee": true,
      "chargeType": "FREE",
      "content": "#### æ–¹æ³•ä¸€ï¼šæ»‘åŠ¨çª—å£\n\nè®¾æ•°ç»„ $\\textit{arr}$ çš„é•¿åº¦ä¸º $n$ï¼Œçª—å£ $[\\textit{left},\\textit{right}](0 \\le \\textit{left} \\le \\textit{right} \\le n-1)$ ä¸ºå½“å‰çš„çª—å£ï¼Œçª—å£å†…æ„æˆäº†ä¸€ä¸ªã€Œæ¹æµå­æ•°ç»„ã€ã€‚éšåï¼Œæˆ‘ä»¬è¦è€ƒè™‘ä¸‹ä¸€ä¸ªçª—å£çš„ä½ç½®ã€‚\n\næ ¹æ®ã€Œæ¹æµå­æ•°ç»„ã€çš„å®šä¹‰ï¼Œå½“ $0<\\textit{right}<n-1$ æ—¶ï¼š\n\n- å¦‚æœ $\\textit{arr}[\\textit{right}-1] < \\textit{arr}[\\textit{right}]$ ä¸” $\\textit{arr}[\\textit{right}] > \\textit{arr}[\\textit{right}+1]$ï¼Œåˆ™ $[\\textit{left},\\textit{right}+1]$ ä¹Ÿæ„æˆã€Œæ¹æµå­æ•°ç»„ã€ï¼Œå› æ­¤éœ€è¦å°† $\\textit{right}$ å³ç§»ä¸€ä¸ªå•ä½ï¼›\n\n- å¦‚æœ $\\textit{arr}[\\textit{right}-1] > \\textit{arr}[\\textit{right}]$ ä¸” $\\textit{arr}[\\textit{right}] < \\textit{arr}[\\textit{right}+1]$ï¼ŒåŒç†ï¼Œä¹Ÿéœ€è¦å°† $\\textit{right}$ å³ç§»ä¸€ä¸ªå•ä½ï¼›\n\n- å¦åˆ™ï¼Œ$[\\textit{right}-1,\\textit{right}+1]$ æ— æ³•æ„æˆã€Œæ¹æµå­æ•°ç»„ã€ï¼Œå½“ $\\textit{left}<\\textit{right}$ æ—¶ï¼Œ$[\\textit{left},\\textit{right}+1]$ ä¹Ÿæ— æ³•æ„æˆã€Œæ¹æµå­æ•°ç»„ã€ï¼Œå› æ­¤éœ€è¦å°† $\\textit{left}$ ç§»åˆ° $\\textit{right}$ï¼Œå³ä»¤ $\\textit{left}=\\textit{right}$ã€‚\n\næ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç‰¹æ®Šè€ƒè™‘çª—å£é•¿åº¦ä¸º $1$ (å³ $\\textit{left}$ å’Œ $\\textit{right}$ ç›¸ç­‰çš„æƒ…å†µ)ï¼šåªè¦ $\\textit{arr}[\\textit{right}] \\ne \\textit{arr}[\\textit{right}+1]$ï¼Œå°±å¯ä»¥å°† $\\textit{right}$ å³ç§»ä¸€ä¸ªå•ä½ï¼›å¦åˆ™ï¼Œ$\\textit{left}$ å’Œ $\\textit{right}$ éƒ½è¦åŒæ—¶å³ç§»ã€‚\n\n```C++ [sol1-C++]\nclass Solution {\npublic:\n    int maxTurbulenceSize(vector<int>& arr) {\n        int n = arr.size();\n        int ret = 1;\n        int left = 0, right = 0;\n\n        while (right < n - 1) {\n            if (left == right) {\n                if (arr[left] == arr[left + 1]) {\n                    left++;\n                }\n                right++;\n            } else {\n                if (arr[right - 1] < arr[right] && arr[right] > arr[right + 1]) {\n                    right++;\n                } else if (arr[right - 1] > arr[right] && arr[right] < arr[right + 1]) {\n                    right++;\n                } else {\n                    left = right;\n                }\n            }\n            ret = max(ret, right - left + 1);\n        }\n        return ret;\n    }\n};\n```\n\n```Java [sol1-Java]\nclass Solution {\n    public int maxTurbulenceSize(int[] arr) {\n        int n = arr.length;\n        int ret = 1;\n        int left = 0, right = 0;\n\n        while (right < n - 1) {\n            if (left == right) {\n                if (arr[left] == arr[left + 1]) {\n                    left++;\n                }\n                right++;\n            } else {\n                if (arr[right - 1] < arr[right] && arr[right] > arr[right + 1]) {\n                    right++;\n                } else if (arr[right - 1] > arr[right] && arr[right] < arr[right + 1]) {\n                    right++;\n                } else {\n                    left = right;\n                }\n            }\n            ret = Math.max(ret, right - left + 1);\n        }\n        return ret;\n    }\n}\n```\n\n```JavaScript [sol1-JavaScript]\nvar maxTurbulenceSize = function(arr) {\n    const n = arr.length;\n    let ret = 1;\n    let left = 0, right = 0;\n\n    while (right < n - 1) {\n        if (left == right) {\n            if (arr[left] == arr[left + 1]) {\n                left++;\n            }\n            right++;\n        } else {\n            if (arr[right - 1] < arr[right] && arr[right] > arr[right + 1]) {\n                right++;\n            } else if (arr[right - 1] > arr[right] && arr[right] < arr[right + 1]) {\n                right++;\n            } else {\n                left = right;\n            }\n        }\n        ret = Math.max(ret, right - left + 1);\n    }\n    return ret;\n};\n```\n\n```go [sol1-Golang]\nfunc maxTurbulenceSize(arr []int) int {\n    n := len(arr)\n    ans := 1\n    left, right := 0, 0\n    for right < n-1 {\n        if left == right {\n            if arr[left] == arr[left+1] {\n                left++\n            }\n            right++\n        } else {\n            if arr[right-1] < arr[right] && arr[right] > arr[right+1] {\n                right++\n            } else if arr[right-1] > arr[right] && arr[right] < arr[right+1] {\n                right++\n            } else {\n                left = right\n            }\n        }\n        ans = max(ans, right-left+1)\n    }\n    return ans\n}\n\nfunc max(a, b int) int {\n    if a > b {\n        return a\n    }\n    return b\n}\n```\n\n```C [sol1-C]\nint maxTurbulenceSize(int* arr, int arrSize) {\n    int ret = 1;\n    int left = 0, right = 0;\n\n    while (right < arrSize - 1) {\n        if (left == right) {\n            if (arr[left] == arr[left + 1]) {\n                left++;\n            }\n            right++;\n        } else {\n            if (arr[right - 1] < arr[right] && arr[right] > arr[right + 1]) {\n                right++;\n            } else if (arr[right - 1] > arr[right] && arr[right] < arr[right + 1]) {\n                right++;\n            } else {\n                left = right;\n            }\n        }\n        ret = fmax(ret, right - left + 1);\n    }\n    return ret;\n}\n```\n\n**å¤æ‚åº¦åˆ†æ**\n\n- æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œå…¶ä¸­ $n$ ä¸ºæ•°ç»„çš„é•¿åº¦ã€‚çª—å£çš„å·¦å³ç«¯ç‚¹æœ€å¤šå„ç§»åŠ¨ $n$ æ¬¡ã€‚\n\n- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ã€‚åªéœ€è¦ç»´æŠ¤å¸¸æ•°é¢å¤–ç©ºé—´ã€‚\n\n#### æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’\n\nä¹Ÿå¯ä»¥ä½¿ç”¨åŠ¨æ€è§„åˆ’çš„æ–¹æ³•è®¡ç®—æœ€é•¿æ¹æµå­æ•°ç»„çš„é•¿åº¦ã€‚\n\nè®° $\\textit{dp}[i][0]$ ä¸ºä»¥ $\\textit{arr}[i]$ ç»“å°¾ï¼Œä¸” $\\textit{arr}[i-1] > \\textit{arr}[i]$ çš„ã€Œæ¹æµå­æ•°ç»„ã€çš„æœ€å¤§é•¿åº¦ï¼›$\\textit{dp}[i][1]$ ä¸ºä»¥ $\\textit{arr}[i]$ ç»“å°¾ï¼Œä¸” $\\textit{arr}[i-1] < \\textit{arr}[i]$ çš„ã€Œæ¹æµå­æ•°ç»„ã€çš„æœ€å¤§é•¿åº¦ã€‚\n\næ˜¾ç„¶ï¼Œä»¥ä¸‹æ ‡ $0$ ç»“å°¾çš„ã€Œæ¹æµå­æ•°ç»„ã€çš„æœ€å¤§é•¿åº¦ä¸º $1$ï¼Œå› æ­¤è¾¹ç•Œæƒ…å†µä¸º $\\textit{dp}[0][0]=\\textit{dp}[0][1]=1$ã€‚\n\nå½“ $i>0$ æ—¶ï¼Œè€ƒè™‘ $\\textit{arr}[i-1]$ å’Œ $\\textit{arr}[i]$ ä¹‹é—´çš„å¤§å°å…³ç³»ï¼š\n\n- å¦‚æœ $\\textit{arr}[i-1]>\\textit{arr}[i]$ï¼Œåˆ™å¦‚æœä»¥ä¸‹æ ‡ $i-1$ ç»“å°¾çš„å­æ•°ç»„æ˜¯ã€Œæ¹æµå­æ•°ç»„ã€ï¼Œåº”æ»¡è¶³ $i-1=0$ï¼Œæˆ–è€…å½“ $i-1>0$ æ—¶ $\\textit{arr}[i-2] < \\textit{arr}[i-1]$ï¼Œå› æ­¤ $\\textit{dp}[i][0]=\\textit{dp}[i-1][1]+1$ï¼Œ$\\textit{dp}[i][1]=1$ï¼›\n\n- å¦‚æœ $\\textit{arr}[i-1]<\\textit{arr}[i]$ï¼Œåˆ™å¦‚æœä»¥ä¸‹æ ‡ $i-1$ ç»“å°¾çš„å­æ•°ç»„æ˜¯ã€Œæ¹æµå­æ•°ç»„ã€ï¼Œåº”æ»¡è¶³ $i-1=0$ï¼Œæˆ–è€…å½“ $i-1>0$ æ—¶ $\\textit{arr}[i-2] > \\textit{arr}[i-1]$ï¼Œå› æ­¤ $\\textit{dp}[i][0]=1$ï¼Œ$\\textit{dp}[i][1]=\\textit{dp}[i-1][0]+1$ï¼›\n\n- å¦‚æœ $\\textit{arr}[i-1]=\\textit{arr}[i]$ï¼Œåˆ™ $\\textit{arr}[i-1]$ å’Œ $\\textit{arr}[i]$ ä¸èƒ½åŒæ—¶å‡ºç°åœ¨åŒä¸€ä¸ªæ¹æµå­æ•°ç»„ä¸­ï¼Œå› æ­¤ $\\textit{dp}[i][0]=\\textit{dp}[i][1]=1$ã€‚\n\næœ€ç»ˆï¼Œ$\\textit{dp}$ æ•°ç»„çš„æœ€å¤§å€¼å³ä¸ºæ‰€æ±‚çš„ç­”æ¡ˆã€‚\n\n```C++ [sol21-C++]\nclass Solution {\npublic:\n    int maxTurbulenceSize(vector<int>& arr) {\n        int n = arr.size();\n        vector<vector<int>> dp(n, vector<int>(2, 1));\n        dp[0][0] = dp[0][1] = 1;\n        for (int i = 1; i < n; i++) {\n            if (arr[i - 1] > arr[i]) {\n                dp[i][0] = dp[i - 1][1] + 1;\n            } else if (arr[i - 1] < arr[i]) {\n                dp[i][1] = dp[i - 1][0] + 1;\n            }\n        }\n\n        int ret = 1;\n        for (int i = 0; i < n; i++) {\n            ret = max(ret, dp[i][0]);\n            ret = max(ret, dp[i][1]);\n        }\n        return ret;\n    }\n};\n```\n\n```Java [sol21-Java]\nclass Solution {\n    public int maxTurbulenceSize(int[] arr) {\n        int n = arr.length;\n        int[][] dp = new int[n][2];\n        dp[0][0] = dp[0][1] = 1;\n        for (int i = 1; i < n; i++) {\n            dp[i][0] = dp[i][1] = 1;\n            if (arr[i - 1] > arr[i]) {\n                dp[i][0] = dp[i - 1][1] + 1;\n            } else if (arr[i - 1] < arr[i]) {\n                dp[i][1] = dp[i - 1][0] + 1;\n            }\n        }\n\n        int ret = 1;\n        for (int i = 0; i < n; i++) {\n            ret = Math.max(ret, dp[i][0]);\n            ret = Math.max(ret, dp[i][1]);\n        }\n        return ret;\n    }\n}\n```\n\n```JavaScript [sol21-JavaScript]\nvar maxTurbulenceSize = function(arr) {\n    const n = arr.length;\n    const dp = new Array(n).fill(0).map(() => new Array(2).fill(0));\n    dp[0][0] = dp[0][1] = 1;\n    for (let i = 1; i < n; i++) {\n        dp[i][0] = dp[i][1] = 1;\n        if (arr[i - 1] > arr[i]) {\n            dp[i][0] = dp[i - 1][1] + 1;\n        } else if (arr[i - 1] < arr[i]) {\n            dp[i][1] = dp[i - 1][0] + 1;\n        }\n    }\n\n    let ret = 1;\n    for (let i = 0; i < n; i++) {\n        ret = Math.max(ret, dp[i][0]);\n        ret = Math.max(ret, dp[i][1]);\n    }\n    return ret;\n};\n```\n\n```go [sol21-Golang]\nfunc maxTurbulenceSize(arr []int) int {\n    n := len(arr)\n    dp := make([][2]int, n)\n    dp[0] = [2]int{1, 1}\n    for i := 1; i < n; i++ {\n        dp[i] = [2]int{1, 1}\n        if arr[i-1] > arr[i] {\n            dp[i][0] = dp[i-1][1] + 1\n        } else if arr[i-1] < arr[i] {\n            dp[i][1] = dp[i-1][0] + 1\n        }\n    }\n\n    ans := 1\n    for i := 0; i < n; i++ {\n        ans = max(ans, dp[i][0])\n        ans = max(ans, dp[i][1])\n    }\n    return ans\n}\n\nfunc max(a, b int) int {\n    if a > b {\n        return a\n    }\n    return b\n}\n```\n\n```C [sol21-C]\nint maxTurbulenceSize(int* arr, int arrSize) {\n    int dp[arrSize][2];\n    for (int i = 0; i < arrSize; i++) {\n        dp[i][0] = dp[i][1] = 1;\n    }\n    dp[0][0] = dp[0][1] = 1;\n    for (int i = 1; i < arrSize; i++) {\n        if (arr[i - 1] > arr[i]) {\n            dp[i][0] = dp[i - 1][1] + 1;\n        } else if (arr[i - 1] < arr[i]) {\n            dp[i][1] = dp[i - 1][0] + 1;\n        }\n    }\n\n    int ret = 1;\n    for (int i = 0; i < arrSize; i++) {\n        ret = fmax(ret, dp[i][0]);\n        ret = fmax(ret, dp[i][1]);\n    }\n    return ret;\n}\n```\n\nä¸Šè¿°å®ç°çš„ç©ºé—´å¤æ‚åº¦æ˜¯ $O(n)$ã€‚æ³¨æ„åˆ°å½“ $i>0$ æ—¶ï¼Œä¸‹æ ‡ $i$ å¤„çš„ $\\textit{dp}$ å€¼åªå’Œä¸‹æ ‡ $i-1$ å¤„çš„ $\\textit{dp}$ å€¼æœ‰å…³ï¼Œå› æ­¤å¯ä»¥ç”¨ä¸¤ä¸ªå˜é‡ $\\textit{dp}_0$ å’Œ $\\textit{dp}_1$ ä»£æ›¿ $\\textit{dp}[i][0]$ å’Œ $\\textit{dp}[i][1]$ï¼Œå°†ç©ºé—´å¤æ‚åº¦é™åˆ° $O(1)$ã€‚\n\n```C++ [sol22-C++]\nclass Solution {\npublic:\n    int maxTurbulenceSize(vector<int>& arr) {\n        int ret = 1;\n        int n = arr.size();\n        int dp0 = 1, dp1 = 1;\n        for (int i = 1; i < n; i++) {\n            if (arr[i - 1] > arr[i]) {\n                dp0 = dp1 + 1;\n                dp1 = 1;\n            } else if (arr[i - 1] < arr[i]) {\n                dp1 = dp0 + 1;\n                dp0 = 1;\n            } else {\n                dp0 = 1;\n                dp1 = 1;\n            }\n            ret = max(ret, dp0);\n            ret = max(ret, dp1);\n        }\n        return ret;\n    }\n};\n```\n\n```Java [sol22-Java]\nclass Solution {\n    public int maxTurbulenceSize(int[] arr) {\n        int ret = 1;\n        int n = arr.length;\n        int dp0 = 1, dp1 = 1;\n        for (int i = 1; i < n; i++) {\n            if (arr[i - 1] > arr[i]) {\n                dp0 = dp1 + 1;\n                dp1 = 1;\n            } else if (arr[i - 1] < arr[i]) {\n                dp1 = dp0 + 1;\n                dp0 = 1;\n            } else {\n                dp0 = 1;\n                dp1 = 1;\n            }\n            ret = Math.max(ret, dp0);\n            ret = Math.max(ret, dp1);\n        }\n        return ret;\n    }\n}\n```\n\n```JavaScript [sol22-JavaScript]\nvar maxTurbulenceSize = function(arr) {\n    let ret = 1;\n    const n = arr.length;\n    let dp0 = 1, dp1 = 1;\n    for (let i = 1; i < n; i++) {\n        if (arr[i - 1] > arr[i]) {\n            dp0 = dp1 + 1;\n            dp1 = 1;\n        } else if (arr[i - 1] < arr[i]) {\n            dp1 = dp0 + 1;\n            dp0 = 1;\n        } else {\n            dp0 = 1;\n            dp1 = 1;\n        }\n        ret = Math.max(ret, dp0);\n        ret = Math.max(ret, dp1);\n    }\n    return ret;\n};\n```\n\n```go [sol22-Golang]\nfunc maxTurbulenceSize(arr []int) int {\n    ans := 1\n    n := len(arr)\n    dp0, dp1 := 1, 1\n    for i := 1; i < n; i++ {\n        if arr[i-1] > arr[i] {\n            dp0, dp1 = dp1+1, 1\n        } else if arr[i-1] < arr[i] {\n            dp0, dp1 = 1, dp0+1\n        } else {\n            dp0, dp1 = 1, 1\n        }\n        ans = max(ans, max(dp0, dp1))\n    }\n    return ans\n}\n\nfunc max(a, b int) int {\n    if a > b {\n        return a\n    }\n    return b\n}\n```\n\n```C [sol22-C]\nint maxTurbulenceSize(int* arr, int arrSize) {\n    int ret = 1;\n    int dp0 = 1, dp1 = 1;\n    for (int i = 1; i < arrSize; i++) {\n        if (arr[i - 1] > arr[i]) {\n            dp0 = dp1 + 1;\n            dp1 = 1;\n        } else if (arr[i - 1] < arr[i]) {\n            dp1 = dp0 + 1;\n            dp0 = 1;\n        } else {\n            dp0 = 1;\n            dp1 = 1;\n        }\n        ret = fmax(ret, dp0);\n        ret = fmax(ret, dp1);\n    }\n    return ret;\n}\n```\n\n**å¤æ‚åº¦åˆ†æ**\n\n- æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œå…¶ä¸­ $n$ ä¸ºæ•°ç»„çš„é•¿åº¦ã€‚éœ€è¦éå†æ•°ç»„ $\\textit{arr}$ ä¸€æ¬¡ï¼Œè®¡ç®— $\\textit{dp}$ çš„å€¼ã€‚\n\n- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ã€‚ä½¿ç”¨ç©ºé—´ä¼˜åŒ–çš„åšæ³•ï¼Œåªéœ€è¦ç»´æŠ¤å¸¸æ•°é¢å¤–ç©ºé—´ã€‚",
      "createdAt": "2021-02-07T14:00:27.558274+00:00",
      "hitCount": 24627,
      "identifier": "Vtq9C9",
      "isEditorsPick": false,
      "isMostPopular": false,
      "isMyFavorite": false,
      "next": {
        "__typename": "BriefSolutionNode",
        "slug": "zui-chang-tuan-liu-zi-shu-zu-by-leetcode-zqoq",
        "title": "ğŸ¦ æœ€é•¿æ¹æµå­æ•°ç»„"
      },
      "position": 1,
      "prev": null,
      "question": {
        "__typename": "QuestionNode",
        "questionTitleSlug": "longest-turbulent-subarray"
      },
      "reactionType": null,
      "reactionsV2": [
        {
          "__typename": "ReactionCountNode",
          "count": 40,
          "reactionType": "UPVOTE"
        },
        {
          "__typename": "ReactionCountNode",
          "count": 2,
          "reactionType": "AWESOME"
        }
      ],
      "rewardEnabled": null,
      "slug": "zui-chang-tuan-liu-zi-shu-zu-by-leetcode-t4d8",
      "status": "PREPUBLISH",
      "summary": "æ–¹æ³•ä¸€ï¼šæ»‘åŠ¨çª—å£ è®¾æ•°ç»„ $\\textit{arr}$ çš„é•¿åº¦ä¸º $n$ï¼Œçª—å£ $\\textit{left},\\textit{right}$ ä¸ºå½“å‰çš„çª—å£ï¼Œçª—å£å†…æ„æˆäº†ä¸€ä¸ªã€Œæ¹æµå­æ•°ç»„ã€ã€‚éšåï¼Œæˆ‘ä»¬è¦è€ƒè™‘ä¸‹ä¸€ä¸ªçª—å£çš„ä½ç½®ã€‚ æ ¹æ®ã€Œæ¹æµå­æ•°ç»„ã€çš„å®šä¹‰ï¼Œå½“ $0<\\textit{right}<n-1$ æ—¶ï¼š å¦‚æœ $\\te",
      "sunk": false,
      "tags": [
        {
          "__typename": "CommonTagNode",
          "name": "Dynamic Programming",
          "nameTranslated": "åŠ¨æ€è§„åˆ’",
          "slug": "dynamic-programming",
          "tagType": "TOPIC"
        },
        {
          "__typename": "CommonTagNode",
          "name": "C",
          "nameTranslated": "",
          "slug": "c",
          "tagType": "LANGUAGE"
        },
        {
          "__typename": "CommonTagNode",
          "name": "C++",
          "nameTranslated": "",
          "slug": "cpp",
          "tagType": "LANGUAGE"
        },
        {
          "__typename": "CommonTagNode",
          "name": "Go",
          "nameTranslated": "",
          "slug": "golang",
          "tagType": "LANGUAGE"
        },
        {
          "__typename": "CommonTagNode",
          "name": "Java",
          "nameTranslated": "",
          "slug": "java",
          "tagType": "LANGUAGE"
        },
        {
          "__typename": "CommonTagNode",
          "name": "JavaScript",
          "nameTranslated": "",
          "slug": "javascript",
          "tagType": "LANGUAGE"
        }
      ],
      "thumbnail": "",
      "title": "æœ€é•¿æ¹æµå­æ•°ç»„",
      "topic": {
        "__typename": "TopicNode",
        "commentCount": 121,
        "id": 596355,
        "viewCount": 16950
      },
      "uuid": "Vtq9C9",
      "videosInfo": []
    }
  }
}
