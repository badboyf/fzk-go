{
  "data": {
    "solutionArticle": {
      "__typename": "SolutionArticleNode",
      "author": {
        "__typename": "UserNode",
        "profile": {
          "__typename": "UserProfileNode",
          "realName": "åŠ›æ‰£å®˜æ–¹é¢˜è§£",
          "userAvatar": "https://assets.leetcode-cn.com/aliyun-lc-upload/users/leetcode-solution/avatar_1582018938.png",
          "userSlug": "leetcode-solution"
        },
        "username": "LeetCode-Solution"
      },
      "byLeetcode": true,
      "canEdit": false,
      "canEditReward": false,
      "canSee": true,
      "chargeType": "FREE",
      "content": "### ğŸ“º è§†é¢‘é¢˜è§£ \n\n![887 é¸¡è›‹æ‰è½ ä»²è€€æ™–v3.mp4](b969bf89-4963-4447-8a3b-3bca47f97160)\n\n### ğŸ“– æ–‡å­—é¢˜è§£\n#### å‰è¨€\n\næœ¬é¢˜æ˜¯è°·æ­Œçš„ä¸€é“ç»å…¸é¢è¯•é¢˜ã€‚ç”±äºæœ¬é¢˜è¿‡äºç»å…¸ï¼Œè°·æ­Œå…¬å¸å·²ç»ä¸å†å°†è¿™é¢˜ä½œä¸ºé¢è¯•çš„å€™é€‰é¢˜ç›®äº†ã€‚\n\næœ¬é¢˜éš¾åº¦è¾ƒé«˜ï¼Œè¦æƒ³é€šè¿‡æœ¬é¢˜ï¼Œéœ€è¦ä¸€å®šçš„åŠ¨æ€è§„åˆ’ä¼˜åŒ–æˆ–æ•°å­¦åŠŸåº•ã€‚æœ¬é¢˜çš„æ ‡å‡†è§£æ³•ä¸ºåŠ¨æ€è§„åˆ’ï¼Œç”±äºç¯‡å¹…æœ‰é™ï¼Œä¸ä¼šå™è¿° **åŠ¨æ€è§„åˆ’çš„è¾¹ç•Œæ¡ä»¶**ã€**è‡ªåº•å‘ä¸Šçš„åŠ¨æ€è§„åˆ’å’Œè‡ªé¡¶å‘ä¸‹çš„åŠ¨æ€è§„åˆ’åˆ†åˆ«æ€ä¹ˆå®ç°** ç­‰è¾ƒä¸ºåŸºç¡€çš„çŸ¥è¯†ï¼Œè€Œæ˜¯æŠŠé‡ç‚¹æ”¾åœ¨æ¨å¯¼åŠ¨æ€è§„åˆ’çŠ¶æ€è½¬ç§»æ–¹ç¨‹çš„è¿‡ç¨‹ï¼Œä»¥åŠä¼˜åŒ–çš„æ€è·¯ã€è¯æ˜ä»¥åŠæ–¹æ³•ã€‚\n\nè¯»è€…åº”å½“æœŸæœ›åœ¨é˜…è¯»å®Œæœ¬é¢˜è§£åï¼Œèƒ½å¤Ÿå¯¹æ–¹æ³•ä¸€æœ‰ä¸€ä¸ªå¤§è‡´çš„æ€è·¯ï¼Œå¹¶ä¸”å¯ä»¥åœ¨å°è¯•ä¸­ç¼–å†™å‡ºä»£ç ã€‚æ–¹æ³•ä¸€å·²ç»æ˜¯å¾ˆä¼˜ç§€çš„è§£æ³•ï¼Œæœ¬é¢˜è§£ä¹Ÿç€é‡äºæ­¤ã€‚è€Œå¯¹äºæ–¹æ³•äºŒå’Œæ–¹æ³•ä¸‰ï¼Œå·²ç»è¶…è¿‡äº†é¢è¯•éš¾åº¦ï¼Œæ˜¯ç«èµ›ä¸­çš„è€ƒç‚¹ï¼Œä»…ä¾›è¯»è€…æŒ‘æˆ˜è‡ªæˆ‘çš„æé™ã€‚\n\n#### æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’ + äºŒåˆ†æŸ¥æ‰¾\n\n**æ€è·¯å’Œç®—æ³•**\n\næˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨åŠ¨æ€è§„åˆ’æ¥åšè¿™é“é¢˜ï¼ŒçŠ¶æ€å¯ä»¥è¡¨ç¤ºæˆ $(k, n)$ï¼Œå…¶ä¸­ $k$ ä¸ºé¸¡è›‹æ•°ï¼Œ$n$ ä¸ºæ¥¼å±‚æ•°ã€‚å½“æˆ‘ä»¬ä»ç¬¬ $x$ æ¥¼æ‰”é¸¡è›‹çš„æ—¶å€™ï¼š\n\n- å¦‚æœé¸¡è›‹ä¸ç¢ï¼Œé‚£ä¹ˆçŠ¶æ€å˜æˆ $(k, n-x)$ï¼Œå³æˆ‘ä»¬é¸¡è›‹çš„æ•°ç›®ä¸å˜ï¼Œä½†ç­”æ¡ˆåªå¯èƒ½åœ¨ä¸Šæ–¹çš„ $n-x$ å±‚æ¥¼äº†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æŠŠåŸé—®é¢˜ç¼©å°æˆäº†ä¸€ä¸ªè§„æ¨¡ä¸º $(k, n-x)$ çš„å­é—®é¢˜ï¼›\n\n- å¦‚æœé¸¡è›‹ç¢äº†ï¼Œé‚£ä¹ˆçŠ¶æ€å˜æˆ $(k-1, x-1)$ï¼Œå³æˆ‘ä»¬å°‘äº†ä¸€ä¸ªé¸¡è›‹ï¼Œä½†æˆ‘ä»¬çŸ¥é“ç­”æ¡ˆåªå¯èƒ½åœ¨ç¬¬ $x$ æ¥¼ä¸‹æ–¹çš„ $x-1$ å±‚æ¥¼ä¸­äº†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æŠŠåŸé—®é¢˜ç¼©å°æˆäº†ä¸€ä¸ªè§„æ¨¡ä¸º $(k-1, x-1)$ çš„å­é—®é¢˜ã€‚\n\nè¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å®šä¹‰ $\\textit{dp}(k, n)$ ä¸ºåœ¨çŠ¶æ€ $(k, n)$ ä¸‹æœ€å°‘éœ€è¦çš„æ­¥æ•°ã€‚æ ¹æ®ä»¥ä¸Šåˆ†ææˆ‘ä»¬å¯ä»¥åˆ—å‡ºçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š\n\n$$\n\\textit{dp}(k, n) = 1 + \\min\\limits_{1 \\leq x \\leq n} \\Big( \\max(\\textit{dp}(k-1, x-1), \\textit{dp}(k, n-x)) \\Big)\n$$\n\nè¿™ä¸ªçŠ¶æ€è½¬ç§»æ–¹ç¨‹æ˜¯å¦‚ä½•å¾—æ¥çš„å‘¢ï¼Ÿå¯¹äº $\\textit{dp}(k, n)$ è€Œè¨€ï¼Œæˆ‘ä»¬åƒä¸Šé¢åˆ†æçš„é‚£æ ·ï¼Œæšä¸¾ç¬¬ä¸€ä¸ªé¸¡è›‹æ‰”åœ¨çš„æ¥¼å±‚æ•° $x$ã€‚ç”±äºæˆ‘ä»¬å¹¶ä¸çŸ¥é“çœŸæ­£çš„ $f$ å€¼ï¼Œå› æ­¤æˆ‘ä»¬å¿…é¡»ä¿è¯ **é¸¡è›‹ç¢äº†ä¹‹åæ¥ä¸‹æ¥éœ€è¦çš„æ­¥æ•°** å’Œ **é¸¡è›‹æ²¡ç¢ä¹‹åæ¥ä¸‹æ¥éœ€è¦çš„æ­¥æ•°** äºŒè€…çš„ **æœ€å¤§å€¼** æœ€å°ï¼Œè¿™æ ·å°±ä¿è¯äº†åœ¨ **æœ€åæƒ…å†µä¸‹ï¼ˆä¹Ÿå°±æ˜¯æ— è®º $f$ çš„å€¼å¦‚ä½•ï¼‰** $\\textit{dp}(k, n)$ çš„å€¼æœ€å°ã€‚å¦‚æœèƒ½ç†è§£è¿™ä¸€ç‚¹ï¼Œä¹Ÿå°±èƒ½ç†è§£ä¸Šé¢çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œå³æœ€å°åŒ– $\\max(\\textit{dp}(k-1, x-1), \\textit{dp}(k, n-x))$ã€‚\n\nå¦‚æœæˆ‘ä»¬ç›´æ¥æš´åŠ›è½¬ç§»æ±‚è§£æ¯ä¸ªçŠ¶æ€çš„ $\\textit{dp}$ å€¼ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ä¸º $O(kn^2)$ï¼Œå³ä¸€å…±æœ‰ $O(kn)$ ä¸ªçŠ¶æ€ï¼Œå¯¹äºæ¯ä¸ªçŠ¶æ€æšä¸¾æ‰”é¸¡è›‹çš„æ¥¼å±‚ $x$ï¼Œéœ€è¦ $O(n)$ çš„æ—¶é—´ã€‚è¿™æ— ç–‘åœ¨å½“å‰æ•°æ®èŒƒå›´ä¸‹æ˜¯ä¼šè¶…å‡ºæ—¶é—´é™åˆ¶çš„ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æƒ³åŠæ³•ä¼˜åŒ–æšä¸¾çš„æ—¶é—´å¤æ‚åº¦ã€‚\n\næˆ‘ä»¬è§‚å¯Ÿåˆ° $\\textit{dp}(k, n)$ æ˜¯ä¸€ä¸ªå…³äº $n$ çš„å•è°ƒé€’å¢å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨é¸¡è›‹æ•° $k$ å›ºå®šçš„æƒ…å†µä¸‹ï¼Œæ¥¼å±‚æ•° $n$ è¶Šå¤šï¼Œéœ€è¦çš„æ­¥æ•°ä¸€å®šä¸ä¼šå˜å°‘ã€‚åœ¨ä¸Šè¿°çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸­ï¼Œç¬¬ä¸€é¡¹ $\\mathcal{T_1}(x) = \\textit{dp}(k-1, x-1)$ æ˜¯ä¸€ä¸ªéš $x$ çš„å¢åŠ è€Œå•è°ƒé€’å¢çš„å‡½æ•°ï¼Œç¬¬äºŒé¡¹ $\\mathcal{T_2}(x) = \\textit{dp}(k, n-x)$ æ˜¯ä¸€ä¸ªéšç€ $x$ çš„å¢åŠ è€Œå•è°ƒé€’å‡çš„å‡½æ•°ã€‚\n\nè¿™å¦‚ä½•å¸®åŠ©æˆ‘ä»¬æ¥ä¼˜åŒ–è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿå½“ $x$ å¢åŠ æ—¶ï¼Œ$\\mathcal{T_1}(x)$ å•è°ƒé€’å¢è€Œ $\\mathcal{T_2}(x)$ å•è°ƒé€’å‡ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³è±¡åœ¨ä¸€ä¸ªç›´è§’åæ ‡ç³»ä¸­ï¼Œæ¨ªåæ ‡ä¸º $x$ï¼Œçºµåæ ‡ä¸º $\\mathcal{T_1}(x)$ å’Œ $\\mathcal{T_2}(x)$ã€‚å½“ä¸€ä¸ªå‡½æ•°å•è°ƒé€’å¢è€Œå¦ä¸€ä¸ªå‡½æ•°å•è°ƒé€’å‡æ—¶ï¼Œæˆ‘ä»¬å¦‚ä½•æ‰¾åˆ°ä¸€ä¸ªä½ç½®ä½¿å¾—å®ƒä»¬çš„æœ€å¤§å€¼æœ€å°å‘¢ï¼Ÿ\n\n![fig1](https://assets.leetcode-cn.com/solution-static/887_fig1.jpg)\n\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå¦‚æœè¿™ä¸¤ä¸ªå‡½æ•°éƒ½æ˜¯è¿ç»­å‡½æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦æ‰¾å‡ºè¿™ä¸¤ä¸ªå‡½æ•°çš„äº¤ç‚¹ï¼Œåœ¨äº¤ç‚¹å¤„å°±èƒ½ä¿è¯è¿™ä¸¤ä¸ªå‡½æ•°çš„æœ€å¤§å€¼æœ€å°ã€‚ä½†åœ¨æœ¬é¢˜ä¸­ï¼Œ$\\mathcal{T_1}(x)$ å’Œ $\\mathcal{T_2}(x)$ éƒ½æ˜¯ç¦»æ•£å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ$x$ çš„å€¼åªèƒ½å– $1, 2, 3$ ç­‰ç­‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°æœ€å¤§çš„æ»¡è¶³ $\\mathcal{T_1}(x) < \\mathcal{T_2}(x)$ çš„ $x_0$ï¼Œä»¥åŠæœ€å°çš„æ»¡è¶³ $\\mathcal{T_1}(x) \\geq \\mathcal{T_2}(x)$ çš„ $x_1$ï¼Œå¯¹åº”åˆ°ä¸Šå›¾ä¸­ï¼Œå°±æ˜¯ç¦»è¿™ä¸¤ä¸ªå‡½æ•°ï¼ˆæƒ³è±¡ä¸­çš„ï¼‰äº¤ç‚¹å·¦å³ä¸¤ä¾§æœ€è¿‘çš„æ•´æ•°ã€‚\n\næˆ‘ä»¬åªéœ€è¦æ¯”è¾ƒåœ¨ $x_0$ å’Œ $x_1$ å¤„ä¸¤ä¸ªå‡½æ•°çš„æœ€å¤§å€¼ï¼Œå–ä¸€ä¸ªæœ€å°çš„ä½œä¸º $x$ å³å¯ã€‚åœ¨æ•°å­¦ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥è¯æ˜å‡º $x_0$ å’Œ $x_1$ ç›¸å·® $1$ï¼Œè¿™ä¹Ÿæ˜¯æ¯”è¾ƒæ˜¾ç„¶çš„ï¼Œå› ä¸ºå®ƒä»¬æ­£å¥½å¤¹ä½äº†é‚£ä¸ªæƒ³è±¡ä¸­çš„äº¤ç‚¹ï¼Œå¹¶ä¸”ç›¸è·å°½å¯èƒ½åœ°è¿‘ã€‚å› æ­¤æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾çš„æ–¹æ³•æ‰¾å‡º $x_0$ï¼Œå†å¾—åˆ° $x_1$ï¼š\n\n- æˆ‘ä»¬åœ¨æ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„ $x$ ä¸Šè¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ã€‚å¯¹äºçŠ¶æ€ $(k, n)$ è€Œè¨€ï¼Œ$x$ å³ä¸º $[1, n]$ ä¸­çš„ä»»ä¸€æ•´æ•°ï¼›\n\n- åœ¨äºŒåˆ†æŸ¥æ‰¾çš„è¿‡ç¨‹ä¸­ï¼Œå‡è®¾å½“å‰è¿™ä¸€æ­¥æˆ‘ä»¬æŸ¥æ‰¾åˆ°äº† $x_\\textit{mid}$ï¼Œå¦‚æœ $\\mathcal{T_1}(x_\\textit{mid}) > \\mathcal{T_2}(x_\\textit{mid})$ï¼Œé‚£ä¹ˆçœŸæ­£çš„ $x_0$ ä¸€å®šåœ¨ $x_\\textit{mid}$ çš„å·¦ä¾§ï¼Œå¦åˆ™çœŸæ­£çš„ $x_0$ åœ¨ $x_\\textit{mid}$ çš„å³ä¾§ã€‚\n\näºŒåˆ†æŸ¥æ‰¾çš„å†™æ³•å› äººè€Œå¼‚ï¼Œæœ¬è´¨ä¸Šæˆ‘ä»¬å°±æ˜¯éœ€è¦æ‰¾åˆ°æœ€å¤§çš„æ»¡è¶³ $\\mathcal{T_1}(x) < \\mathcal{T_2}(x)$ çš„ $x_0$ï¼Œæ ¹æ® $x_\\textit{mid}$ è¿›è¡ŒäºŒåˆ†è¾¹ç•Œçš„è°ƒæ•´ã€‚åœ¨å¾—åˆ°äº† $x_0$ åï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ $x_1$ å³ä¸º $x_0 + 1$ï¼Œæ­¤æ—¶æˆ‘ä»¬åªéœ€è¦æ¯”è¾ƒ $\\max(\\mathcal{T_1}(x_0), \\mathcal{T_2}(x_0))$ å’Œ $\\max(\\mathcal{T_1}(x_1), \\mathcal{T_2}(x_1))$ï¼Œå–è¾ƒå°çš„é‚£ä¸ªå¯¹åº”çš„ä½ç½®ä½œä¸º $x$ å³å¯ã€‚\n\nè¿™æ ·ä¸€æ¥ï¼Œå¯¹äºç»™å®šçš„çŠ¶æ€ $(k, n)$ï¼Œæˆ‘ä»¬åªéœ€è¦ $O(\\log n)$ çš„æ—¶é—´ï¼Œé€šè¿‡äºŒåˆ†æŸ¥æ‰¾å°±èƒ½å¾—åˆ°æœ€ä¼˜çš„é‚£ä¸ª $x$ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä» $O(kn^2)$ é™ä½è‡³ $O(kn \\log n)$ï¼Œå¯ä»¥é€šè¿‡æœ¬é¢˜ã€‚\n\n```Java [sol1-Java]\nclass Solution {\n    Map<Integer, Integer> memo = new HashMap<Integer, Integer>();\n\n    public int superEggDrop(int k, int n) {\n        return dp(k, n);\n    }\n\n    public int dp(int k, int n) {\n        if (!memo.containsKey(n * 100 + k)) {\n            int ans;\n            if (n == 0) {\n                ans = 0;\n            } else if (k == 1) {\n                ans = n;\n            } else {\n                int lo = 1, hi = n;\n                while (lo + 1 < hi) {\n                    int x = (lo + hi) / 2;\n                    int t1 = dp(k - 1, x - 1);\n                    int t2 = dp(k, n - x);\n\n                    if (t1 < t2) {\n                        lo = x;\n                    } else if (t1 > t2) {\n                        hi = x;\n                    } else {\n                        lo = hi = x;\n                    }\n                }\n\n                ans = 1 + Math.min(Math.max(dp(k - 1, lo - 1), dp(k, n - lo)), Math.max(dp(k - 1, hi - 1), dp(k, n - hi)));\n            }\n\n            memo.put(n * 100 + k, ans);\n        }\n\n        return memo.get(n * 100 + k);\n    }\n}\n```\n\n```Python [sol1-Python3]\nclass Solution:\n    def superEggDrop(self, k: int, n: int) -> int:\n        memo = {}\n        def dp(k, n):\n            if (k, n) not in memo:\n                if n == 0:\n                    ans = 0\n                elif k == 1:\n                    ans = n\n                else:\n                    lo, hi = 1, n\n                    # keep a gap of 2 x values to manually check later\n                    while lo + 1 < hi:\n                        x = (lo + hi) // 2\n                        t1 = dp(k - 1, x - 1)\n                        t2 = dp(k, n - x)\n\n                        if t1 < t2:\n                            lo = x\n                        elif t1 > t2:\n                            hi = x\n                        else:\n                            lo = hi = x\n\n                    ans = 1 + min(max(dp(k - 1, x - 1), dp(k, n - x))\n                                  for x in (lo, hi))\n\n                memo[k, n] = ans\n            return memo[k, n]\n\n        return dp(k, n)\n```\n\n```C++ [sol1-C++]\nclass Solution {\n    unordered_map<int, int> memo;\n    int dp(int k, int n) {\n        if (memo.find(n * 100 + k) == memo.end()) {\n            int ans;\n            if (n == 0) {\n                ans = 0;\n            } else if (k == 1) {\n                ans = n;\n            } else {\n                int lo = 1, hi = n;\n                while (lo + 1 < hi) {\n                    int x = (lo + hi) / 2;\n                    int t1 = dp(k - 1, x - 1);\n                    int t2 = dp(k, n - x);\n\n                    if (t1 < t2) {\n                        lo = x;\n                    } else if (t1 > t2) {\n                        hi = x;\n                    } else {\n                        lo = hi = x;\n                    }\n                }\n\n                ans = 1 + min(max(dp(k - 1, lo - 1), dp(k, n - lo)),\n                                   max(dp(k - 1, hi - 1), dp(k, n - hi)));\n            }\n\n            memo[n * 100 + k] = ans;\n        }\n\n        return memo[n * 100 + k];\n    }\npublic:\n    int superEggDrop(int k, int n) {\n        return dp(k, n);\n    }\n};\n```\n\n**å¤æ‚åº¦åˆ†æ**\n\n* æ—¶é—´å¤æ‚åº¦ï¼š$O(kn \\log n)$ã€‚æˆ‘ä»¬éœ€è¦è®¡ç®— $O(kn)$ ä¸ªçŠ¶æ€ï¼Œæ¯ä¸ªçŠ¶æ€è®¡ç®—æ—¶éœ€è¦ $O(\\log n)$ çš„æ—¶é—´è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ã€‚\n\n* ç©ºé—´å¤æ‚åº¦ï¼š$O(kn)$ã€‚æˆ‘ä»¬éœ€è¦ $O(kn)$ çš„ç©ºé—´å­˜å‚¨æ¯ä¸ªçŠ¶æ€çš„è§£ã€‚\n\n#### æ–¹æ³•äºŒï¼šå†³ç­–å•è°ƒæ€§\n\n**è¯´æ˜**\n\næ–¹æ³•äºŒæ¶‰åŠå†³ç­–å•è°ƒæ€§ï¼Œæ˜¯ç«èµ›ä¸­çš„è€ƒç‚¹ã€‚è¿™é‡Œæˆ‘ä»¬ä¸ä¼šå™è¿° **ä½•ä¸ºå†³ç­–å•è°ƒæ€§** ä»¥åŠ **å¦‚ä½•æ ¹æ®å†³ç­–å•è°ƒæ€§å†™å‡ºä¼˜åŒ–çš„åŠ¨æ€è§„åˆ’**ï¼Œè€Œæ˜¯ä»…æŒ‡å‡ºå†³ç­–å•è°ƒæ€§çš„å­˜åœ¨æ€§ã€‚\n\n**æ€è·¯**\n\næˆ‘ä»¬é‡æ–°å†™ä¸‹æ–¹æ³•ä¸€ä¸­çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š\n\n$$\ndp(k, n) = 1 + \\min\\limits_{1 \\leq x \\leq n} \\Big( \\max(dp(k-1, x-1), dp(k, n-x)) \\Big)\n$$\n\nå¹¶ä¸”å‡è®¾ $x_\\textit{opt}$ æ˜¯ä½¿å¾— $dp(k, n)$ å–åˆ°æœ€ä¼˜å€¼çš„æœ€å°å†³ç­–ç‚¹ $x_0$ã€‚\n\n$$\nx_\\textit{opt} = \\arg \\min\\limits_{1 \\leq x \\leq n} \\Big( \\max(dp(k-1, x-1), dp(k, n-x)) \\Big)\n$$\n\nåœ¨æ–¹æ³•ä¸€ä¸­ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡äºŒåˆ†æŸ¥æ‰¾çš„æ–¹æ³•ï¼Œæ‰¾åˆ° $x_0$ å’Œ $x_1$ ä¸­æœ€ä¼˜çš„ä½œä¸º $x_\\textit{opt}$ çš„ï¼Œé‚£ä¹ˆè¿˜æœ‰ä»€ä¹ˆæ›´å¥½çš„æ–¹æ³•å—ï¼Ÿ\n\næˆ‘ä»¬å›ºå®š $k$ï¼Œéšç€ $n$ çš„å¢åŠ ï¼Œå¯¹äºçŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸­ $dp(k-1, x-1)$ è¿™ä¸€é¡¹ï¼Œå®ƒçš„å€¼æ˜¯ä¸å˜çš„ï¼Œå› ä¸ºå®ƒå’Œ $n$ æ— å…³ã€‚è€Œå¯¹äºçŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸­ $dp(k, n-x)$ è¿™ä¸€é¡¹ï¼Œéšç€ $n$ çš„å¢åŠ ï¼Œå®ƒçš„å€¼ä¹Ÿä¼šå¢åŠ ã€‚åœ¨æ–¹æ³•ä¸€ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“ $dp(k-1, x-1)$ éšç€ $x$ å•è°ƒé€’å¢ï¼Œè€Œ $dp(k, n-x)$ éšç€ $x$ å•è°ƒé€’å‡ï¼Œé‚£ä¹ˆå½“ $n$ å¢åŠ æ—¶ï¼Œ$dp(k, n-x)$ å¯¹åº”çš„å‡½æ•°æŠ˜çº¿å›¾åœ¨æ¯ä¸ªæ•´æ•°ç‚¹ä¸Šéƒ½æ˜¯å¢åŠ çš„ï¼Œå› æ­¤åœ¨ $dp(k-1, x-1)$ ä¸å˜çš„æƒ…å†µä¸‹ï¼Œ$x_\\textit{opt}$ æ˜¯å•è°ƒé€’å¢çš„ã€‚\n\næˆ‘ä»¬å¯ä»¥æƒ³è±¡ä¸€æ¡æ–œç‡ä¸ºè´Ÿçš„ç›´çº¿å’Œä¸€æ¡æ–œç‡ä¸ºæ­£çš„ç›´çº¿ï¼Œå½“æ–œç‡ä¸ºè´Ÿçš„ç›´çº¿ï¼ˆç±»æ¯” $dp(k, n-x)$ï¼‰å‘ä¸Šå¹³ç§»ï¼ˆç±»æ¯” $n$ çš„å¢åŠ ï¼‰æ—¶ï¼Œå®ƒå’Œæ–œç‡ä¸ºæ­£çš„ç›´çº¿ï¼ˆç±»æ¯” $dp(k-1, x-1)$ï¼‰çš„äº¤ç‚¹ä¼šä¸€ç›´å‘å³ç§»åŠ¨ï¼Œè¿™ä¸ªäº¤ç‚¹å°±ç¡®å®šäº† $x_\\textit{opt}$ï¼Œè¿™ä¸æ–¹æ³•ä¸€ä¹Ÿæ˜¯ä¸€è‡´çš„ã€‚\n\nå› æ­¤å½“æˆ‘ä»¬å›ºå®š $k$ æ—¶ï¼Œéšç€ $n$ çš„å¢åŠ ï¼Œ$dp(k, n)$ å¯¹åº”çš„æœ€ä¼˜è§£çš„åæ ‡ $x_\\textit{opt}$ å•è°ƒé€’å¢ï¼Œè¿™æ ·ä¸€æ¥æ¯ä¸ª $dp(k, n)$ çš„å‡æ‘Šæ—¶é—´å¤æ‚åº¦ä¸º $O(1)$ã€‚\n\n```Java [sol2-Java]\nclass Solution {\n    public int superEggDrop(int k, int n) {\n        // Right now, dp[i] represents dp(1, i)\n        int[] dp = new int[n + 1];\n        for (int i = 0; i <= n; ++i) {\n            dp[i] = i;\n        }\n\n        for (int j = 2; j <= k; ++j) {\n            // Now, we will develop dp2[i] = dp(j, i)\n            int[] dp2 = new int[n + 1];\n            int x = 1;\n            for (int m = 1; m <= n; ++m) {\n                // Let's find dp2[m] = dp(j, m)\n                // Increase our optimal x while we can make our answer better.\n                // Notice max(dp[x-1], dp2[m-x]) > max(dp[x], dp2[m-x-1])\n                // is simply max(T1(x-1), T2(x-1)) > max(T1(x), T2(x)).\n                while (x < m && Math.max(dp[x - 1], dp2[m - x]) > Math.max(dp[x], dp2[m - x - 1])) {\n                    x++;\n                }\n\n                // The final answer happens at this x.\n                dp2[m] = 1 + Math.max(dp[x - 1], dp2[m - x]);\n            }\n\n            dp = dp2;\n        }\n\n        return dp[n];\n    }\n}\n```\n\n```Python [sol2-Python3]\nclass Solution:\n    def superEggDrop(self, k: int, n: int) -> int:\n        # Right now, dp[i] represents dp(1, i)\n        dp = list(range(n + 1))\n        dp2 = [0] * (n + 1)\n        for k in range(2, k + 1):\n            # Now, we will develop dp2[i] = dp(j, i)\n            x = 1\n            for m in range(1, n + 1):\n                # Let's find dp2[m] = dp(j, m)\n                # Increase our optimal x while we can make our answer better.\n                # Notice max(dp[x-1], dp2[m-x]) > max(dp[x], dp2[m-x-1])\n                # is simply max(T1(x-1), T2(x-1)) > max(T1(x), T2(x)).\n                while x < m and max(dp[x - 1], dp2[m - x]) >= max(dp[x], dp2[m - x - 1]):\n                    x += 1\n\n                # The final answer happens at this x.\n                dp2[m] = 1 + max(dp[x - 1], dp2[m - x])\n\n            dp = dp2[:]\n\n        return dp[-1]\n```\n\n```C++ [sol2-C++]\nclass Solution {\npublic:\n    int superEggDrop(int k, int n) {\n        int dp[n + 1];\n        for (int i = 0; i <= n; ++i) {\n            dp[i] = i;\n        }\n\n        for (int j = 2; j <= k; ++j) {\n            int dp2[n + 1];\n            int x = 1; \n            dp2[0] = 0;\n            for (int m = 1; m <= n; ++m) {\n                while (x < m && max(dp[x - 1], dp2[m - x]) >= max(dp[x], dp2[m - x - 1])) {\n                    x++;\n                }\n                dp2[m] = 1 + max(dp[x - 1], dp2[m - x]);\n            }\n            for (int m = 1; m <= n; ++m) {\n                dp[m] = dp2[m];\n            }\n        }\n        return dp[n];\n    }\n};\n```\n\n**å¤æ‚åº¦åˆ†æ**\n\n* æ—¶é—´å¤æ‚åº¦ï¼š$O(kn)$ã€‚æˆ‘ä»¬éœ€è¦è®¡ç®— $O(kn)$ ä¸ªçŠ¶æ€ï¼ŒåŒæ—¶å¯¹äºæ¯ä¸ª $k$ï¼Œæœ€ä¼˜è§£æŒ‡é’ˆåªä¼šä» $0$ åˆ° $n$ èµ°ä¸€æ¬¡ï¼Œå¤æ‚åº¦ä¹Ÿæ˜¯ $O(kn)$ã€‚å› æ­¤æ€»ä½“å¤æ‚åº¦ä¸º $O(kn)$ã€‚\n\n* ç©ºé—´å¤æ‚åº¦ï¼š$O(n)$ã€‚å› ä¸º $\\textit{dp}$ æ¯ä¸€å±‚çš„è§£åªä¾èµ–äºä¸Šä¸€å±‚çš„è§£ï¼Œå› æ­¤æˆ‘ä»¬æ¯æ¬¡åªä¿ç•™ä¸€å±‚çš„è§£ï¼Œéœ€è¦çš„ç©ºé—´å¤æ‚åº¦ä¸º $O(n)$ã€‚\n\n#### æ–¹æ³•ä¸‰ï¼šæ•°å­¦æ³•\n\n**è¯´æ˜**\n\næ–¹æ³•ä¸‰æ¶‰åŠé€†å‘æ€ç»´ï¼Œæ˜¯ä¸€ç§æ²¡è§è¿‡å°±ä¸å¤ªå¯èƒ½æƒ³å‡ºæ¥ï¼Œè¯»è¿‡é¢˜è§£ä¹Ÿå¾ˆå®¹æ˜“å¿˜è®°çš„æ–¹æ³•ã€‚\n\n**æ€è·¯**\n\nåè¿‡æ¥æƒ³è¿™ä¸ªé—®é¢˜ï¼šå¦‚æœæˆ‘ä»¬å¯ä»¥åš $t$ æ¬¡æ“ä½œï¼Œè€Œä¸”æœ‰ $k$ ä¸ªé¸¡è›‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬èƒ½æ‰¾åˆ°ç­”æ¡ˆçš„æœ€é«˜çš„ $n$ æ˜¯å¤šå°‘ï¼Ÿæˆ‘ä»¬è®¾ $f(t, k)$ ä¸ºåœ¨ä¸Šè¿°æ¡ä»¶ä¸‹çš„ $n$ã€‚å¦‚æœæˆ‘ä»¬æ±‚å‡ºäº†æ‰€æœ‰çš„ $f(t, k)$ï¼Œé‚£ä¹ˆåªéœ€è¦æ‰¾å‡ºæœ€å°çš„æ»¡è¶³ $f(t, k) \\geq n$ çš„ $t$ã€‚\n\né‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•æ±‚å‡º $f(t, k)$ å‘¢ï¼Ÿæˆ‘ä»¬è¿˜æ˜¯ä½¿ç”¨åŠ¨æ€è§„åˆ’ã€‚å› ä¸ºæˆ‘ä»¬éœ€è¦æ‰¾å‡ºæœ€é«˜çš„ $n$ï¼Œå› æ­¤æˆ‘ä»¬ä¸å¿…æ€è€ƒåˆ°åº•åœ¨å“ªé‡Œæ‰”è¿™ä¸ªé¸¡è›‹ï¼Œæˆ‘ä»¬åªéœ€è¦æ‰”å‡ºä¸€ä¸ªé¸¡è›‹ï¼Œçœ‹çœ‹åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼š\n\n- å¦‚æœé¸¡è›‹æ²¡æœ‰ç¢ï¼Œé‚£ä¹ˆå¯¹åº”çš„æ˜¯ $f(t - 1, k)$ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨è¿™ä¸€å±‚çš„ä¸Šæ–¹å¯ä»¥æœ‰ $f(t - 1, k)$ å±‚ï¼›\n\n- å¦‚æœé¸¡è›‹ç¢äº†ï¼Œé‚£ä¹ˆå¯¹åº”çš„æ˜¯ $f(t - 1, k - 1)$ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨è¿™ä¸€å±‚çš„ä¸‹æ–¹å¯ä»¥æœ‰ $f(t - 1ï¼Œ k - 1)$ å±‚ã€‚\n\nå› æ­¤æˆ‘ä»¬å°±å¯ä»¥å†™å‡ºçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š\n\n$$\nf(t, k) = 1 + f(t-1, k-1) + f(t-1, k)\n$$\n\nè¾¹ç•Œæ¡ä»¶ä¸ºï¼šå½“ $t \\geq 1$ çš„æ—¶å€™ $f(t, 1) = t$ï¼Œå½“ $k \\geq 1$ æ—¶ï¼Œ$f(1, k) = 1$ã€‚\n\né‚£ä¹ˆé—®é¢˜æ¥äº†ï¼š**$t$ æœ€å¤§å¯ä»¥è¾¾åˆ°å¤šå°‘**ï¼Ÿç”±äºæˆ‘ä»¬åœ¨è¿›è¡ŒåŠ¨æ€è§„åˆ’æ—¶ï¼Œ$t$ åœ¨é¢˜ç›®ä¸­å¹¶æ²¡æœ‰ç»™å‡ºï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦è¿›è¡Œåˆ°åŠ¨æ€è§„åˆ’çš„å“ªä¸€æ­¥å‘¢ï¼Ÿå¯ä»¥å‘ç°ï¼Œæ“ä½œæ¬¡æ•°æ˜¯ä¸€å®šä¸ä¼šè¶…è¿‡æ¥¼å±‚æ•°çš„ï¼Œå› æ­¤ $t \\leq n$ï¼Œæˆ‘ä»¬åªè¦ç®—å‡ºåœ¨ $f(n, k)$ å†…çš„æ‰€æœ‰ $f$ å€¼å³å¯ã€‚\n\n```Java [sol3-Java]\nclass Solution {\n    public int superEggDrop(int k, int n) {\n        if (n == 1) {\n            return 1;\n        }\n        int[][] f = new int[n + 1][k + 1];\n        for (int i = 1; i <= k; ++i) {\n            f[1][i] = 1;\n        }\n        int ans = -1;\n        for (int i = 2; i <= n; ++i) {\n            for (int j = 1; j <= k; ++j) {\n                f[i][j] = 1 + f[i - 1][j - 1] + f[i - 1][j];\n            }\n            if (f[i][k] >= n) {\n                ans = i;\n                break;\n            }\n        }\n        return ans;\n    }\n}\n```\n\n```Python [sol3-Python3]\nclass Solution:\n    def superEggDrop(self, k: int, n: int) -> int:\n        if n == 1:\n            return 1\n        f = [[0] * (k + 1) for _ in range(n + 1)]\n        for i in range(1, k + 1):\n            f[1][i] = 1\n        ans = -1\n        for i in range(2, n + 1):\n            for j in range(1, k + 1):\n                f[i][j] = 1 + f[i - 1][j - 1] + f[i - 1][j]\n            if f[i][k] >= n:\n                ans = i\n                break\n        return ans\n```\n\n```C++ [sol3-C++]\nclass Solution {\npublic:\n    int superEggDrop(int k, int n) {\n        if (n == 1) {\n            return 1;\n        }\n        vector<vector<int>> f(n + 1, vector<int>(k + 1));\n        for (int i = 1; i <= k; ++i) {\n            f[1][i] = 1;\n        }\n        int ans = -1;\n        for (int i = 2; i <= n; ++i) {\n            for (int j = 1; j <= k; ++j) {\n                f[i][j] = 1 + f[i - 1][j - 1] + f[i - 1][j];\n            }\n            if (f[i][k] >= n) {\n                ans = i;\n                break;\n            }\n        }\n        return ans;\n    }\n};\n```\n\n**å¤æ‚åº¦åˆ†æ**\n\n* æ—¶é—´å¤æ‚åº¦ï¼š$O(kn)$ã€‚äº‹å®ä¸Šï¼Œæ›´å‡†ç¡®çš„æ—¶é—´å¤æ‚åº¦åº”å½“ä¸º $O(kt)$ï¼Œæˆ‘ä»¬ä¸åŠ è¯æ˜åœ°ç»™å‡º $n = O(t^k)$ï¼Œå› æ­¤æœ‰ $O(kt) = O(k\\sqrt[k]{n})$ã€‚\n\n* ç©ºé—´å¤æ‚åº¦ï¼š$O(kn)$ã€‚",
      "createdAt": "2020-04-11T03:16:01.623297+00:00",
      "hitCount": 83297,
      "identifier": "IoCZp1",
      "isEditorsPick": false,
      "isMostPopular": false,
      "isMyFavorite": false,
      "next": {
        "__typename": "BriefSolutionNode",
        "slug": "887-by-ikaruga",
        "title": "ã€é¸¡è›‹æ‰è½ã€‘5 è¡Œä»£ç ï¼Œä»æ±‚æ‰”å‡ æ¬¡å˜ä¸ºæ±‚å¤šå°‘å±‚æ¥¼ =é™„é¢è¯•ç»å†="
      },
      "position": 1,
      "prev": null,
      "question": {
        "__typename": "QuestionNode",
        "questionTitleSlug": "super-egg-drop"
      },
      "reactionType": null,
      "reactionsV2": [
        {
          "__typename": "ReactionCountNode",
          "count": 78,
          "reactionType": "UPVOTE"
        },
        {
          "__typename": "ReactionCountNode",
          "count": 7,
          "reactionType": "AWESOME"
        },
        {
          "__typename": "ReactionCountNode",
          "count": 5,
          "reactionType": "CONFUSED"
        },
        {
          "__typename": "ReactionCountNode",
          "count": 1,
          "reactionType": "THUMBS_DOWN"
        }
      ],
      "rewardEnabled": null,
      "slug": "ji-dan-diao-luo-by-leetcode-solution-2",
      "status": "PUBLISHED",
      "summary": "ğŸ“º è§†é¢‘é¢˜è§£ ğŸ“– æ–‡å­—é¢˜è§£ å‰è¨€ æœ¬é¢˜æ˜¯è°·æ­Œçš„ä¸€é“ç»å…¸é¢è¯•é¢˜ã€‚ç”±äºæœ¬é¢˜è¿‡äºç»å…¸ï¼Œè°·æ­Œå…¬å¸å·²ç»ä¸å†å°†è¿™é¢˜ä½œä¸ºé¢è¯•çš„å€™é€‰é¢˜ç›®äº†ã€‚ æœ¬é¢˜éš¾åº¦è¾ƒé«˜ï¼Œè¦æƒ³é€šè¿‡æœ¬é¢˜ï¼Œéœ€è¦ä¸€å®šçš„åŠ¨æ€è§„åˆ’ä¼˜åŒ–æˆ–æ•°å­¦åŠŸåº•ã€‚æœ¬é¢˜çš„æ ‡å‡†è§£æ³•ä¸ºåŠ¨æ€è§„åˆ’ï¼Œç”±äºç¯‡å¹…æœ‰é™ï¼Œä¸ä¼šå™è¿° åŠ¨æ€è§„åˆ’çš„è¾¹ç•Œæ¡ä»¶ã€è‡ªåº•å‘ä¸Šçš„åŠ¨æ€è§„åˆ’å’Œè‡ªé¡¶å‘ä¸‹çš„åŠ¨æ€è§„åˆ’åˆ†åˆ«æ€ä¹ˆå®ç° ç­‰è¾ƒä¸ºåŸºç¡€",
      "sunk": false,
      "tags": [
        {
          "__typename": "CommonTagNode",
          "name": "Math",
          "nameTranslated": "æ•°å­¦",
          "slug": "math",
          "tagType": "TOPIC"
        },
        {
          "__typename": "CommonTagNode",
          "name": "Binary Search",
          "nameTranslated": "äºŒåˆ†æŸ¥æ‰¾",
          "slug": "binary-search",
          "tagType": "TOPIC"
        },
        {
          "__typename": "CommonTagNode",
          "name": "Dynamic Programming",
          "nameTranslated": "åŠ¨æ€è§„åˆ’",
          "slug": "dynamic-programming",
          "tagType": "TOPIC"
        },
        {
          "__typename": "CommonTagNode",
          "name": "C++",
          "nameTranslated": "",
          "slug": "cpp",
          "tagType": "LANGUAGE"
        },
        {
          "__typename": "CommonTagNode",
          "name": "Java",
          "nameTranslated": "",
          "slug": "java",
          "tagType": "LANGUAGE"
        },
        {
          "__typename": "CommonTagNode",
          "name": "Python",
          "nameTranslated": "",
          "slug": "python",
          "tagType": "LANGUAGE"
        }
      ],
      "thumbnail": "https://assets.leetcode-cn.com/solution-static/887_fig1.jpg",
      "title": "é¸¡è›‹æ‰è½",
      "topic": {
        "__typename": "TopicNode",
        "commentCount": 104,
        "id": 197163,
        "viewCount": 50456
      },
      "uuid": "IoCZp1",
      "videosInfo": [
        {
          "__typename": "VideoInfoNode",
          "coverUrl": "https://video.leetcode-cn.com/image/cover/60CD64143ED0418F858DCA6EBB70B29F-6-2.png",
          "duration": 310.912,
          "videoId": "553d08569add488799628a6a4ae6e432"
        }
      ]
    }
  }
}
