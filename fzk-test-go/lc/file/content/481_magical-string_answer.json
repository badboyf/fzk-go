{
  "data": {
    "solutionArticle": {
      "__typename": "SolutionArticleNode",
      "author": {
        "__typename": "UserNode",
        "profile": {
          "__typename": "UserProfileNode",
          "realName": "æå®¢å­¦é•¿Bravo",
          "userAvatar": "https://assets.leetcode-cn.com/aliyun-lc-upload/users/yanglr/avatar_1627565453.png",
          "userSlug": "yanglr"
        },
        "username": "yanglr"
      },
      "byLeetcode": false,
      "canEdit": false,
      "canEditReward": false,
      "canSee": true,
      "chargeType": "FREE",
      "content": "\r\n> æ¬¢è¿å¤§å®¶å…³æ³¨æˆ‘çš„LeetCodeä»£ç ä»“åº“ï¼š[https://github.com/yanglr/leetcode-ac](https://github.com/yanglr/leetcode-ac), \r\n>\r\n> æ‰€æœ‰ä»£ç (å«æœ‰å„ç§ä¸»æµè¯­è¨€åŠShellã€SQLç­‰)å·²ä¸Šä¼ åˆ°æ­¤ä»“åº“ã€‚\r\n>\r\n> ç›®å‰å·²å®Œæˆçš„**450é“**é¢˜éƒ½æœ‰å®Œæ•´ç‰ˆC++ä»£ç ã€‚\r\n\r\n### å‡ ä¹æ‰€æœ‰é¢˜ç›®éƒ½ä¼šè¿½æ±‚ä¸€é¢˜å¤šè§£å’Œæœ€ä¼˜è§£æ³•ï¼ŒçœŸè¯šæ±‚starï¼\r\n\r\n![image.png](https://pic.leetcode-cn.com/1633757997-CmItuK-image.png)\r\n\r\n\r\n## è§£é¢˜æ€è·¯\r\n\r\n**é¢˜æ„**: è¾“å…¥nï¼Œç»Ÿè®¡ç¥å¥‡å­—ç¬¦ä¸²çš„å‰nä¸ªå­—ç¬¦ä¸­1çš„ä¸ªæ•°ã€‚\r\n\r\n\r\n~~**é”™è§‰**~~~: ç¥å¥‡å­—ç¬¦ä¸²æ€»æ˜¯èƒ½åœ¨å¶æ•°ä½ç½®(indexä¸ºå¥‡æ•°)å¤„ä½¿å¾—åœ¨å®ƒåŠå®ƒä¹‹å‰èŒƒå›´çš„å­—ç¬¦ä¸²ä¸­1å’Œ2çš„æ•°é‡ç›¸ç­‰ã€‚\r\n\r\n\r\nå…¶ä¸­ç¥å¥‡å­—ç¬¦ä¸²çš„å®šä¹‰:\r\na.ç¥å¥‡å­—ç¬¦ä¸² s ä»…ç”± '1' å’Œ '2' ç»„æˆ;\r\nb.ç¥å¥‡å­—ç¬¦ä¸²éµå®ˆå¦‚ä¸‹è§„åˆ™ï¼šç¥å¥‡å­—ç¬¦ä¸² s çš„ç¥å¥‡ä¹‹å¤„åœ¨äºï¼Œä¸²è”å­—ç¬¦ä¸²ä¸­ '1' å’Œ '2' çš„è¿ç»­å‡ºç°æ¬¡æ•°å¯ä»¥ç”Ÿæˆè¯¥å­—ç¬¦ä¸²ã€‚\r\n\r\næ¯”å¦‚:\r\ns çš„å‰å‡ ä¸ªå…ƒç´ æ˜¯ s = \"1221121221221121122â€¦â€¦\" ã€‚å¦‚æœå°† s ä¸­è¿ç»­çš„è‹¥å¹² 1 å’Œ 2 è¿›è¡Œåˆ†ç»„ï¼Œå¯ä»¥å¾—åˆ° \"1 22 11 2 1 22 1 22 11 2 11 22 ......\" ã€‚æ¯ç»„ä¸­ 1 æˆ–è€… 2 çš„å‡ºç°æ¬¡æ•°åˆ†åˆ«æ˜¯ \"1 2 2 1 1 2 1 2 2 1 2 2 ......\" ã€‚ä¸Šé¢çš„å‡ºç°æ¬¡æ•°æ­£æ˜¯ s è‡ªèº«ã€‚\r\n\r\n<br>\r\n\r\n**ç¥å¥‡å­—ç¬¦ä¸²:**\r\n\r\n\r\n```plain\r\n122 112 122 122 112 112 221 212 212...\r\n```\r\n\r\nå‰20åˆ—æ˜¯é¢˜ç›®ç»™çš„~\r\n\r\n\r\n\r\n### è§„å¾‹:\r\n\r\nå­—ç¬¦ä¸²strä¸å…¶å­ä¸²p, å­—ç¬¦ä¸²strå¯ä»¥æ ¹æ®å­—ç¬¦ä¸²pæ¥è¿›è¡Œæ‰©å±•(**æ‰©å±•çš„è§„åˆ™**æ˜¯: æ–°åŠ å…¥çš„éƒ¨åˆ†æ˜¯ç”±å½“å‰å­—ç¬¦ä¸²strçš„æœ«å°¾æ•°å­—åè½¬è€Œæ¥(å³ 1 => 2, 2 => 1))ï¼Œè¯¥æ•°å­—çš„é‡å¤æ¬¡æ•°ä»å­—ç¬¦ä¸²pä¸­å–å¾—ã€‚\r\n\r\nä¸€å¼€å§‹è¾ƒçŸ­å’Œè¾ƒé•¿å­—ç¬¦ä¸²éƒ½ç½®ä¸º\"122\", i æŒ‡å‘å­—ç¬¦ä¸²pçš„æœ«å°¾ã€‚\r\n\r\nå­—ç¬¦ä¸²på¯ä»¥çœ‹æˆæ˜¯å­—ç¬¦ä¸²strçš„å‹ç¼©å½¢å¼(åªå­˜äº†æœªæ¥æ–°åŠ å…¥çš„æ•°å­—åº”è¯¥å‡ºç°çš„æ¬¡æ•°)ã€‚\r\n\r\nå­—ç¬¦ä¸²p: æ¯æ¬¡ä»å­—ç¬¦ä¸²strä¸­index = i çš„åœ°æ–¹å¤åˆ¶ä¸€ä¸ªæ•°å­—æ’å…¥åˆ°å­—ç¬¦ä¸²pçš„æœ«å°¾ã€‚è¿™ä¸ªæ•°å­—å°±æ˜¯åé¢å­—ç¬¦ä¸²strä¸­æ–°åŠ å…¥çš„æ•°å­—åº”è¯¥å‡ºç°çš„æ¬¡æ•°ï¼Œä¸”è¿™ä¸ªæ–°åŠ å…¥çš„æ•°å­— = å½“å‰å­—ç¬¦ä¸²strçš„æœ«å°¾æ•°å­—åè½¬è€Œæ¥(å³ 1 => 2, 2 => 1) ã€‚\r\n\r\n**è‰å›¾å¦‚ä¸‹:**\r\n\r\n<br/>\r\n\r\n![image.png](https://pic.leetcode-cn.com/1633757208-iwBUxt-image.png)\r\n\r\n\r\n**æ³¨**: ä¸Šå›¾ä¸­**æ¯ä¸¤è¡Œ**(ç¬¬1è¡Œæ˜¯å­—ç¬¦ä¸²str, ç¬¬2è¡Œæ˜¯å­—ç¬¦ä¸²p, pæ˜¯strçš„å­ä¸²)æ˜¯å­—ç¬¦ä¸²strçš„1æ¬¡æ‰©å±•, ç¬¬2æ¬¡å’Œç¬¬3æ¬¡æ‰©å±•åˆå¹¶åœ¨ä¸€ä¸ªåœ°æ–¹ç”»äº†, å…¶ä»–æ¬¡çš„æ‰©å±•éƒ½å¦èµ·ä¸¤è¡Œè¡¨ç¤ºäº†ã€‚\r\n\r\n***\r\n\r\n### ç®—æ³•æ­¥éª¤:\r\n\r\n- æ„é€ ä¸¤ä¸ªé•¿åº¦åœ¨å¢é•¿çš„å­—ç¬¦ä¸², ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«æŒ‡å‘è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²æœ«å°¾, i æŒ‡å‘è¾ƒçŸ­çš„å­—ç¬¦ä¸²æœ«å°¾\r\n- æ¥ä¸‹æ¥åœ¨å­—ç¬¦ä¸²stræœ«å°¾åŠ å­—ç¬¦æ¥æ‰©å±•å®ƒ\r\n\r\n- ä¸€å¼€å§‹è¾ƒçŸ­å’Œè¾ƒé•¿å­—ç¬¦ä¸²éƒ½ç½®ä¸º\"122\", i æŒ‡å‘è¾ƒçŸ­çš„å­—ç¬¦ä¸²æœ«å°¾\r\n- å¯¹å­—ç¬¦ä¸²str è¿›è¡Œæ‰©å±•ï¼Œç›´åˆ° str.size() >= n ä½ç½®ã€‚\r\n\r\n\r\n\r\n## å·²ACçš„C++ ä»£ç \r\n\r\n```C++\r\nclass Solution {\r\npublic:\r\n    int magicalString(int n) {\r\n        if (n <= 3) return 1;                  \r\n        // æ„é€ ä¸¤ä¸ªé•¿åº¦åœ¨å¢é•¿çš„å­—ç¬¦ä¸², ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«æŒ‡å‘è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²æœ«å°¾, iæŒ‡å‘è¾ƒçŸ­çš„å­—ç¬¦ä¸²æœ«å°¾\r\n        string str = \"122\"; // æ¥ä¸‹æ¥åœ¨å­—ç¬¦ä¸²stræœ«å°¾åŠ æ•°å­—æ¥æ‰©å±•å®ƒ\r\n        int i = 2; // ä¸€å¼€å§‹è¾ƒçŸ­å’Œè¾ƒé•¿å­—ç¬¦ä¸²éƒ½ç½®ä¸º\"122\", iæŒ‡å‘è¾ƒçŸ­çš„å­—ç¬¦ä¸²æœ«å°¾\r\n        while (str.size() < n)\r\n        {\r\n            char lastCh = str.back();\r\n            if (str[i] == '1') // æ–°æ’å…¥åˆ°æœ«å°¾çš„å­—ç¬¦(digit)éœ€å‡ºç°1æ¬¡\r\n            {\r\n                if (lastCh == '1') str.append(\"2\");\r\n                else str.append(\"1\");                \r\n            }\r\n            else {             // æ–°æ’å…¥åˆ°æœ«å°¾çš„å­—ç¬¦(digit)éœ€å‡ºç°2æ¬¡\r\n                if (lastCh == '1') str.append(\"22\");\r\n                else str.append(\"11\");\r\n            }            \r\n            i++;\r\n        }        \r\n        int count1 = count(str.begin(), str.begin() + n, '1'); /* ä½¿ç”¨str.begin() + n, è€Œä¸æ˜¯str.end()çš„åŸå› æ˜¯: æ­¤æ—¶str.size()å¯èƒ½ > n */\r\n        return count1;\r\n    }\r\n};\r\n```\r\n\r\n### è¿è¡Œç»“æœ:\r\n\r\n![image.png](https://pic.leetcode-cn.com/1633757241-DAcPRC-image.png)\r\n\r\næ‰§è¡Œç”¨æ—¶ï¼š4 ms, åœ¨æ‰€æœ‰ C++ æäº¤ä¸­å‡»è´¥äº† **91.67% **çš„ç”¨æˆ·\r\nå†…å­˜æ¶ˆè€—ï¼š7.5 MB, åœ¨æ‰€æœ‰ C++ æäº¤ä¸­å‡»è´¥äº†64.22%çš„ç”¨æˆ·\r\n\r\n<br>\r\n\r\næˆ– \r\n\r\n### æœ«å°¾æ‰‹å†™è®¡æ•°å™¨\r\n\r\n\r\n```cpp\r\nclass Solution {\r\npublic:\r\n    int magicalString(int n) {\r\n        if (n <= 3) return 1;       \r\n        // æ„é€ ä¸¤ä¸ªé•¿åº¦åœ¨å¢é•¿çš„å­—ç¬¦ä¸², ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«æŒ‡å‘è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²æœ«å°¾, iæŒ‡å‘è¾ƒçŸ­çš„å­—ç¬¦ä¸²æœ«å°¾\r\n        string str = \"122\"; // æ¥ä¸‹æ¥åœ¨å­—ç¬¦ä¸²stræœ«å°¾åŠ å­—ç¬¦æ¥æ‰©å±•å®ƒ\r\n        int i = 2; // ä¸€å¼€å§‹è¾ƒçŸ­å’Œè¾ƒé•¿å­—ç¬¦ä¸²éƒ½ç½®ä¸º\"122\", iæŒ‡å‘è¾ƒçŸ­çš„å­—ç¬¦ä¸²æœ«å°¾\r\n        while (str.size() < n)\r\n        {\r\n            char lastCh = str.back();\r\n            if (str[i] == '1')\r\n            {\r\n                if (lastCh == '1') str.append(\"2\");\r\n                else str.append(\"1\");                \r\n            }\r\n            else {                \r\n                if (lastCh == '1') str.append(\"22\");\r\n                else str.append(\"11\");\r\n            }            \r\n            i++;\r\n        }        \r\n        int count1 = 0;\r\n        for (int i = 0; i < n; i++)\r\n            if (str[i] == '1') count1++;\r\n        return count1;\r\n    }\r\n};\r\n```\r\n\r\n\r\n<br/>\r\n\r\n\r\nå¤§å®¶å¥½ï¼Œæˆ‘æ˜¯**æå®¢å­¦é•¿**ï¼Œç‚¹å‡»[æˆ‘çš„å¤´åƒ](https://github.com/yanglr/leetcode-ac)ï¼ŒæŸ¥çœ‹åŠ›æ‰£è¯¦ç»†åˆ·é¢˜æ”»ç•¥ï¼Œä½ ä¼šå‘ç°ç›¸è§æ¨æ™šï¼\r\n\r\n\r\n**å¦‚æœæ„Ÿè§‰é¢˜è§£å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¸è¦åå•¬ç»™ä¸€ä¸ªğŸ‘å§ï¼**\r\n\r\n<br/>\r\n\r\n\r\nå¥½äº†ï¼Œ**ACä¸€æ—¶çˆ½ï¼Œä¸€ç›´ACä¸€ç›´çˆ½**ï¼\r\n\r\n<br/>\r\n\r\næœ¬äººå…¬ä¼—å· [å¤§ç™½æŠ€æœ¯æ§](https://mp.weixin.qq.com/s/d8RvIYtPOeGM2UOoP0xGkg), 2ä¸‡è¯»è€…ã€‚\r\n\r\nçŸ¥ä¹ [Bravo Yeung](https://www.zhihu.com/people/legege007), 4.5ä¸‡è¯»è€…ã€‚\r\n\r\nBç«™ [æå®¢å­¦é•¿å‘€](https://space.bilibili.com/1443957), åç»­ä¼šç”¨è§†é¢‘çš„å½¢å¼æ¥å¸¦å¤§å®¶åˆ·LeetCodeé¢˜ï¼Œæ¬¢è¿ç‚¹ä¸ªå…³æ³¨ï¼Œæ•¬è¯·æœŸå¾…~\r\n\r\n<br/>\r\n\r\næ›´å¤šæ¸…æ™°æ˜“æ‡‚çš„ä»£ç  (C++/Java/C#/Python/Go) çš„ LeetCode é¢˜è§£ï¼Œä¼šåœ¨æˆ‘çš„ github ä»“åº“ [https://github.com/yanglr/leetcode-ac](https://github.com/yanglr/leetcode-ac)ä¸­æŒç»­æ›´æ–°, æ¬¢è¿å°ä¼™ä¼´ä»¬ star/forkï¼Œå¦‚æœæœ‰ä¸é”™çš„è§£æ³•ä¹Ÿæ¬¢è¿æPRã€‚\r\n\r\n\r\n\r\n**ps:** ä»“åº“çš„ä»£ç ä¸­å¯ä»¥ç›´æ¥æ‹¿æ¥æœ¬åœ°è°ƒè¯•å–”ï¼Œæ¡†æ¶å·²æ­å¥½ï¼Œæ ¹æ®è‡ªå·±çš„éœ€æ±‚è°ƒæ•´ test caseå³å¯~\r\n",
      "createdAt": "2021-10-09T05:29:45.062175+00:00",
      "hitCount": 401,
      "identifier": "rEBqEl",
      "isEditorsPick": false,
      "isMostPopular": false,
      "isMyFavorite": false,
      "next": {
        "__typename": "BriefSolutionNode",
        "slug": "mo-ni-fa-sheng-cheng-shen-qi-zi-fu-chuan-pn0x",
        "title": "æ¨¡æ‹Ÿæ³•ç”Ÿæˆç¥å¥‡å­—ç¬¦ä¸²"
      },
      "position": 1,
      "prev": null,
      "question": {
        "__typename": "QuestionNode",
        "questionTitleSlug": "magical-string"
      },
      "reactionType": null,
      "reactionsV2": [
        {
          "__typename": "ReactionCountNode",
          "count": 4,
          "reactionType": "UPVOTE"
        },
        {
          "__typename": "ReactionCountNode",
          "count": 3,
          "reactionType": "AWESOME"
        }
      ],
      "rewardEnabled": null,
      "slug": "geekplayers-leetcode-ac-qing-xi-yi-dong-2pdyf",
      "status": "PREPUBLISH",
      "summary": "æ¬¢è¿å¤§å®¶å…³æ³¨æˆ‘çš„LeetCodeä»£ç ä»“åº“ï¼šhttps://github.com/yanglr/leetcode-ac,\næ‰€æœ‰ä»£ç (å«æœ‰å„ç§ä¸»æµè¯­è¨€åŠShellã€SQLç­‰)å·²ä¸Šä¼ åˆ°æ­¤ä»“åº“ã€‚\nç›®å‰å·²å®Œæˆçš„450é“é¢˜éƒ½æœ‰å®Œæ•´ç‰ˆC++ä»£ç ã€‚\n\nå‡ ä¹æ‰€æœ‰é¢˜ç›®éƒ½ä¼šè¿½æ±‚ä¸€é¢˜å¤šè§£å’Œæœ€ä¼˜è§£æ³•ï¼ŒçœŸè¯šæ±‚starï¼\nè§£é¢˜æ€è·¯\né¢˜æ„: è¾“å…¥n",
      "sunk": false,
      "tags": [
        {
          "__typename": "CommonTagNode",
          "name": "C++",
          "nameTranslated": "",
          "slug": "cpp",
          "tagType": "LANGUAGE"
        },
        {
          "__typename": "CommonTagNode",
          "name": "æ ¡æ‹›",
          "nameTranslated": "",
          "slug": "xiao-zhao",
          "tagType": "ADDITIONAL_TOPIC"
        },
        {
          "__typename": "CommonTagNode",
          "name": "é¢˜è§£",
          "nameTranslated": "",
          "slug": "ti-jie",
          "tagType": "ADDITIONAL_TOPIC"
        },
        {
          "__typename": "CommonTagNode",
          "name": "æ¯æ—¥ä¸€é¢˜",
          "nameTranslated": "",
          "slug": "mei-ri-yi-ti",
          "tagType": "ADDITIONAL_TOPIC"
        },
        {
          "__typename": "CommonTagNode",
          "name": "å¤§å‚é¢è¯•",
          "nameTranslated": "",
          "slug": "da-han-mian-shi",
          "tagType": "ADDITIONAL_TOPIC"
        },
        {
          "__typename": "CommonTagNode",
          "name": "Simulation",
          "nameTranslated": "æ¨¡æ‹Ÿ",
          "slug": "simulation",
          "tagType": "TOPIC"
        },
        {
          "__typename": "CommonTagNode",
          "name": "æ¯æ—¥æ‰“å¡",
          "nameTranslated": "",
          "slug": "mei-ri-da-qia",
          "tagType": "ADDITIONAL_TOPIC"
        },
        {
          "__typename": "CommonTagNode",
          "name": "ç§‹æ‹›",
          "nameTranslated": "",
          "slug": "qiu-zhao",
          "tagType": "ADDITIONAL_TOPIC"
        },
        {
          "__typename": "CommonTagNode",
          "name": "é…å›¾",
          "nameTranslated": "",
          "slug": "pei-tu",
          "tagType": "ADDITIONAL_TOPIC"
        }
      ],
      "thumbnail": "https://pic.leetcode-cn.com/1633757997-CmItuK-image.png",
      "title": "æ¸…æ™°æ˜“æ‡‚çš„è§£æ³•(å«è¯¦ç»†é…å›¾, å‡»è´¥91%), æœ‰è¯¦ç»†æ³¨é‡Šã€æå®¢å­¦é•¿ã€‘",
      "topic": {
        "__typename": "TopicNode",
        "commentCount": 5,
        "id": 1037835,
        "viewCount": 292
      },
      "uuid": "rEBqEl",
      "videosInfo": []
    }
  }
}
